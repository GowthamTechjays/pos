{"version":3,"sources":["webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/_guards/auth.guard.ts","webpack:///./src/app/_guards/index.ts","webpack:///./src/app/_services/AuthTknInterceptor.ts","webpack:///./src/app/_services/authentication.service.ts","webpack:///./src/app/_services/custom-download-service.service.ts","webpack:///./src/app/_services/index.ts","webpack:///./src/app/_services/newApi.ts","webpack:///./src/app/_services/shared.service.ts","webpack:///./src/app/administration/form-employees/form-employees.component.css","webpack:///./src/app/administration/form-employees/form-employees.component.html","webpack:///./src/app/administration/form-employees/form-employees.component.ts","webpack:///./src/app/administration/form-roles/form-roles.component.css","webpack:///./src/app/administration/form-roles/form-roles.component.html","webpack:///./src/app/administration/form-roles/form-roles.component.ts","webpack:///./src/app/administration/view-employees/view-employees.component.css","webpack:///./src/app/administration/view-employees/view-employees.component.html","webpack:///./src/app/administration/view-employees/view-employees.component.ts","webpack:///./src/app/administration/view-roles/view-roles.component.css","webpack:///./src/app/administration/view-roles/view-roles.component.html","webpack:///./src/app/administration/view-roles/view-roles.component.ts","webpack:///./src/app/api/S3Manager.ts","webpack:///./src/app/app.component.css","webpack:///./src/app/app.component.html","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/app.routing.ts","webpack:///./src/app/customers/form-customers/form-customers.component.css","webpack:///./src/app/customers/form-customers/form-customers.component.html","webpack:///./src/app/customers/form-customers/form-customers.component.ts","webpack:///./src/app/customers/view-customers/view-customers.component.css","webpack:///./src/app/customers/view-customers/view-customers.component.html","webpack:///./src/app/customers/view-customers/view-customers.component.ts","webpack:///./src/app/dashboard-content/dashboard-content.component.css","webpack:///./src/app/dashboard-content/dashboard-content.component.html","webpack:///./src/app/dashboard-content/dashboard-content.component.ts","webpack:///./src/app/dashboard-sidebar/dashboard-sidebar.component.css","webpack:///./src/app/dashboard-sidebar/dashboard-sidebar.component.html","webpack:///./src/app/dashboard-sidebar/dashboard-sidebar.component.ts","webpack:///./src/app/dashboard-topbar/dashboard-topbar.component.css","webpack:///./src/app/dashboard-topbar/dashboard-topbar.component.html","webpack:///./src/app/dashboard-topbar/dashboard-topbar.component.ts","webpack:///./src/app/dashboard/dashboard.component.css","webpack:///./src/app/dashboard/dashboard.component.html","webpack:///./src/app/dashboard/dashboard.component.ts","webpack:///./src/app/forms/fill/irrigation-repair-parts/irrigation-repair-parts.component.css","webpack:///./src/app/forms/fill/irrigation-repair-parts/irrigation-repair-parts.component.html","webpack:///./src/app/forms/fill/irrigation-repair-parts/irrigation-repair-parts.component.ts","webpack:///./src/app/forms/fill/irrigation-repair/irrigation-repair.component.css","webpack:///./src/app/forms/fill/irrigation-repair/irrigation-repair.component.html","webpack:///./src/app/forms/fill/irrigation-repair/irrigation-repair.component.ts","webpack:///./src/app/forms/fill/m-work-order/m-work-order.component.css","webpack:///./src/app/forms/fill/m-work-order/m-work-order.component.html","webpack:///./src/app/forms/fill/m-work-order/m-work-order.component.ts","webpack:///./src/app/forms/fill/purchase-order/purchase-order.component.css","webpack:///./src/app/forms/fill/purchase-order/purchase-order.component.html","webpack:///./src/app/forms/fill/purchase-order/purchase-order.component.ts","webpack:///./src/app/forms/fill/start-job/start-job.component.css","webpack:///./src/app/forms/fill/start-job/start-job.component.html","webpack:///./src/app/forms/fill/start-job/start-job.component.ts","webpack:///./src/app/forms/fill/stock-transfer/stock-transfer.component.css","webpack:///./src/app/forms/fill/stock-transfer/stock-transfer.component.html","webpack:///./src/app/forms/fill/stock-transfer/stock-transfer.component.ts","webpack:///./src/app/forms/fill/walkthrough/walkthrough.component.css","webpack:///./src/app/forms/fill/walkthrough/walkthrough.component.html","webpack:///./src/app/forms/fill/walkthrough/walkthrough.component.ts","webpack:///./src/app/forms/fill/work-order/work-order.component.css","webpack:///./src/app/forms/fill/work-order/work-order.component.html","webpack:///./src/app/forms/fill/work-order/work-order.component.ts","webpack:///./src/app/forms/view-c-work-order/view-c-work-order.component.css","webpack:///./src/app/forms/view-c-work-order/view-c-work-order.component.html","webpack:///./src/app/forms/view-c-work-order/view-c-work-order.component.ts","webpack:///./src/app/forms/view-cost-summary/view-cost-summary.component.css","webpack:///./src/app/forms/view-cost-summary/view-cost-summary.component.html","webpack:///./src/app/forms/view-cost-summary/view-cost-summary.component.ts","webpack:///./src/app/forms/view-irrigation-repair/view-irrigation-repair.component.css","webpack:///./src/app/forms/view-irrigation-repair/view-irrigation-repair.component.html","webpack:///./src/app/forms/view-irrigation-repair/view-irrigation-repair.component.ts","webpack:///./src/app/forms/view-m-work-order/view-m-work-order.component.css","webpack:///./src/app/forms/view-m-work-order/view-m-work-order.component.html","webpack:///./src/app/forms/view-m-work-order/view-m-work-order.component.ts","webpack:///./src/app/forms/view-purchase-order/view-purchase-order.component.css","webpack:///./src/app/forms/view-purchase-order/view-purchase-order.component.html","webpack:///./src/app/forms/view-purchase-order/view-purchase-order.component.ts","webpack:///./src/app/forms/view-stock-transfer/view-stock-transfer.component.css","webpack:///./src/app/forms/view-stock-transfer/view-stock-transfer.component.html","webpack:///./src/app/forms/view-stock-transfer/view-stock-transfer.component.ts","webpack:///./src/app/forms/view-walkthrough/view-walkthrough.component.css","webpack:///./src/app/forms/view-walkthrough/view-walkthrough.component.html","webpack:///./src/app/forms/view-walkthrough/view-walkthrough.component.ts","webpack:///./src/app/forms/view-work-order/view-work-order.component.css","webpack:///./src/app/forms/view-work-order/view-work-order.component.html","webpack:///./src/app/forms/view-work-order/view-work-order.component.ts","webpack:///./src/app/general/app-updates/app-updates.component.css","webpack:///./src/app/general/app-updates/app-updates.component.html","webpack:///./src/app/general/app-updates/app-updates.component.ts","webpack:///./src/app/general/bug-report/bug-report.component.css","webpack:///./src/app/general/bug-report/bug-report.component.html","webpack:///./src/app/general/bug-report/bug-report.component.ts","webpack:///./src/app/general/update-constants/update-constants.component.css","webpack:///./src/app/general/update-constants/update-constants.component.html","webpack:///./src/app/general/update-constants/update-constants.component.ts","webpack:///./src/app/general/view-data-usage/view-data-usage.component.css","webpack:///./src/app/general/view-data-usage/view-data-usage.component.html","webpack:///./src/app/general/view-data-usage/view-data-usage.component.ts","webpack:///./src/app/inventory/form-containers/form-containers.component.css","webpack:///./src/app/inventory/form-containers/form-containers.component.html","webpack:///./src/app/inventory/form-containers/form-containers.component.ts","webpack:///./src/app/inventory/form-materials/form-materials.component.css","webpack:///./src/app/inventory/form-materials/form-materials.component.html","webpack:///./src/app/inventory/form-materials/form-materials.component.ts","webpack:///./src/app/inventory/form-truck-inventory/form-truck-inventory.component.css","webpack:///./src/app/inventory/form-truck-inventory/form-truck-inventory.component.html","webpack:///./src/app/inventory/form-truck-inventory/form-truck-inventory.component.ts","webpack:///./src/app/inventory/view-containers/view-containers.component.css","webpack:///./src/app/inventory/view-containers/view-containers.component.html","webpack:///./src/app/inventory/view-containers/view-containers.component.ts","webpack:///./src/app/inventory/view-materials/view-materials.component.css","webpack:///./src/app/inventory/view-materials/view-materials.component.html","webpack:///./src/app/inventory/view-materials/view-materials.component.ts","webpack:///./src/app/inventory/view-truck-inventory/view-truck-inventory.component.css","webpack:///./src/app/inventory/view-truck-inventory/view-truck-inventory.component.html","webpack:///./src/app/inventory/view-truck-inventory/view-truck-inventory.component.ts","webpack:///./src/app/login/index.ts","webpack:///./src/app/login/login.component.html","webpack:///./src/app/login/login.component.ts","webpack:///./src/app/populate/update-customers-list/update-customers-list.component.css","webpack:///./src/app/populate/update-customers-list/update-customers-list.component.html","webpack:///./src/app/populate/update-customers-list/update-customers-list.component.ts","webpack:///./src/app/view-stock-by-truck/view-stock-by-truck.component.css","webpack:///./src/app/view-stock-by-truck/view-stock-by-truck.component.html","webpack:///./src/app/view-stock-by-truck/view-stock-by-truck.component.ts","webpack:///./src/app/view-stock-transfer-statistics/view-stock-transfer-statistics.component.css","webpack:///./src/app/view-stock-transfer-statistics/view-stock-transfer-statistics.component.html","webpack:///./src/app/view-stock-transfer-statistics/view-stock-transfer-statistics.component.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts","webpack:///fs (ignored)"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","import { Injectable } from '@angular/core';\r\nimport { Router, CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class AuthGuard implements CanActivate {\r\n\r\n    constructor(private router: Router) { }\r\n\r\n    canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\r\n        if (localStorage.getItem('currentUser')) {\r\n            // logged in so return true\r\n            return true;\r\n        }\r\n\r\n        // not logged in so redirect to login page with the return url\r\n        this.router.navigate(['/login'], { queryParams: { returnUrl: state.url }});\r\n        return false;\r\n    }\r\n}\r\n","export * from './auth.guard';\r\n","import { HttpInterceptor, HttpRequest, HttpHandler, HttpEvent, HttpResponse, HttpErrorResponse } from \"@angular/common/http\";\r\nimport { AuthenticationService } from \"process-smart-ng6-lib\";\r\nimport { Observable, throwError } from \"rxjs\";\r\nimport { Injectable } from \"@angular/core\";\r\nimport { retry, catchError } from \"rxjs/operators\";\r\nimport { Router } from \"@angular/router\";\r\n\r\n@Injectable()\r\nexport class AuthTknInterceptor implements HttpInterceptor {\r\n  constructor(private router: Router, public auth: AuthenticationService) {}\r\n  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<any> {\r\n      return next.handle(req).pipe(\r\n              retry(2),\r\n              catchError((error: HttpErrorResponse) => {\r\n                if (error.status === 401) {\r\n                  // 401 handled in auth.interceptor\r\n                    this.auth.logout();\r\n                    this.router.navigate(['/login']);\r\n                }\r\n                return throwError(error);\r\n              })\r\n            );\r\n    }\r\n}","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { map } from 'rxjs/operators';\r\nimport { environment } from '../../environments/environment';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class AuthenticationService {\r\n    // protected basePath = 'https://api.personitech.com:8443/ProcessSmart';\r\n    protected basePath = 'https://tnitminister.com:8443/ProcessSmart';\r\n\r\n    constructor(private http: HttpClient) { }\r\n\r\n    login(uname_login: string, pass_login: string) {\r\n        // const body = new URLSearchParams();\r\n        // body.set('uname_login', uname_login);\r\n        // body.set('pass_login', pass_login);\r\n        // const options = {\r\n        //     headers: new HttpHeaders().set('Content-Type', 'application/x-www-form-urlencoded')\r\n        // };\r\n\r\n        return this.http.post<any>(`${this.basePath}/ClientLogin?uname_login=${uname_login}&pass_login=${pass_login}`, {})\r\n            .pipe(map(session => {\r\n                //Check if user belongs in this client (client ID in environments/environment[.prod].ts)\r\n                if (environment.allow_client != session.user.client_id) {\r\n                    return null;\r\n                }\r\n                // login successful if there's a token in the response\r\n                else if (session && session.apiKey) {\r\n                    // store user details and jwt token in local storage to keep user logged in between page refreshes\r\n                    localStorage.setItem('currentUser', JSON.stringify(session));\r\n                    return session;\r\n                }\r\n                else {\r\n                    return null;\r\n                }\r\n            }));\r\n    }\r\n\r\n    logout() {\r\n        // remove user from local storage to log user out\r\n        localStorage.removeItem('currentUser');\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpHeaders, HttpClient, HttpResponse, HttpEvent, HttpParams } from \"@angular/common/http\";\r\nimport { Observable } from \"rxjs\";\r\nimport { Configuration } from \"process-smart-ng6-lib\";\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CustomDownloadServiceService {\r\n\r\n    // protected basePath = 'https://api.personitech.com:8443/ProcessSmart';\r\n    protected basePath = 'https://tnitminister.com:8443/ProcessSmart';\r\n    public defaultHeaders = new HttpHeaders();\r\n    public configuration = new Configuration();\r\n\r\n    constructor(protected httpClient: HttpClient) {\r\n        this.defaultHeaders = this.defaultHeaders.set('Authorization', 'Bearer ' + JSON.parse(localStorage.getItem('currentUser')).apiKey);\r\n    }\r\n    \r\n    /**\r\n     * Download PDF of a Walkthru form (Punchlist)\r\n     * @param id Form ID\r\n     * @param observe set whether or not to return the data Observable as the body, response or events. defaults to returning the body.\r\n     * @param reportProgress flag to report request and response progress.\r\n     */\r\n    public downloadWalkthroughPDF(id: string) {\r\n        if (id === null || id === undefined) {\r\n            throw new Error('Required parameter id was null or undefined when calling downloadFormPDF.');\r\n        }\r\n        \r\n        this.defaultHeaders = this.defaultHeaders.set('Authorization', 'Bearer ' + JSON.parse(localStorage.getItem('currentUser')).apiKey);\r\n        let headers = this.defaultHeaders;\r\n        let params = new HttpParams();\r\n        params = params.append('formId', id);\r\n\r\n        // authentication (bearerAuth) required\r\n        // to determine the Accept header\r\n        const httpHeaderAccepts: string[] = [\r\n            'application/pdf',\r\n            'text/plain'\r\n        ];\r\n        const httpHeaderAcceptSelected: string | undefined = this.configuration.selectHeaderAccept(httpHeaderAccepts);\r\n        if (httpHeaderAcceptSelected !== undefined) {\r\n            headers = headers.set('Accept', httpHeaderAcceptSelected);\r\n        }\r\n\r\n        return this.httpClient.get(`${this.basePath}/DownloadWalkthroughPDF`,\r\n            {\r\n                withCredentials: this.configuration.withCredentials,\r\n                headers: headers,\r\n                params: params,\r\n                responseType: 'blob'\r\n            }\r\n        );\r\n    }\r\n    \r\n    /**\r\n     * Download PDF of a Walkthru form (Punchlist)\r\n     * @param id Form ID\r\n     * @param observe set whether or not to return the data Observable as the body, response or events. defaults to returning the body.\r\n     * @param reportProgress flag to report request and response progress.\r\n     */\r\n    public downloadWalkthroughDocx(id: string) {\r\n        if (id === null || id === undefined) {\r\n            throw new Error('Required parameter id was null or undefined when calling downloadFormPDF.');\r\n        }\r\n        \r\n        this.defaultHeaders = this.defaultHeaders.set('Authorization', 'Bearer ' + JSON.parse(localStorage.getItem('currentUser')).apiKey);\r\n        let headers = this.defaultHeaders;\r\n        let params = new HttpParams();\r\n        params = params.append('formId', id);\r\n\r\n        // authentication (bearerAuth) required\r\n        // to determine the Accept header\r\n        const httpHeaderAccepts: string[] = [\r\n            'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\r\n            'text/plain'\r\n        ];\r\n        const httpHeaderAcceptSelected: string | undefined = this.configuration.selectHeaderAccept(httpHeaderAccepts);\r\n        if (httpHeaderAcceptSelected !== undefined) {\r\n            headers = headers.set('Accept', httpHeaderAcceptSelected);\r\n        }\r\n\r\n        return this.httpClient.get(`${this.basePath}/DownloadWalkthroughDocx`,\r\n            {\r\n                withCredentials: this.configuration.withCredentials,\r\n                headers: headers,\r\n                params: params,\r\n                responseType: 'blob'\r\n            }\r\n        );\r\n    }\r\n    \r\n    /**\r\n     * Download Work Order PDF\r\n     * @param id\r\n     */\r\n    public downloadWorkOrderPDF(id: string) {\r\n        if (id === null || id === undefined) {\r\n            throw new Error('Required parameter id was null or undefined when calling downloadFormPDF.');\r\n        }\r\n        \r\n        this.defaultHeaders = this.defaultHeaders.set('Authorization', 'Bearer ' + JSON.parse(localStorage.getItem('currentUser')).apiKey);\r\n        let headers = this.defaultHeaders;\r\n        let params = new HttpParams();\r\n        params = params.append('formId', id);\r\n\r\n        // authentication (bearerAuth) required\r\n        // to determine the Accept header\r\n        const httpHeaderAccepts: string[] = [\r\n            'application/pdf',\r\n            'text/plain'\r\n        ];\r\n        const httpHeaderAcceptSelected: string | undefined = this.configuration.selectHeaderAccept(httpHeaderAccepts);\r\n        if (httpHeaderAcceptSelected !== undefined) {\r\n            headers = headers.set('Accept', httpHeaderAcceptSelected);\r\n        }\r\n\r\n        return this.httpClient.get(`${this.basePath}/DownloadWorkOrderPDF`,\r\n            {\r\n                withCredentials: this.configuration.withCredentials,\r\n                headers: headers,\r\n                params: params,\r\n                responseType: 'blob'\r\n            }\r\n        );\r\n    }\r\n    \r\n    /**\r\n     * Download Purchase Order PDF\r\n     * @param id\r\n     */\r\n    public downloadPurchaseOrderPDF(id: string) {\r\n        if (id === null || id === undefined) {\r\n            throw new Error('Required parameter id was null or undefined when calling downloadFormPDF.');\r\n        }\r\n        \r\n        this.defaultHeaders = this.defaultHeaders.set('Authorization', 'Bearer ' + JSON.parse(localStorage.getItem('currentUser')).apiKey);\r\n        let headers = this.defaultHeaders;\r\n        let params = new HttpParams();\r\n        params = params.append('formId', id);\r\n\r\n        // authentication (bearerAuth) required\r\n        // to determine the Accept header\r\n        const httpHeaderAccepts: string[] = [\r\n            'application/pdf',\r\n            'text/plain'\r\n        ];\r\n        const httpHeaderAcceptSelected: string | undefined = this.configuration.selectHeaderAccept(httpHeaderAccepts);\r\n        if (httpHeaderAcceptSelected !== undefined) {\r\n            headers = headers.set('Accept', httpHeaderAcceptSelected);\r\n        }\r\n\r\n        return this.httpClient.get(`${this.basePath}/DownloadPurchaseOrderPDF`,\r\n            {\r\n                withCredentials: this.configuration.withCredentials,\r\n                headers: headers,\r\n                params: params,\r\n                responseType: 'blob'\r\n            }\r\n        );\r\n    }\r\n    \r\n    /**\r\n     * Download Work Order Spreadsheet\r\n     * @param id\r\n     */\r\n    public downloadWorkOrderXls(id: string) {\r\n        if (id === null || id === undefined) {\r\n            throw new Error('Required parameter id was null or undefined when calling downloadFormPDF.');\r\n        }\r\n        \r\n        this.defaultHeaders = this.defaultHeaders.set('Authorization', 'Bearer ' + JSON.parse(localStorage.getItem('currentUser')).apiKey);\r\n        let headers = this.defaultHeaders;\r\n        let params = new HttpParams();\r\n        params = params.append('formId', id);\r\n\r\n        // authentication (bearerAuth) required\r\n        // to determine the Accept header\r\n        const httpHeaderAccepts: string[] = [\r\n            'application/vnd.ms-excel',\r\n            'text/plain'\r\n        ];\r\n        const httpHeaderAcceptSelected: string | undefined = this.configuration.selectHeaderAccept(httpHeaderAccepts);\r\n        if (httpHeaderAcceptSelected !== undefined) {\r\n            headers = headers.set('Accept', httpHeaderAcceptSelected);\r\n        }\r\n\r\n        return this.httpClient.get(`${this.basePath}/DownloadWorkOrderXls`,\r\n            {\r\n                withCredentials: this.configuration.withCredentials,\r\n                headers: headers,\r\n                params: params,\r\n                responseType: 'blob'\r\n            }\r\n        );\r\n    }\r\n    \r\n    /**\r\n     * Download Stock Transfer Spreadsheet\r\n     * @param id\r\n     */\r\n    public downloadStockTransferXls(id: string) {\r\n        if (id === null || id === undefined) {\r\n            throw new Error('Required parameter id was null or undefined when calling downloadFormPDF.');\r\n        }\r\n        \r\n        this.defaultHeaders = this.defaultHeaders.set('Authorization', 'Bearer ' + JSON.parse(localStorage.getItem('currentUser')).apiKey);\r\n        let headers = this.defaultHeaders;\r\n        let params = new HttpParams();\r\n        params = params.append('formId', id);\r\n\r\n        // authentication (bearerAuth) required\r\n        // to determine the Accept header\r\n        const httpHeaderAccepts: string[] = [\r\n            'application/vnd.ms-excel',\r\n            'text/plain'\r\n        ];\r\n        const httpHeaderAcceptSelected: string | undefined = this.configuration.selectHeaderAccept(httpHeaderAccepts);\r\n        if (httpHeaderAcceptSelected !== undefined) {\r\n            headers = headers.set('Accept', httpHeaderAcceptSelected);\r\n        }\r\n\r\n        return this.httpClient.get(`${this.basePath}/DownloadStockTransferXls`,\r\n            {\r\n                withCredentials: this.configuration.withCredentials,\r\n                headers: headers,\r\n                params: params,\r\n                responseType: 'blob'\r\n            }\r\n        );\r\n    }\r\n    \r\n    /**\r\n     * Download Irrigation Repair Form PDF\r\n     * @param id\r\n     */\r\n    public downloadIrrigationRepairPDF(id: string) {\r\n        if (id === null || id === undefined) {\r\n            throw new Error('Required parameter id was null or undefined when calling downloadFormPDF.');\r\n        }\r\n        this.defaultHeaders = this.defaultHeaders.set('Authorization', 'Bearer ' + JSON.parse(localStorage.getItem('currentUser')).apiKey);\r\n        let headers = this.defaultHeaders;\r\n        let params = new HttpParams();\r\n        params = params.append('formId', id);\r\n\r\n        // authentication (bearerAuth) required\r\n        // to determine the Accept header\r\n        const httpHeaderAccepts: string[] = [\r\n            'application/pdf',\r\n            'text/plain'\r\n        ];\r\n        const httpHeaderAcceptSelected: string | undefined = this.configuration.selectHeaderAccept(httpHeaderAccepts);\r\n        if (httpHeaderAcceptSelected !== undefined) {\r\n            headers = headers.set('Accept', httpHeaderAcceptSelected);\r\n        }\r\n\r\n        return this.httpClient.get(`${this.basePath}/DownloadIrrigationRepairPDF`,\r\n            {\r\n                withCredentials: this.configuration.withCredentials,\r\n                headers: headers,\r\n                params: params,\r\n                responseType: 'blob'\r\n            }\r\n        );\r\n    }\r\n    \r\n    public downloadIrrigationRepairPDF_zip(idList) {\r\n        if (idList === null || idList === undefined) {\r\n            throw new Error('Required parameter id was null or undefined when calling downloadFormPDF.');\r\n        }\r\n        this.defaultHeaders = this.defaultHeaders.set('Authorization', 'Bearer ' + JSON.parse(localStorage.getItem('currentUser')).apiKey);\r\n        let headers = this.defaultHeaders;\r\n        let params = new HttpParams();\r\n        params = params.append('formIds', idList.join());\r\n\r\n        // authentication (bearerAuth) required\r\n        // to determine the Accept header\r\n        const httpHeaderAccepts: string[] = [\r\n            'application/zip'\r\n        ];\r\n        const httpHeaderAcceptSelected: string | undefined = this.configuration.selectHeaderAccept(httpHeaderAccepts);\r\n        if (httpHeaderAcceptSelected !== undefined) {\r\n            headers = headers.set('Accept', httpHeaderAcceptSelected);\r\n        }\r\n\r\n        return this.httpClient.get(`${this.basePath}/DownloadIrrigationRepairPDFs`,\r\n            {\r\n                withCredentials: this.configuration.withCredentials,\r\n                headers: headers,\r\n                params: params,\r\n                responseType: 'blob'\r\n            }\r\n        );\r\n    }\r\n    \r\n    public downloadAllWithJobnum_zip(jobnum: string) {\r\n        if (!jobnum) {\r\n            throw new Error('Required parameter jobnum was null or undefined when calling downloadAllWithJobnum_zip.');\r\n        }\r\n        this.defaultHeaders = this.defaultHeaders.set('Authorization', 'Bearer ' + JSON.parse(localStorage.getItem('currentUser')).apiKey);\r\n        let headers = this.defaultHeaders;\r\n        let params = new HttpParams();\r\n        params = params.append('jobnum', jobnum);\r\n\r\n        // authentication (bearerAuth) required\r\n        // to determine the Accept header\r\n        const httpHeaderAccepts: string[] = [\r\n            'application/zip'\r\n        ];\r\n        const httpHeaderAcceptSelected: string | undefined = this.configuration.selectHeaderAccept(httpHeaderAccepts);\r\n        if (httpHeaderAcceptSelected !== undefined) {\r\n            headers = headers.set('Accept', httpHeaderAcceptSelected);\r\n        }\r\n\r\n        return this.httpClient.get(`${this.basePath}/DownloadAllFilesWithJobnum`,\r\n            {\r\n                withCredentials: this.configuration.withCredentials,\r\n                headers: headers,\r\n                params: params,\r\n                responseType: 'blob'\r\n            }\r\n        );\r\n    }\r\n    \r\n    /**\r\n     * Change a form's state (process number)\r\n     * @param id Form ID\r\n     * @param observe set whether or not to return the data Observable as the body, response or events. defaults to returning the body.\r\n     * @param reportProgress flag to report request and response progress.\r\n     */\r\n    public setActiveAllFormWithJobnum(jobnum: string, isActive: boolean, observe: any = 'body', reportProgress: boolean = false ): Observable<any> {\r\n        if (!jobnum) {\r\n            throw new Error('Required parameter type jobnum was null or undefined when calling setActiveAllFormWithJobnum.');\r\n        }\r\n        if (!isActive) {\r\n            throw new Error('Required parameter isActive was null or undefined when calling setActiveAllFormWithJobnum.');\r\n        }\r\n        let params = new HttpParams();\r\n        params = params.append('jobnum', jobnum);\r\n        params = params.append('isActive', ''+isActive);\r\n        \r\n        this.defaultHeaders = this.defaultHeaders.set('Authorization', 'Bearer ' + JSON.parse(localStorage.getItem('currentUser')).apiKey);let headers = this.defaultHeaders;\r\n\r\n        // authentication (bearerAuth) required\r\n        // to determine the Accept header\r\n        const httpHeaderAccepts: string[] = [\r\n            'application/json',\r\n            'text/plain'\r\n        ];\r\n        const httpHeaderAcceptSelected: string | undefined = this.configuration.selectHeaderAccept(httpHeaderAccepts);\r\n        if (httpHeaderAcceptSelected !== undefined) {\r\n            headers = headers.set('Accept', httpHeaderAcceptSelected);\r\n        }\r\n\r\n        // to determine the Content-Type header\r\n        const consumes: string[] = [\r\n        ];\r\n\r\n        return this.httpClient.post(`${this.basePath}/setActiveAllFormWithJobnum`, null,\r\n            {\r\n                withCredentials: this.configuration.withCredentials,\r\n                headers: headers,\r\n                observe: observe,\r\n                reportProgress: reportProgress,\r\n                params: params\r\n            }\r\n        );\r\n    }\r\n    \r\n    public downloadDataUsageXls(months: string) {\r\n        if (months === null || months === undefined) {\r\n            throw new Error('Required parameter months was null or undefined when calling downloadDataUsageXls.');\r\n        }\r\n        \r\n        this.defaultHeaders = this.defaultHeaders.set('Authorization', 'Bearer ' + JSON.parse(localStorage.getItem('currentUser')).apiKey);\r\n        let headers = this.defaultHeaders;\r\n        let params = new HttpParams();\r\n        params = params.append('months', months);\r\n\r\n        // authentication (bearerAuth) required\r\n        // to determine the Accept header\r\n        const httpHeaderAccepts: string[] = [\r\n            'application/pdf',\r\n            'text/plain'\r\n        ];\r\n        const httpHeaderAcceptSelected: string | undefined = this.configuration.selectHeaderAccept(httpHeaderAccepts);\r\n        if (httpHeaderAcceptSelected !== undefined) {\r\n            headers = headers.set('Accept', httpHeaderAcceptSelected);\r\n        }\r\n\r\n        return this.httpClient.get(`${this.basePath}/GetDataUsageXls`,\r\n            {\r\n                withCredentials: this.configuration.withCredentials,\r\n                headers: headers,\r\n                params: params,\r\n                responseType: 'blob'\r\n            }\r\n        );\r\n    }\r\n    \r\n    public downloadStockTransferMaterialUsage(start_date: string, end_date: string, filler_id?: string) {\r\n        if (start_date === null || start_date === undefined) {\r\n            throw new Error('Required parameter start_date was null or undefined when calling downloadStockTransferMaterialUsage.');\r\n        }\r\n        \r\n        if (end_date === null || end_date === undefined) {\r\n            throw new Error('Required parameter end_date was null or undefined when calling downloadStockTransferMaterialUsage.');\r\n        }\r\n        \r\n        this.defaultHeaders = this.defaultHeaders.set('Authorization', 'Bearer ' + JSON.parse(localStorage.getItem('currentUser')).apiKey);\r\n        let headers = this.defaultHeaders;\r\n        let params = new HttpParams();\r\n        params = params.append('start_date', start_date);\r\n        params = params.append('end_date', end_date); \r\n        if(filler_id){\r\n            params = params.append('fillerId', filler_id);\r\n        }\r\n\r\n        // authentication (bearerAuth) required\r\n        // to determine the Accept header\r\n        const httpHeaderAccepts: string[] = [\r\n            'application/vnd.ms-excel',\r\n            'text/plain'\r\n        ];\r\n        const httpHeaderAcceptSelected: string | undefined = this.configuration.selectHeaderAccept(httpHeaderAccepts);\r\n        if (httpHeaderAcceptSelected !== undefined) {\r\n            headers = headers.set('Accept', httpHeaderAcceptSelected);\r\n        }\r\n\r\n        return this.httpClient.get(`${this.basePath}/GetStockTransferHistoryXls`,\r\n            {\r\n                withCredentials: this.configuration.withCredentials,\r\n                headers: headers,\r\n                params: params,\r\n                responseType: 'blob'\r\n            }\r\n        );\r\n    }\r\n    \r\n    public downloadStockTransferMonthlySummary(month: string) {\r\n        this.defaultHeaders = this.defaultHeaders.set('Authorization', 'Bearer ' + JSON.parse(localStorage.getItem('currentUser')).apiKey);\r\n        let headers = this.defaultHeaders;\r\n        let params = new HttpParams();\r\n        params = params.append('period', 'month');\r\n        params = params.append('periodNum', month); \r\n\r\n        // authentication (bearerAuth) required\r\n        // to determine the Accept header\r\n        const httpHeaderAccepts: string[] = [\r\n            'application/vnd.ms-excel',\r\n            'text/plain'\r\n        ];\r\n        const httpHeaderAcceptSelected: string | undefined = this.configuration.selectHeaderAccept(httpHeaderAccepts);\r\n        if (httpHeaderAcceptSelected !== undefined) {\r\n            headers = headers.set('Accept', httpHeaderAcceptSelected);\r\n        }\r\n\r\n        return this.httpClient.get(`${this.basePath}/DownloadStockTransferSummary`,\r\n            {\r\n                withCredentials: this.configuration.withCredentials,\r\n                headers: headers,\r\n                params: params,\r\n                responseType: 'blob'\r\n            }\r\n        );\r\n    }\r\n    \r\n    public downloadCustomerListXls() {\r\n        this.defaultHeaders = this.defaultHeaders.set('Authorization', 'Bearer ' + JSON.parse(localStorage.getItem('currentUser')).apiKey);\r\n        let headers = this.defaultHeaders;\r\n        let params = new HttpParams();\r\n\r\n        // authentication (bearerAuth) required\r\n        // to determine the Accept header\r\n        const httpHeaderAccepts: string[] = [\r\n            'application/vnd.ms-excel',\r\n            'text/plain'\r\n        ];\r\n        const httpHeaderAcceptSelected: string | undefined = this.configuration.selectHeaderAccept(httpHeaderAccepts);\r\n        if (httpHeaderAcceptSelected !== undefined) {\r\n            headers = headers.set('Accept', httpHeaderAcceptSelected);\r\n        }\r\n\r\n        return this.httpClient.get(`${this.basePath}/DownloadCustomerList`,\r\n            {\r\n                withCredentials: this.configuration.withCredentials,\r\n                headers: headers,\r\n                params: params,\r\n                responseType: 'blob'\r\n            }\r\n        );\r\n    }\r\n    \r\n    public downloadMaterialsListXls(deptId: string) {\r\n        this.defaultHeaders = this.defaultHeaders.set('Authorization', 'Bearer ' + JSON.parse(localStorage.getItem('currentUser')).apiKey);\r\n        let headers = this.defaultHeaders;\r\n        let params = new HttpParams();\r\n        params = params.append('deptId', deptId);\r\n\r\n        // authentication (bearerAuth) required\r\n        // to determine the Accept header\r\n        const httpHeaderAccepts: string[] = [\r\n            'application/vnd.ms-excel',\r\n            'text/plain'\r\n        ];\r\n        const httpHeaderAcceptSelected: string | undefined = this.configuration.selectHeaderAccept(httpHeaderAccepts);\r\n        if (httpHeaderAcceptSelected !== undefined) {\r\n            headers = headers.set('Accept', httpHeaderAcceptSelected);\r\n        }\r\n\r\n        return this.httpClient.get(`${this.basePath}/DownloadInventoryList`,\r\n            {\r\n                withCredentials: this.configuration.withCredentials,\r\n                headers: headers,\r\n                params: params,\r\n                responseType: 'blob'\r\n            }\r\n        );\r\n    }\r\n    public getIRFHeaders(limit: string): Observable<any> {\r\n        this.defaultHeaders = this.defaultHeaders.set('Authorization', 'Bearer ' + JSON.parse(localStorage.getItem('currentUser')).apiKey);\r\n        let headers = this.defaultHeaders;\r\n        let params = new HttpParams();\r\n        params = params.append('limit', limit);\r\n\r\n        // authentication (bearerAuth) required\r\n        // to determine the Accept header\r\n        const httpHeaderAccepts: string[] = [\r\n            'application/json'\r\n        ];\r\n        const httpHeaderAcceptSelected: string | undefined = this.configuration.selectHeaderAccept(httpHeaderAccepts);\r\n        if (httpHeaderAcceptSelected !== undefined) {\r\n            headers = headers.set('Accept', httpHeaderAcceptSelected);\r\n        }\r\n\r\n        return this.httpClient.get(`${this.basePath}/forms/47/getIRFHeaders`,\r\n            {\r\n                withCredentials: this.configuration.withCredentials,\r\n                headers: headers,\r\n                params: params\r\n            }\r\n        );\r\n    }\r\n}\r\n","export * from './authentication.service';\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { map } from 'rxjs/operators';\r\nimport { environment } from '../../environments/environment';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class NewApiService {\r\n    // protected basePath = 'https://api.personitech.com:8443/ProcessSmart';\r\n    protected basePath = 'https://tnitminister.com:8443/ProcessSmart';\r\n\r\n    constructor(private http: HttpClient) { }\r\n\r\n    getViewPurchaseOrder(uname_login: string) {\r\n        const token: any = localStorage.getItem('currentUser')\r\n        console.log(\"data\", JSON.parse(token).apiKey)\r\n        const httpHeaders = new HttpHeaders({\r\n            'Authorization': `Bearer ${JSON.parse(token).apiKey}`\r\n        })\r\n        return this.http.get(`${this.basePath}/getViewPurchaseOrder/54/id?l=10000&o=DESC&p=1&jn=13285-10`, { headers: httpHeaders })\r\n    }\r\n\r\n    getViewWalkThrough(typeId, processNum, uId: any): any {\r\n        console.log(\"itemsList\", typeId, processNum, uId)\r\n        if(uId == undefined){\r\n            uId = 0\r\n        }\r\n        const token: any = localStorage.getItem('currentUser')\r\n        console.log(\"data\", JSON.parse(token).apiKey)\r\n        const httpHeaders = new HttpHeaders({\r\n            'Authorization': `Bearer ${JSON.parse(token).apiKey}`\r\n        })\r\n        return this.http.get(`${this.basePath}/formWalkThrough/${typeId}/id?l=10000&o=DESC&p=${processNum}&f=${0}`, { headers: httpHeaders })\r\n    }\r\n\r\n    getProcessnum(typeId): any {\r\n        console.log(\"working\", typeId)\r\n        const token: any = localStorage.getItem('currentUser')\r\n        console.log(\"data\", JSON.parse(token).apiKey)\r\n        const httpHeaders = new HttpHeaders({\r\n            'Authorization': `Bearer ${JSON.parse(token).apiKey}`\r\n        })\r\n        return this.http.get(`${this.basePath}/formWalkThrough/${typeId}/id?l=10000&o=DESC`, { headers: httpHeaders })\r\n    }\r\n\r\n}","import { Injectable } from '@angular/core';\r\nimport { FormManagementService } from \"process-smart-ng6-lib\";\r\nimport { Router } from \"@angular/router\";\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class SharedService {\r\n\r\n    admin_role_id = '1';\r\n    \r\n    sharedNode = {\r\n      success: '',\r\n      error: ''\r\n    };\r\n    \r\n    num_uploads = 0;\r\n    redirect_to = '/';\r\n    \r\n    alerts = {\r\n        wt_2: 0,\r\n        wt_3: 0,\r\n        irf_1: 0,\r\n        irf_2: 0,\r\n        irf_3: 0\r\n    };\r\n\r\n    uploadModalActive='none';\r\n    \r\n  constructor(private router: Router, private fms: FormManagementService) { }\r\n  \r\n  activateUploadModal(){\r\n      this.uploadModalActive = 'block';\r\n  }\r\n  \r\n  closeUploadModal(){\r\n      this.uploadModalActive = 'none';\r\n  }\r\n  \r\n  setRedirect(destination: string){\r\n      this.redirect_to = destination;\r\n  }\r\n  \r\n  redirect(){\r\n      this.router.navigate([this.redirect_to]);\r\n  }\r\n  \r\n  addUploadCount(){\r\n      this.num_uploads++;\r\n  }\r\n  \r\n  reduceUploadCount(){\r\n      this.num_uploads--;\r\n  }\r\n  \r\n  showSuccess(message: string){\r\n      this.sharedNode.success = message;\r\n      if(document.getElementById('suc_msg')){\r\n          document.getElementById('suc_msg').style.display = \"block\";\r\n      }\r\n  }\r\n  \r\n  showError(message: string){\r\n      this.sharedNode.error = message;\r\n      if(document.getElementById('err_msg')){\r\n          document.getElementById('err_msg').style.display = \"block\";\r\n      }\r\n  }\r\n  \r\n  toHtmlDate(datestr : string){\r\n      let date;\r\n      if(datestr){\r\n          date = new Date(datestr);\r\n      }\r\n      else{\r\n          date = new Date();\r\n      } \r\n      const dd = date.getDate() < 10 ? '0' + date.getDate() : date.getDate();\r\n      const mm = date.getMonth() < 9 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1;\r\n      const yyyy = date.getFullYear();\r\n      \r\n      return yyyy + '-' + mm + '-' + dd;\r\n  }\r\n  \r\n  toHtmlDateStr(date : Date){\r\n      const dd = date.getDate() < 10 ? '0' + date.getDate() : date.getDate();\r\n      const mm = date.getMonth() < 9 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1;\r\n      const yyyy = date.getFullYear();\r\n      \r\n      return yyyy + '-' + mm + '-' + dd;\r\n  }\r\n  \r\n//Create Unique ID\r\n  newGuid() {\r\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n        const r = Math.random() * 16 | 0, v = c === 'x' ? r : ( r & 0x3 | 0x8 );\r\n        return v.toString(16);\r\n    });\r\n  }\r\n  \r\n  //Count number of forms up to 1 year ago\r\n  countForm(varName, typeId, filler_id, process_num){\r\n      //Start date is a year ago\r\n      let start_date = new Date();\r\n      start_date.setDate(start_date.getDate() - 365);\r\n      \r\n      //End date is a year in the future\r\n      let end_date = new Date();\r\n      end_date.setDate(end_date.getDate() + 365);\r\n      \r\n      this.fms.getFormCount(typeId,this.toHtmlDateStr(start_date),this.toHtmlDateStr(end_date),filler_id,process_num)\r\n          .subscribe(data => {\r\n              this.alerts[varName] = +data.count;\r\n          })\r\n  }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2FkbWluaXN0cmF0aW9uL2Zvcm0tZW1wbG95ZWVzL2Zvcm0tZW1wbG95ZWVzLmNvbXBvbmVudC5jc3MifQ== */\"","module.exports = \"<div class='modal fade' id='deactivateItem' tabindex='-10' role='dialog' data-backdrop='false'>\\r\\n\\t<div class='modal-dialog' role='document'>\\r\\n\\t\\t<div class='modal-content'>\\r\\n\\t\\t\\t<form (ngSubmit)=\\\"onDeactivate()\\\" class='text-center'> \\r\\n\\t\\t\\t\\t<div class='modal-header'>\\r\\n\\t\\t\\t\\t\\t<button type='button' class='close' data-dismiss='modal' aria-label='Close'><span aria-hidden='true'>&times;</span></button>\\r\\n\\t\\t\\t\\t\\t<h4 class='modal-title'>Deactivate Account</h4>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class='modal-body modal_body_warning'>\\r\\n\\t\\t\\t\\t\\t<b>Deactivate {{model.name}}'s account?</b><br>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class='modal-footer text-center'>\\r\\n\\t\\t\\t\\t\\t<button type='button' class='btn' data-dismiss='modal' aria-label='Close'>Cancel</button>\\r\\n\\t\\t\\t\\t\\t<button type='submit' class='btn btn-danger'>Deactivate</button>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</form>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n<div class='modal fade' id='reactivateItem' tabindex='-10' role='dialog' data-backdrop='false'>\\r\\n\\t<div class='modal-dialog' role='document'>\\r\\n\\t\\t<div class='modal-content'>\\r\\n\\t\\t\\t<form (ngSubmit)=\\\"onReactivate()\\\" class='text-center'> \\r\\n\\t\\t\\t\\t<div class='modal-header'>\\r\\n\\t\\t\\t\\t\\t<button type='button' class='close' data-dismiss='modal' aria-label='Close'><span aria-hidden='true'>&times;</span></button>\\r\\n\\t\\t\\t\\t\\t<h4 class='modal-title'>Reactivate Account</h4>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class='modal-body'>\\r\\n\\t\\t\\t\\t\\t<b>Reactivate {{model.name}}'s account?</b><br>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class='modal-footer text-center'>\\r\\n\\t\\t\\t\\t\\t<button type='button' class='btn' data-dismiss='modal' aria-label='Close'>Cancel</button>\\r\\n\\t\\t\\t\\t\\t<button type='submit' class='btn btn-primary'>Reactivate</button>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</form>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"container-fluid\\\">\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t<!-- Only Admin may deactivate non-Admin, active users -->\\r\\n\\t\\t<div *ngIf=\\\"(getRole(roleId) == 'Administrator') && model_id && model.is_active && (getRole(model.role_id) != 'Administrator')\\\"\\r\\n\\t\\t\\tclass=\\\"col-xs-12 text-right\\\">\\r\\n\\t\\t\\t<a class='btn btn-lg btn-danger pull-right' data-toggle='modal' data-target='#deactivateItem'>\\r\\n\\t\\t\\t<b><span class='glyphicon glyphicon-trash'></span> Deactivate</b></a>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div *ngIf=\\\"model_id && !model.is_active\\\" class=\\\"col-xs-12 text-right\\\">\\r\\n\\t\\t\\t<a class='btn btn-lg btn-info pull-right' data-toggle='modal' data-target='#reactivateItem'>\\r\\n\\t\\t\\t<b>Reactivate</b></a>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<div class=\\\"col-sm-2\\\"></div>\\r\\n\\t\\t<div class=\\\"col-sm-8 col-xs-12\\\">\\r\\n        \\t<div class=\\\"row\\\">\\r\\n\\t        \\t<div class=\\\"col-xs-12 col-md-6 col-md-offset-3 text-center\\\">\\r\\n\\t\\t            <h2 *ngIf=\\\"model_id\\\" class=\\\"text-center\\\">User Profile</h2>\\r\\n\\t\\t            <h2 *ngIf=\\\"!model_id\\\" class=\\\"text-center\\\">New User</h2>\\r\\n\\t         \\t</div>\\r\\n\\t        </div>\\r\\n            <form (ngSubmit)=\\\"onSubmit()\\\" #nisshoForm=\\\"ngForm\\\">\\r\\n                <div class=\\\"row form-group\\\" *ngIf=\\\"getRole(roleId) == 'Administrator' || !model_id\\\">\\r\\n\\t                <div class=\\\"col-xs-12 col-md-8 col-md-offset-2 text-left\\\">\\r\\n\\t                    <label for=\\\"name\\\">Name</label>\\r\\n\\t                    <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"John Doe\\\" id=\\\"name\\\" name=\\\"name\\\" required [(ngModel)]=\\\"model.name\\\">\\r\\n\\t                </div>\\r\\n\\t            </div>\\r\\n\\t            <div class=\\\"row form-group\\\" \\r\\n\\t            \\t*ngIf=\\\"(getRole(roleId) == 'Administrator' || !model_id) && getRole(model.role_id) != 'Administrator'\\\">\\r\\n\\t                <div class=\\\"col-xs-12 col-md-8 col-md-offset-2 text-left\\\">\\r\\n\\t                    <label for=\\\"role_id\\\">Role</label>\\r\\n\\t                    <select id=\\\"role_id\\\" class=\\\"form-control\\\" [(ngModel)]=\\\"model.role_id\\\" name=\\\"role_id\\\" required>\\r\\n\\t                    \\t<option selected disabled hidden [value]=\\\"0\\\">-- Select Role --</option>\\r\\n\\t                    \\t<ng-container *ngFor=\\\"let a of rolesList\\\">\\r\\n\\t                        <option *ngIf=\\\"a.title != 'Administrator'\\\" [value]=\\\"a.id\\\">\\r\\n\\t\\t                    \\t{{a.title}}\\r\\n\\t\\t                    </option>\\r\\n\\t                        </ng-container>\\r\\n\\t                    </select>\\r\\n\\t                </div>\\r\\n\\t            </div>\\r\\n\\t            <div class=\\\"row form-group\\\" *ngIf=\\\"getRole(roleId) == 'Administrator' || !model_id\\\">\\r\\n\\t                <div class=\\\"col-xs-12 col-md-8 col-md-offset-2 text-left\\\">\\r\\n\\t                    <label for=\\\"username\\\">Login Username</label>\\r\\n\\t                    <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"johndoe\\\" id=\\\"username\\\" name=\\\"username\\\" required [(ngModel)]=\\\"model.username\\\">\\r\\n\\t                </div>\\r\\n\\t            </div>\\r\\n\\t            <div class=\\\"row form-group\\\">\\r\\n\\t                <div *ngIf=\\\"model_id\\\" class=\\\"col-xs-12 col-md-8 col-md-offset-2 text-left\\\">\\r\\n\\t                    <label for=\\\"password\\\">New Password</label>\\r\\n\\t                    <input type=\\\"password\\\" class=\\\"form-control\\\" placeholder=\\\"Password\\\" id=\\\"password\\\" name=\\\"password\\\" [(ngModel)]=\\\"model.password\\\">\\r\\n\\t                </div>\\r\\n\\t                <div *ngIf=\\\"!model_id\\\" class=\\\"col-xs-12 col-md-8 col-md-offset-2 text-left\\\">\\r\\n\\t                    <label for=\\\"password\\\">Password</label>\\r\\n\\t                    <input type=\\\"password\\\" class=\\\"form-control\\\" placeholder=\\\"Password\\\" id=\\\"password\\\" name=\\\"password\\\" required [(ngModel)]=\\\"model.password\\\">\\r\\n\\t                </div>\\r\\n\\t            </div>\\r\\n\\t            <div class=\\\"row form-group\\\">\\r\\n\\t                <div class=\\\"col-xs-12 col-md-8 col-md-offset-2 text-left\\\">\\r\\n\\t                    <label for=\\\"email\\\">Email</label>\\r\\n\\t                    <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"email@email.com\\\" id=\\\"email\\\" name=\\\"email\\\" required [(ngModel)]=\\\"model.email\\\">\\r\\n\\t                </div>\\r\\n\\t            </div>\\r\\n\\t            <div class=\\\"row form-group\\\">\\r\\n\\t                <div class=\\\"col-xs-12 col-md-8 col-md-offset-2 text-left\\\">\\r\\n\\t                    <label for=\\\"phone\\\">Phone Number</label>\\r\\n\\t                    <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"(123)456-7890\\\" id=\\\"phone\\\" name=\\\"phone\\\" [(ngModel)]=\\\"model.phone\\\">\\r\\n\\t                </div>\\r\\n\\t            </div>\\r\\n\\t            <div class=\\\"row form-group\\\">\\r\\n\\t                <div class=\\\"col-xs-6 col-md-3 col-md-offset-2 text-left\\\">\\r\\n\\t                    <label for=\\\"language_preference\\\">Language Preference</label>\\r\\n\\t                    <select id=\\\"language_preference\\\" class=\\\"form-control\\\" [(ngModel)]=\\\"model.language_preference\\\" name=\\\"language_preference\\\" required>\\r\\n\\t                        <ng-container *ngFor=\\\"let a of langList\\\">\\r\\n\\t                        <option [value]=\\\"a.abbr\\\">\\r\\n\\t\\t                    \\t{{a.title}}\\r\\n\\t\\t                    </option>\\r\\n\\t                        </ng-container>\\r\\n\\t                    </select>\\r\\n\\t                </div>\\r\\n\\t            </div>\\r\\n\\t            <div class=\\\"row\\\">\\r\\n\\t                <div class=\\\"col-xs-12 col-md-4 col-md-offset-4 text-center\\\"> \\r\\n\\t                    <button type=\\\"submit\\\" class=\\\"btn btn-success\\\" [disabled]=\\\"!nisshoForm.form.valid\\\"><b>Submit</b></button>\\r\\n\\t                </div>\\r\\n\\t            </div>\\r\\n            </form>\\r\\n        </div>\\r\\n        <div class=\\\"col-sm-2\\\"></div>\\r\\n    </div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from \"@angular/router\";\r\nimport { AuthenticationService, Role, User } from \"process-smart-ng6-lib\";\r\nimport { SharedService } from \"src/app/_services/shared.service\";\r\nimport { ActivatedRoute } from \"@angular/router\";\r\n\r\n@Component({\r\n  selector: 'app-form-employees',\r\n  templateUrl: './form-employees.component.html',\r\n  styleUrls: ['./form-employees.component.css']\r\n})\r\nexport class FormEmployeesComponent implements OnInit {\r\n    model: User;\r\n    model_id: string;\r\n    roleId: string;\r\n    rolesList: Array<Role>;\r\n    user_password: string;\r\n    langList: Array<any>;\r\n    \r\n    constructor(private adms: AuthenticationService, private ssv: SharedService, \r\n            private router: Router, private route: ActivatedRoute) { }\r\n    \r\n    ngOnInit() {\r\n        //Language list\r\n        this.langList = [];\r\n        this.langList.push({abbr:'en', title:'English'});\r\n        this.langList.push({abbr:'es', title:'Spanish'});\r\n        \r\n        //Authentication\r\n        this.roleId = JSON.parse(localStorage.getItem('currentUser')).user.role_id;\r\n        const uid = JSON.parse(localStorage.getItem('currentUser')).user.uid;\r\n\r\n        this.route.params.subscribe(params => {\r\n            this.model_id = params['id'];\r\n            if(this.model_id){\r\n                //Existing profile - User must be Admin or their own profile\r\n                if(this.roleId != this.ssv.admin_role_id && this.model_id != uid){\r\n                    this.adms.logout();\r\n                    this.router.navigate(['/login']);\r\n                }\r\n                \r\n                this.loadModel();\r\n            }\r\n            else{\r\n                //New profile - User must be Admin\r\n                if(this.roleId != this.ssv.admin_role_id){\r\n                    this.adms.logout();\r\n                    this.router.navigate(['/login']);\r\n                }\r\n                \r\n                this.model = <User>{\r\n                    'id': '0',\r\n                    'role_id': '0',\r\n                    'language_preference': 'en'\r\n                };\r\n            }\r\n        });\r\n        \r\n        this.populateRoles();\r\n    }\r\n    \r\n    populateRoles() {\r\n        this.adms.getRoles()\r\n          .subscribe(itemsList => {\r\n              this.rolesList = itemsList;\r\n          });\r\n        }\r\n    \r\n    loadModel() {\r\n        this.adms.getUser(this.model_id)\r\n            .subscribe(model => {\r\n                model.password = \"\";\r\n                this.model = model;\r\n        });\r\n    }\r\n    \r\n    onSubmit() {\r\n        //Submit the form to the server\r\n        console.log(JSON.stringify(this.model));\r\n          if(this.model_id){\r\n              this.adms.updateUser(this.model, this.model_id)\r\n              .subscribe(\r\n                  data => {\r\n                      // Page redirect when getting response\r\n                      this.ssv.showSuccess('Profile successfully updated!');\r\n                      this.router.navigate(['/form-employee/'+this.model_id]);\r\n                  },\r\n                  error => {\r\n                      // Display error message\r\n                      console.log(error);\r\n                      this.ssv.showError('Error: Username is taken');\r\n                  }\r\n              );\r\n          }\r\n          else{\r\n              this.adms.newUser(this.model)\r\n                .subscribe(\r\n                    data => {\r\n                        // Page redirect when getting response\r\n                        this.ssv.showSuccess('User successfully created!');\r\n                        this.router.navigate(['/view-employees']);\r\n                    },\r\n                    error => {\r\n                        // Display error message\r\n                        console.log(error);\r\n                        this.ssv.showError('Error: Username has been taken!');\r\n                    }\r\n                );\r\n          }\r\n      }\r\n    \r\n    onDeactivate() {\r\n          this.adms.deactivateUser(this.model_id)\r\n          .subscribe(\r\n              data => {\r\n                  // Page redirect when getting response\r\n                  this.ssv.showSuccess('Account successfully deactivated!');\r\n                  this.router.navigate(['/view-employees']);\r\n              },\r\n              error => {\r\n                  // Display error message\r\n                  console.log(error);\r\n                  this.ssv.showError('Error: Unable to deactivate account!');\r\n              }\r\n          );\r\n      }\r\n    \r\n    onReactivate() {\r\n        this.adms.reactivateUser(this.model_id)\r\n        .subscribe(\r\n            data => {\r\n                // Page redirect when getting response\r\n                this.ssv.showSuccess('Account successfully reactivated!');\r\n                this.router.navigate(['/view-employees']);\r\n            },\r\n            error => {\r\n                // Display error message\r\n                console.log(error);\r\n                this.ssv.showError('Error: Unable to reactivate account!');\r\n            }\r\n        );\r\n    }\r\n\r\n    getRole(roleId: string) {\r\n        if (this.rolesList) {\r\n            const role = this.rolesList.find(x => x.id == roleId);\r\n            if(role){\r\n                return role.title;\r\n            }\r\n        }\r\n        else return \"-\";\r\n      }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2FkbWluaXN0cmF0aW9uL2Zvcm0tcm9sZXMvZm9ybS1yb2xlcy5jb21wb25lbnQuY3NzIn0= */\"","module.exports = \"<p>\\r\\n  form-roles works!\\r\\n</p>\\r\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from \"@angular/router\";\r\nimport { AuthenticationService } from \"process-smart-ng6-lib\";\r\nimport { SharedService } from \"src/app/_services/shared.service\";\r\n\r\n@Component({\r\n  selector: 'app-form-roles',\r\n  templateUrl: './form-roles.component.html',\r\n  styleUrls: ['./form-roles.component.css']\r\n})\r\nexport class FormRolesComponent implements OnInit {\r\n\r\n    constructor(private adms: AuthenticationService, private ssv: SharedService, \r\n            private router: Router) { }\r\n    \r\n    ngOnInit() {\r\n        //Authentication\r\n        if(JSON.parse(localStorage.getItem('currentUser')).user.role_id != '1'){\r\n            this.router.navigate(['/login']);\r\n        }\r\n    }\r\n\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2FkbWluaXN0cmF0aW9uL3ZpZXctZW1wbG95ZWVzL3ZpZXctZW1wbG95ZWVzLmNvbXBvbmVudC5jc3MifQ== */\"","module.exports = \"<div class=\\\"row margin_top_15 text-center\\\">\\r\\n   \\t<h3 class=\\\"text-capitalize\\\">User List</h3>\\r\\n   \\t<div class=\\\"col-sm-6 text-right\\\">\\r\\n\\t\\t<button type=\\\"button\\\" class=\\\"btn btn-success btn-sm\\\" routerLink=\\\"/form-employee\\\">\\r\\n\\t\\t\\t<span class=\\\"glyphicon glyphicon-plus\\\"></span> New User\\r\\n\\t\\t</button>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"col-sm-6 text-left\\\">\\r\\n\\t\\t<button type=\\\"button\\\" class=\\\"btn btn-info btn-sm\\\" (click)=\\\"onDownloadXls()\\\">\\r\\n\\t\\t\\t<span class=\\\"glyphicon glyphicon-download-alt\\\"></span> Download\\r\\n\\t\\t</button>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"col-sm-10 col-sm-offset-1 col-xs-12 margin_top_15 table-responsive\\\">\\r\\n        <div class=\\\"row margin_bottom_15 form-inline text-left\\\">\\r\\n\\t\\t\\t<div class=\\\"col-sm-4 text-left input-group\\\">\\r\\n               <div class=\\\"input-group-addon\\\"><span class=\\\"glyphicon glyphicon-search\\\"></span></div>\\r\\n               <input type=\\\"text\\\" id=\\\"filterForm\\\" class=\\\"form-control\\\" placeholder=\\\"Search Name...\\\" [(ngModel)]=\\\"search_name\\\" (input)=\\\"searchItem()\\\">\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"col-sm-4 col-sm-offset-4 text-left input-group\\\">\\r\\n               <div class=\\\"input-group-addon\\\">Role:</div>\\r\\n               <select class=\\\"form-control\\\" [(ngModel)]=\\\"role_id\\\" (change)=\\\"searchItem()\\\">\\r\\n               \\t\\t<option selected [value]=\\\"0\\\">All</option>\\r\\n               \\t\\t<ng-container *ngFor=\\\"let a of rolesList\\\">\\r\\n               \\t\\t<option *ngIf=\\\"a.title != 'Administrator'\\\" [value]=\\\"a.id\\\">\\r\\n                    \\t{{a.title}}\\r\\n                    </option>\\r\\n               \\t\\t</ng-container>\\r\\n               </select>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<i *ngIf=\\\"!partialItemsList\\\">\\r\\n\\t\\t\\tNothing here!\\r\\n        </i>\\r\\n        <table *ngIf=\\\"partialItemsList\\\" class=\\\"table table_view table-hover\\\">\\r\\n   \\t\\t\\t<thead>\\r\\n       \\t\\t\\t<tr class=\\\"table_heading\\\">\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-3\\\">Name</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-3\\\">Role</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Login Username</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-4\\\">Contact</th>\\r\\n       \\t\\t\\t</tr>\\r\\n  \\t\\t\\t</thead>\\r\\n\\t\\t\\t<tbody>\\r\\n                <tr *ngFor=\\\"let item of partialItemsList\\\" class=\\\"table_body\\\">\\r\\n                    <td class=\\\"col-sm-3\\\">\\r\\n                    \\t<a routerLink=\\\"/form-employee/{{item.uid}}\\\" routerLinkActive=\\\"active\\\">\\r\\n                    \\t\\t<b>{{item.name}}</b>\\r\\n                    \\t</a>\\r\\n                   \\t</td>\\r\\n                    <td class=\\\"col-sm-3\\\">{{getRole(item.role_id)}}</td>\\r\\n                    <td class=\\\"col-sm-2\\\">{{item.username}}</td>\\r\\n                    <td class=\\\"col-sm-4\\\">\\r\\n                        <span class=\\\"glyphicon glyphicon-envelope\\\"></span> {{item.email? item.email : '-'}}<br>\\r\\n                        <span class=\\\"glyphicon glyphicon-phone\\\"></span> {{item.phone? item.phone : '-'}}\\r\\n                    </td>\\r\\n                </tr>\\r\\n\\t         </tbody>\\r\\n        </table>\\r\\n   \\t</div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { User, Role, AuthenticationService, DocumentConversionService } from \"process-smart-ng6-lib\";\r\nimport { SharedService } from \"src/app/_services/shared.service\";\r\nimport { Router } from \"@angular/router\";\r\nimport { ActivatedRoute } from \"@angular/router\";\r\nimport { saveAs } from 'file-saver';\r\n\r\n@Component({\r\n  selector: 'app-view-employees',\r\n  templateUrl: './view-employees.component.html',\r\n  styleUrls: ['./view-employees.component.css']\r\n})\r\nexport class ViewEmployeesComponent implements OnInit {\r\n    itemsList: Array<User>;\r\n    partialItemsList: Array<User>;\r\n    rolesList: Array<Role>;\r\n    search_name = \"\";\r\n    role_id = '0';\r\n    is_active = '1';\r\n\r\n    constructor(private adms: AuthenticationService, private ssv: SharedService, \r\n            private router: Router, private route: ActivatedRoute,\r\n            private dcs: DocumentConversionService) { }\r\n    \r\n    ngOnInit() {\r\n        //Authentication\r\n        if(JSON.parse(localStorage.getItem('currentUser')).user.role_id != this.ssv.admin_role_id){\r\n            this.router.navigate(['/login']);\r\n        }\r\n        \r\n        this.route.params.subscribe(params => {\r\n            const status = params['status'];\r\n            if(status == 'inactive'){\r\n                this.is_active = '0';\r\n            }\r\n        });\r\n        \r\n        this.populateItems();\r\n        this.populateRoles();\r\n    }\r\n    \r\n    populateItems() {\r\n    this.adms.getUsers()\r\n      .subscribe(itemsList => {\r\n          itemsList = itemsList.filter(x => x.is_active == this.is_active \r\n                  && x.role_id != this.ssv.admin_role_id);\r\n          this.itemsList = itemsList;\r\n          this.partialItemsList = itemsList;\r\n      });\r\n    }\r\n    \r\n    populateRoles() {\r\n        this.adms.getRoles()\r\n          .subscribe(rolesList => {\r\n              this.rolesList = rolesList;\r\n          });\r\n        }\r\n    \r\n    searchItem() {\r\n      if (this.partialItemsList && this.itemsList) {\r\n        this.partialItemsList = this.itemsList.filter(x => \r\n            (x.name.toLowerCase().includes(this.search_name.toLowerCase())));\r\n        if(this.role_id !== '0' && this.rolesList){\r\n            this.partialItemsList = this.partialItemsList.filter(x => x.role_id == this.role_id);\r\n        }\r\n      }\r\n    }\r\n    \r\n    onDownloadXls() {\r\n        this.dcs.DownloadUsersList()\r\n            .subscribe(\r\n                res => {\r\n                    saveAs(res, 'UserList.xls', \r\n                        { type: 'application/vnd.ms-excel' })\r\n                },\r\n                error => {\r\n                    // Display error message\r\n                    console.log(error);\r\n                    this.ssv.showError('Error: Unable to download user list!');\r\n                }\r\n            );\r\n      }\r\n    \r\n    getRole(input: string) {\r\n        if (this.rolesList) {\r\n          return this.rolesList.find(x => x.id == input).title;\r\n        }\r\n        else return \"-\";\r\n      }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2FkbWluaXN0cmF0aW9uL3ZpZXctcm9sZXMvdmlldy1yb2xlcy5jb21wb25lbnQuY3NzIn0= */\"","module.exports = \"<div class=\\\"row margin_top_15 text-center\\\">\\r\\n   \\t<h3 class=\\\"text-capitalize\\\">Roles List</h3>\\r\\n   \\t<div class=\\\"col-sm-12 text-center\\\">\\r\\n\\t\\t<button type=\\\"button\\\" class=\\\"btn btn-success btn-sm button\\\" routerLink=\\\"/form-roles\\\">\\r\\n\\t\\t\\t<span class=\\\"glyphicon glyphicon-plus\\\"></span> New Role\\r\\n\\t\\t</button>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"col-sm-8 col-sm-offset-2 col-lg-6 col-lg-offset-3 col-xs-12 margin_top_15 table-responsive\\\">\\r\\n        <div class=\\\"row margin_bottom_15\\\">\\r\\n\\t\\t\\t<div class=\\\"col-sm-4 text-left input-group\\\">\\r\\n\\t               <div class=\\\"input-group-addon\\\"><span class=\\\"glyphicon glyphicon-search\\\"></span></div>\\r\\n\\t               <input type=\\\"text\\\" id=\\\"filterForm\\\" class=\\\"form-control\\\" placeholder=\\\"Search Role...\\\" (input)=\\\"searchItem($event.target.value)\\\">\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<i *ngIf=\\\"!partialItemsList\\\">\\r\\n\\t\\t\\tNothing here!\\r\\n        </i>\\r\\n        <table *ngIf=\\\"partialItemsList\\\" class=\\\"table table_view table-hover\\\">\\r\\n   \\t\\t\\t<thead>\\r\\n       \\t\\t\\t<tr class=\\\"table_heading\\\">\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-4 col-lg-3\\\">No.</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-8 col-lg-9 text-left\\\">Title</th>\\r\\n       \\t\\t\\t</tr>\\r\\n  \\t\\t\\t</thead>\\r\\n\\t\\t\\t<tbody>\\r\\n                <tr *ngFor=\\\"let item of partialItemsList; let i = index\\\" class=\\\"table_body\\\">\\r\\n                \\t<td class=\\\"col-sm-2\\\">{{i+1}}</td>\\r\\n                    <td class=\\\"col-sm-10 text-left\\\">{{item.title}}</td>\\r\\n                </tr>\\r\\n\\t         </tbody>\\r\\n        </table>\\r\\n   \\t</div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from \"@angular/router\";\r\nimport { AuthenticationService, Role } from \"process-smart-ng6-lib\";\r\nimport { SharedService } from \"src/app/_services/shared.service\";\r\n\r\n@Component({\r\n  selector: 'app-view-roles',\r\n  templateUrl: './view-roles.component.html',\r\n  styleUrls: ['./view-roles.component.css']\r\n})\r\nexport class ViewRolesComponent implements OnInit {\r\n    itemsList: Array<Role>;\r\n    partialItemsList: Array<Role>;\r\n\r\n    constructor(private adms: AuthenticationService, private ssv: SharedService, \r\n            private router: Router) { }\r\n    \r\n    ngOnInit() {\r\n        //Authentication\r\n        if(JSON.parse(localStorage.getItem('currentUser')).user.role_id != '1'){\r\n            this.router.navigate(['/login']);\r\n        }\r\n        this.populateRoles();\r\n    }\r\n\r\n    populateRoles() {\r\n        this.adms.getRoles()\r\n          .subscribe(itemsList => {\r\n              this.itemsList = itemsList;\r\n              this.partialItemsList = itemsList;\r\n          });\r\n        }\r\n    \r\n    searchItem(input: string) {\r\n        if (this.partialItemsList && this.itemsList) {\r\n          this.partialItemsList = this.itemsList.filter(x => \r\n              (x.title.toLowerCase().includes(input.toLowerCase())));\r\n        }\r\n      }\r\n}\r\n","import * as AWS from 'aws-sdk';\r\nimport * as S3 from 'aws-sdk/clients/s3';\r\nimport { saveAs } from 'file-saver';\r\nimport { SharedService } from \"src/app/_services/shared.service\";\r\nimport { Router } from \"@angular/router\";\r\n\r\n/**\r\n  * This class handles Upload and     static uploadInstructorAttachment(arg0: any, arg1: any): any {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\nDownload operations from Amazon S3\r\n  */\r\nexport class S3Manager {\r\n    private static s3_BasePath = 'https://process-smart-attachments.s3.amazonaws.com';\r\n    private static s3_AssetPath = 'assets/';\r\n    private static s3_InstructorPath = 'instructors/';\r\n    private static s3_ServiceLogPath = 'service-log/';\r\n    private static s3_FormsPath = 'forms/';\r\n    \r\n    //Credentials\r\n    private static accessKeyId = 'AKIAJPF26MNTRGMYQECQ';\r\n    private static secretAccessKey = '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';\r\n    private static region = 'us-west-1';\r\n    private static bucket = 'process-smart-attachments';\r\n    \r\n    //Upload progress\r\n    public static num_uploads_total;\r\n    public static num_uploads_done;\r\n    public static upload_error = false;\r\n    \r\n    static getAssetAttachmentKey(filename: string) {\r\n        return this.s3_AssetPath + filename;\r\n    }\r\n    \r\n    static getInstructorAttachmentKey(filename: string) {\r\n        return this.s3_InstructorPath + filename;\r\n    }\r\n    \r\n    static getServiceLogAttachmentKey(filename: string, clientId: string) {\r\n        return this.s3_ServiceLogPath + clientId + '/' + filename;\r\n    }\r\n    \r\n    static getFormAttachmentKey(filename: string, clientId: string) {\r\n        return this.s3_FormsPath + clientId + '/' + filename;\r\n    }\r\n    \r\n    static getFormAttachmentUrl(filename: string, clientId: string) {\r\n        return 'https://s3-'+this.region+'.amazonaws.com/'+this.bucket+'/' + \r\n                    this.getFormAttachmentKey(filename, clientId);\r\n    }\r\n    \r\n    static downloadAssetAttachment(filename: string){\r\n        const accessKeyId = this.accessKeyId;\r\n        const secretAccessKey = this.secretAccessKey;\r\n        const region = this.region;\r\n        \r\n        const mimeType = this.getMimeType(filename);\r\n        const s3 = new S3(\r\n                {\r\n                    accessKeyId: accessKeyId,\r\n                    secretAccessKey: secretAccessKey,\r\n                    region: region\r\n                }\r\n            );\r\n        const params = {\r\n                Bucket: this.bucket,\r\n                Key: S3Manager.getAssetAttachmentKey(filename),\r\n            };\r\n        s3.getObject(params, function(err, data){\r\n            if (err) console.log(err); \r\n            else{\r\n                const blob = new Blob([data.Body as BlobPart], { type: mimeType });\r\n                saveAs(blob, filename);\r\n            }\r\n        });\r\n    }\r\n    \r\n    static downloadFormAttachment(filename: string, clientId: string){\r\n        const accessKeyId = this.accessKeyId;\r\n        const secretAccessKey = this.secretAccessKey;\r\n        const region = this.region;\r\n        \r\n        const mimeType = this.getMimeType(filename);\r\n        const s3 = new S3(\r\n                {\r\n                    accessKeyId: accessKeyId,\r\n                    secretAccessKey: secretAccessKey,\r\n                    region: region\r\n                }\r\n            );\r\n        const params = {\r\n                Bucket: this.bucket,\r\n                Key: S3Manager.getFormAttachmentKey(filename,clientId),\r\n            };\r\n        s3.getObject(params, function(err, data){\r\n            if (err) console.log(err); \r\n            else{\r\n                const blob = new Blob([data.Body as BlobPart], { type: mimeType });\r\n                saveAs(blob, filename);\r\n            }\r\n        });\r\n    }\r\n    \r\n    static downloadInstructorAttachment(filename: string){\r\n        const accessKeyId = this.accessKeyId;\r\n        const secretAccessKey = this.secretAccessKey;\r\n        const region = this.region;\r\n        \r\n        const mimeType = this.getMimeType(filename);\r\n        const s3 = new S3(\r\n                {\r\n                    accessKeyId: accessKeyId,\r\n                    secretAccessKey: secretAccessKey,\r\n                    region: region\r\n                }\r\n            );\r\n        const params = {\r\n                Bucket: this.bucket,\r\n                Key: S3Manager.getInstructorAttachmentKey(filename),\r\n            };\r\n        s3.getObject(params, function(err, data){\r\n            if (err) console.log(err); \r\n            else{\r\n                const blob = new Blob([data.Body as BlobPart], { type: mimeType });\r\n                saveAs(blob, filename);\r\n            }\r\n        });\r\n    }\r\n    \r\n    static uploadInstructorAttachment(file, filename){\r\n        const contentType = file.type;\r\n        const accessKeyId = this.accessKeyId;\r\n        const secretAccessKey = this.secretAccessKey;\r\n        const region = this.region;\r\n        \r\n        const s3 = new S3(\r\n                {\r\n                    accessKeyId: accessKeyId,\r\n                    secretAccessKey: secretAccessKey,\r\n                    region: region\r\n                }\r\n            );\r\n        const params = {\r\n                Bucket: this.bucket,\r\n                Key: S3Manager.getInstructorAttachmentKey(filename),\r\n                Body: file,\r\n                ACL: 'public-read',\r\n                ContentType: contentType\r\n            };\r\n        s3.upload(params, function(err, data){\r\n            if (err){\r\n                console.log(err);\r\n                return false;\r\n            }\r\n        });\r\n    }\r\n    \r\n    private static uploadAttachment(file, key, redirect_to?: string, ssv?: SharedService, router?: Router){\r\n        const contentType = file.type;\r\n        const accessKeyId = this.accessKeyId;\r\n        const secretAccessKey = this.secretAccessKey;\r\n        const region = this.region;\r\n        \r\n        this.upload_error = false;\r\n        \r\n        const s3 = new S3(\r\n                {\r\n                    accessKeyId: accessKeyId,\r\n                    secretAccessKey: secretAccessKey,\r\n                    region: region\r\n                }\r\n            );\r\n        const params = {\r\n                Bucket: this.bucket,\r\n                Key: key,\r\n                Body: file,\r\n                ACL: 'public-read',\r\n                ContentType: contentType\r\n            };\r\n        \r\n        s3.upload(params, function(err, data){\r\n            if (err){\r\n                //Retry\r\n                console.log('Upload Error, Retrying...');\r\n                s3.upload(params, function(err1, data1){\r\n                    if(err1){\r\n                        this.upload_error = true;\r\n                        return false;\r\n                    }\r\n                    else if(redirect_to){\r\n                        S3Manager.num_uploads_done++;\r\n                        if(S3Manager.num_uploads_done >= S3Manager.num_uploads_total || S3Manager.num_uploads_total == 1){\r\n                          //Reset upload modal\r\n                            if(ssv){\r\n                                ssv.closeUploadModal();\r\n                            \r\n                                //Redirect the page\r\n                                ssv.showSuccess('Form successfully updated!');\r\n                            }\r\n                            if(router)\r\n                                router.navigate([redirect_to]);\r\n                        }\r\n                        return;\r\n                    }\r\n                });\r\n            }\r\n            else if(redirect_to){\r\n                S3Manager.num_uploads_done++;\r\n                console.log('File Upload Progress: '+S3Manager.num_uploads_done+' of '+S3Manager.num_uploads_total);\r\n                if(S3Manager.num_uploads_done == S3Manager.num_uploads_total){\r\n                    if(ssv){\r\n                        //Reset upload modal\r\n                        ssv.closeUploadModal();\r\n    \r\n                        //Redirect the page\r\n                        ssv.showSuccess('Form successfully updated!');\r\n                    }\r\n                    if(router)\r\n                        router.navigate([redirect_to]);\r\n                }\r\n                return;\r\n            }else{\r\n                console.log('Redirect to: is null');\r\n            }\r\n        });\r\n    }\r\n    \r\n    static uploadAssetAttachment(file, filename){\r\n        this.uploadAttachment(file, this.getAssetAttachmentKey(filename));\r\n    }\r\n    \r\n    static uploadAllFormAttachments(files, filenames: string[], clientId, redirect_to?: string, uploads_total?: number,\r\n            ssv?: SharedService, router?: Router){\r\n        if(!files || !filenames || filenames.length <= 0){\r\n            return;\r\n        }\r\n        console.log('Uploading all attachments: '+uploads_total);\r\n        \r\n        S3Manager.num_uploads_done = 0;\r\n        if(uploads_total){\r\n            S3Manager.num_uploads_total = uploads_total;\r\n        }else{\r\n            S3Manager.num_uploads_total = 1;\r\n        }\r\n        \r\n        for(let i = 0; i < filenames.length; i++){\r\n            console.log('File Upload? '+(files[i] != null));\r\n            if(files[i]){\r\n                this.uploadAttachment(files[i], this.getFormAttachmentKey(filenames[i], clientId), redirect_to, ssv, router);\r\n            }\r\n        }\r\n    }\r\n    \r\n    static uploadFormAttachment(file, filename: string, clientId: string, redirect_to?: string){\r\n        this.uploadAttachment(file, this.getFormAttachmentKey(filename, clientId), redirect_to);\r\n    }\r\n    \r\n    static downloadServiceLogAttachment(filename: string, clientId: string){\r\n        const accessKeyId = this.accessKeyId;\r\n        const secretAccessKey = this.secretAccessKey;\r\n        const region = this.region;\r\n        \r\n        const mimeType = this.getMimeType(filename);\r\n        const s3 = new S3(\r\n                {\r\n                    accessKeyId: accessKeyId,\r\n                    secretAccessKey: secretAccessKey,\r\n                    region: region\r\n                }\r\n            );\r\n        \r\n        const params = {\r\n                Bucket: this.bucket,\r\n                Key: S3Manager.getServiceLogAttachmentKey(filename, clientId),\r\n            };\r\n        s3.getObject(params, function(err, data){\r\n            if (err) console.log(err, err); \r\n            else{\r\n                const blob = new Blob([data.Body as BlobPart], { type: mimeType });\r\n                saveAs(blob, filename);\r\n            }\r\n        });\r\n    }\r\n    \r\n    static getMimeType(filename: string): string {\r\n        if(filename == null || filename == ''){\r\n            return null;\r\n        }\r\n        //Get extension's lowercase\r\n        const filetype = filename.substr(filename.lastIndexOf('.')+1).toLowerCase();\r\n        \r\n        switch(filetype) {\r\n            case 'jpg': return 'image/jpeg';\r\n            case 'png': return 'image/png';\r\n            case 'pdf': return 'application/pdf';\r\n            case 'doc': return 'application/msword';\r\n            case 'docx': return 'application/vnd.openxmlformats-officedocument.wordprocessingml.document';\r\n            case 'xls': return 'application/vnd.ms-excel';\r\n            case 'xlsx': return 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet';\r\n            case 'txt': return 'text/plain';\r\n            default: return null;\r\n        }\r\n    }\r\n}","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2FwcC5jb21wb25lbnQuY3NzIn0= */\"","module.exports = \"<!--The content below is only a placeholder and can be replaced.-->\\r\\n<router-outlet></router-outlet>\\r\\n\"","import { Component } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\n\r\nimport { AuthenticationService } from 'process-smart-ng6-lib';\r\nimport { User } from 'process-smart-ng6-lib';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.css']\r\n})\r\nexport class AppComponent {\r\n  title = 'Dashboard | Process Smart';\r\n  currentUser: User;\r\n\r\n    constructor(\r\n        private router: Router,\r\n        private authenticationService: AuthenticationService\r\n    ) {\r\n        this.authenticationService.currentUser.subscribe(x => this.currentUser = x);\r\n    }\r\n\r\n    logout() {\r\n        this.authenticationService.logout();\r\n        this.router.navigate(['/login']);\r\n    }\r\n}\r\n","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\nimport { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { routing } from './app.routing';\r\nimport { ApiModule } from 'process-smart-ng6-lib';\r\n\r\nimport {\r\n  RECAPTCHA_SETTINGS,\r\n  RecaptchaSettings,\r\n  RecaptchaLoaderService,\r\n  RecaptchaModule,\r\n} from 'ng-recaptcha';\r\n\r\nimport { AppComponent } from './app.component';\r\nimport { DashboardComponent } from './dashboard/dashboard.component';\r\nimport { LoginComponent } from './login/login.component';\r\nimport { DashboardSidebarComponent } from './dashboard-sidebar/dashboard-sidebar.component';\r\nimport { DashboardTopbarComponent } from './dashboard-topbar/dashboard-topbar.component';\r\nimport { DashboardContentComponent } from './dashboard-content/dashboard-content.component';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { AppUpdatesComponent } from './general/app-updates/app-updates.component';\r\nimport { BugReportComponent } from './general/bug-report/bug-report.component';\r\nimport { UserIdleModule } from 'angular-user-idle';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { MatDialogModule, MAT_DIALOG_DEFAULT_OPTIONS } from '@angular/material/dialog';\r\nimport { HashLocationStrategy, LocationStrategy } from '@angular/common';\r\nimport { ViewWorkOrderComponent } from './forms/view-work-order/view-work-order.component';\r\nimport { ViewStockTransferComponent } from './forms/view-stock-transfer/view-stock-transfer.component';\r\nimport { ViewIrrigationRepairComponent } from './forms/view-irrigation-repair/view-irrigation-repair.component';\r\nimport { ViewPurchaseOrderComponent } from './forms/view-purchase-order/view-purchase-order.component';\r\nimport { ViewWalkthroughComponent } from './forms/view-walkthrough/view-walkthrough.component';\r\nimport { ViewCostSummaryComponent } from './forms/view-cost-summary/view-cost-summary.component';\r\nimport { ViewMWorkOrderComponent } from './forms/view-m-work-order/view-m-work-order.component';\r\nimport { ViewCWorkOrderComponent } from './forms/view-c-work-order/view-c-work-order.component';\r\nimport { ViewMaterialsComponent } from './inventory/view-materials/view-materials.component';\r\nimport { ViewContainersComponent } from './inventory/view-containers/view-containers.component';\r\nimport { ViewCustomersComponent } from './customers/view-customers/view-customers.component';\r\nimport { WorkOrderComponent } from './forms/fill/work-order/work-order.component';\r\nimport { WalkthroughComponent } from './forms/fill/walkthrough/walkthrough.component';\r\nimport { IrrigationRepairComponent } from './forms/fill/irrigation-repair/irrigation-repair.component';\r\nimport { ViewEmployeesComponent } from './administration/view-employees/view-employees.component';\r\nimport { ViewRolesComponent } from './administration/view-roles/view-roles.component';\r\nimport { FormEmployeesComponent } from './administration/form-employees/form-employees.component';\r\nimport { FormRolesComponent } from './administration/form-roles/form-roles.component';\r\nimport { StockTransferComponent } from './forms/fill/stock-transfer/stock-transfer.component';\r\nimport { IrrigationRepairPartsComponent } from './forms/fill/irrigation-repair-parts/irrigation-repair-parts.component';\r\nimport { CookieService } from \"ngx-cookie-service\";\r\nimport { FormMaterialsComponent } from './inventory/form-materials/form-materials.component';\r\nimport { FormContainersComponent } from './inventory/form-containers/form-containers.component';\r\nimport { ViewTruckInventoryComponent } from './inventory/view-truck-inventory/view-truck-inventory.component';\r\nimport { FormTruckInventoryComponent } from './inventory/form-truck-inventory/form-truck-inventory.component';\r\nimport { ViewStockTransferStatisticsComponent } from './view-stock-transfer-statistics/view-stock-transfer-statistics.component';\r\nimport { StartJobComponent } from './forms/fill/start-job/start-job.component';\r\nimport { MWorkOrderComponent } from './forms/fill/m-work-order/m-work-order.component';\r\nimport { UpdateConstantsComponent } from './general/update-constants/update-constants.component';\r\nimport { FormCustomersComponent } from './customers/form-customers/form-customers.component';\r\nimport { ViewDataUsageComponent } from './general/view-data-usage/view-data-usage.component';\r\nimport { PurchaseOrderComponent } from './forms/fill/purchase-order/purchase-order.component';\r\nimport { ViewStockByTruckComponent } from './view-stock-by-truck/view-stock-by-truck.component';\r\nimport { UpdateCustomersListComponent } from './populate/update-customers-list/update-customers-list.component';\r\nimport { AuthTknInterceptor } from \"src/app/_services/AuthTknInterceptor\";\r\nimport { NewApiService } from './_services/newApi';\r\n\r\nconst appRoutes: Routes = [\r\n  {\r\n    path: 'login',\r\n    component: LoginComponent,\r\n    data: { title: 'Login | WHP' }\r\n  },\r\n  {\r\n    path: 'dashboard',\r\n    component: DashboardComponent,\r\n    data: { title: 'Dashboard | WHP' }\r\n  },\r\n  {\r\n    path: '',\r\n    redirectTo: '/dashboard',\r\n    pathMatch: 'full'\r\n  },\r\n  { path: '**', component: DashboardComponent }\r\n];\r\n\r\nconst globalSettings: RecaptchaSettings = { siteKey: '6Leu6ZoUAAAAALOkQhWaXPKJDdacexAejMCT7PnI' };\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    DashboardComponent,\r\n    LoginComponent,\r\n    DashboardSidebarComponent,\r\n    DashboardTopbarComponent,\r\n    DashboardContentComponent,\r\n    AppUpdatesComponent,\r\n    BugReportComponent,\r\n    ViewWorkOrderComponent,\r\n    ViewStockTransferComponent,\r\n    ViewIrrigationRepairComponent,\r\n    ViewPurchaseOrderComponent,\r\n    ViewWalkthroughComponent,\r\n    ViewCostSummaryComponent,\r\n    ViewMWorkOrderComponent,\r\n    ViewCWorkOrderComponent,\r\n    ViewMaterialsComponent,\r\n    ViewContainersComponent,\r\n    ViewCustomersComponent,\r\n    WorkOrderComponent,\r\n    WalkthroughComponent,\r\n    IrrigationRepairComponent,\r\n    ViewEmployeesComponent,\r\n    ViewRolesComponent,\r\n    FormEmployeesComponent,\r\n    FormRolesComponent,\r\n    StockTransferComponent,\r\n    IrrigationRepairPartsComponent,\r\n    FormMaterialsComponent,\r\n    FormContainersComponent,\r\n    ViewTruckInventoryComponent,\r\n    FormTruckInventoryComponent,\r\n    ViewStockTransferStatisticsComponent,\r\n    StartJobComponent,\r\n    MWorkOrderComponent,\r\n    UpdateConstantsComponent,\r\n    FormCustomersComponent,\r\n    ViewDataUsageComponent,\r\n    PurchaseOrderComponent,\r\n    ViewStockByTruckComponent,\r\n    UpdateCustomersListComponent\r\n  ],\r\n  entryComponents: [\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    BrowserAnimationsModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    HttpClientModule,\r\n    MatDialogModule,\r\n    ApiModule,\r\n    // Idle: seconds before warning pops up, Timeout: seconds before app logs out after warning,\r\n    // Ping(optional): seconds before periodic action fires\r\n    // UserIdleModule.forRoot({idle: 10, timeout: 10, ping: 15}),\r\n\r\n    // Refresh token every 15 minutes, inactivity logout after 30 minutes\r\n    UserIdleModule.forRoot({ idle: 10, timeout: 1800, ping: 900 }),\r\n    routing,\r\n    RecaptchaModule.forRoot()\r\n  ],\r\n  providers: [\r\n    NewApiService,\r\n    { provide: LocationStrategy, useClass: HashLocationStrategy },\r\n    { provide: RECAPTCHA_SETTINGS, useValue: globalSettings },\r\n    { provide: MAT_DIALOG_DEFAULT_OPTIONS, useValue: { hasBackdrop: false } },\r\n    CookieService,\r\n    {\r\n      provide: HTTP_INTERCEPTORS,\r\n      useClass: AuthTknInterceptor,\r\n      multi: true\r\n    }\r\n  ],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { LoginComponent } from './login';\r\nimport { AuthGuard } from './_guards';\r\nimport { DashboardComponent } from './dashboard/dashboard.component';\r\nimport { AppUpdatesComponent } from './general/app-updates/app-updates.component';\r\nimport { BugReportComponent } from './general/bug-report/bug-report.component';\r\nimport { ViewWorkOrderComponent } from \"src/app/forms/view-work-order/view-work-order.component\";\r\nimport { ViewStockTransferComponent } from \"src/app/forms/view-stock-transfer/view-stock-transfer.component\";\r\nimport { ViewIrrigationRepairComponent } from \"src/app/forms/view-irrigation-repair/view-irrigation-repair.component\";\r\nimport { ViewPurchaseOrderComponent } from \"src/app/forms/view-purchase-order/view-purchase-order.component\";\r\nimport { ViewWalkthroughComponent } from \"src/app/forms/view-walkthrough/view-walkthrough.component\";\r\nimport { ViewCostSummaryComponent } from \"src/app/forms/view-cost-summary/view-cost-summary.component\";\r\nimport { ViewMWorkOrderComponent } from \"src/app/forms/view-m-work-order/view-m-work-order.component\";\r\nimport { ViewCWorkOrderComponent } from \"src/app/forms/view-c-work-order/view-c-work-order.component\";\r\nimport { ViewMaterialsComponent } from \"src/app/inventory/view-materials/view-materials.component\";\r\nimport { ViewContainersComponent } from \"src/app/inventory/view-containers/view-containers.component\";\r\nimport { ViewCustomersComponent } from \"src/app/customers/view-customers/view-customers.component\";\r\nimport { WorkOrderComponent } from \"src/app/forms/fill/work-order/work-order.component\";\r\nimport { ViewEmployeesComponent } from \"src/app/administration/view-employees/view-employees.component\";\r\nimport { ViewRolesComponent } from \"src/app/administration/view-roles/view-roles.component\";\r\nimport { FormEmployeesComponent } from \"src/app/administration/form-employees/form-employees.component\";\r\nimport { FormRolesComponent } from \"src/app/administration/form-roles/form-roles.component\";\r\nimport { WalkthroughComponent } from \"src/app/forms/fill/walkthrough/walkthrough.component\";\r\nimport { IrrigationRepairComponent } from \"src/app/forms/fill/irrigation-repair/irrigation-repair.component\";\r\nimport { StockTransferComponent } from \"src/app/forms/fill/stock-transfer/stock-transfer.component\";\r\nimport { IrrigationRepairPartsComponent } from \"src/app/forms/fill/irrigation-repair-parts/irrigation-repair-parts.component\";\r\nimport { ViewStockTransferStatisticsComponent } from \"src/app/view-stock-transfer-statistics/view-stock-transfer-statistics.component\";\r\nimport { StartJobComponent } from \"src/app/forms/fill/start-job/start-job.component\";\r\nimport { UpdateConstantsComponent } from \"src/app/general/update-constants/update-constants.component\";\r\nimport { FormMaterialsComponent } from \"src/app/inventory/form-materials/form-materials.component\";\r\nimport { FormContainersComponent } from \"src/app/inventory/form-containers/form-containers.component\";\r\nimport { ViewTruckInventoryComponent } from \"src/app/inventory/view-truck-inventory/view-truck-inventory.component\";\r\nimport { FormTruckInventoryComponent } from \"src/app/inventory/form-truck-inventory/form-truck-inventory.component\";\r\nimport { FormCustomersComponent } from \"src/app/customers/form-customers/form-customers.component\";\r\nimport { ViewDataUsageComponent } from \"src/app/general/view-data-usage/view-data-usage.component\";\r\nimport { MWorkOrderComponent } from \"src/app/forms/fill/m-work-order/m-work-order.component\";\r\nimport { PurchaseOrderComponent } from \"src/app/forms/fill/purchase-order/purchase-order.component\";\r\nimport { ViewStockByTruckComponent } from \"src/app/view-stock-by-truck/view-stock-by-truck.component\";\r\nimport { UpdateCustomersListComponent } from \"src/app/populate/update-customers-list/update-customers-list.component\";\r\n\r\nconst appRoutes: Routes = [\r\n   { path: 'login', component: LoginComponent },\r\n    { path: '', component: DashboardComponent,\r\n    children: [\r\n        // Forms\r\n        {path: 'view-work-order/:processNum', component: ViewWorkOrderComponent},\r\n        {path: 'view-work-order', component: ViewWorkOrderComponent},\r\n        {path: 'view-stock-transfer/:processNum', component: ViewStockTransferComponent},\r\n        {path: 'view-stock-transfer', component: ViewStockTransferComponent},\r\n        {path: 'view-irrigation-repair/:processNum/:jobnum', component: ViewIrrigationRepairComponent},\r\n        {path: 'view-irrigation-repair/:processNum', component: ViewIrrigationRepairComponent},\r\n        {path: 'view-irrigation-repair', component: ViewIrrigationRepairComponent},\r\n        {path: 'view-purchase-order/:processNum/:jobnum', component: ViewPurchaseOrderComponent},\r\n        {path: 'view-purchase-order/:processNum', component: ViewPurchaseOrderComponent},\r\n        {path: 'view-purchase-order', component: ViewPurchaseOrderComponent},\r\n        {path: 'view-walkthrough/:processNum', component: ViewWalkthroughComponent},\r\n        {path: 'view-walkthrough', component: ViewWalkthroughComponent},\r\n        {path: 'view-cost-summary/:processNum', component: ViewCostSummaryComponent},\r\n        {path: 'view-cost-summary', component: ViewCostSummaryComponent},\r\n        {path: 'view-m-work-order/:processNum', component: ViewMWorkOrderComponent},\r\n        {path: 'view-m-work-order', component: ViewMWorkOrderComponent},\r\n        {path: 'view-c-work-order/:processNum', component: ViewCWorkOrderComponent},\r\n        {path: 'view-c-work-order', component: ViewCWorkOrderComponent},\r\n        \r\n        {path: 'work-order/:formId', component: WorkOrderComponent},\r\n        {path: 'work-order', component: WorkOrderComponent},\r\n        {path: 'start-job', component: StartJobComponent},\r\n        {path: 'stock-transfer/jobnum/:jobnum', component: StockTransferComponent},\r\n        {path: 'stock-transfer/:formId', component: StockTransferComponent},\r\n        {path: 'stock-transfer', component: StockTransferComponent},\r\n        {path: 'irrigation-repair/:formId', component: IrrigationRepairComponent},\r\n        {path: 'irrigation-repair', component: IrrigationRepairComponent},\r\n        {path: 'irrigation-repair-parts/:formId', component: IrrigationRepairPartsComponent},\r\n        {path: 'purchase-order/:formId', component: PurchaseOrderComponent},\r\n        {path: 'purchase-order', component: PurchaseOrderComponent},\r\n        {path: 'walkthrough/:formId', component: WalkthroughComponent},\r\n        {path: 'walkthrough', component: WalkthroughComponent},\r\n        {path: 'cost-summary/:formId', component: ViewCostSummaryComponent},\r\n        {path: 'cost-summary', component: ViewCostSummaryComponent},\r\n        {path: 'm-work-order/:formId', component: MWorkOrderComponent},\r\n        {path: 'm-work-order', component: MWorkOrderComponent},\r\n        {path: 'c-work-order/:formId', component: ViewCWorkOrderComponent},\r\n        {path: 'c-work-order', component: ViewCWorkOrderComponent},\r\n\r\n        // Inventory\r\n        {path: 'view-materials/:id', component: ViewMaterialsComponent},\r\n        {path: 'view-materials', component: ViewMaterialsComponent},\r\n        {path: 'view-containers/:id', component: ViewContainersComponent},\r\n        {path: 'view-containers', component: ViewContainersComponent},\r\n        {path: 'view-truck-inventory/:id', component: ViewTruckInventoryComponent},\r\n        {path: 'view-truck-inventory', component: ViewTruckInventoryComponent},\r\n        {path: 'stock-transfer-statistics', component: ViewStockTransferStatisticsComponent},\r\n        \r\n        {path: 'form-materials/:deptId/:id', component: FormMaterialsComponent},\r\n        {path: 'form-materials/:deptId', component: FormMaterialsComponent},\r\n        {path: 'form-containers/:deptId/:id', component: FormContainersComponent},\r\n        {path: 'form-containers/:deptId', component: FormContainersComponent},\r\n        {path: 'form-truck-inventory/:deptId/:id', component: FormTruckInventoryComponent},\r\n        {path: 'form-truck-inventory/:deptId', component: FormTruckInventoryComponent},\r\n        \r\n        //Customers\r\n        {path: 'view-customers/:deptId', component: ViewCustomersComponent},\r\n        {path: 'form-customers/:deptId/:id', component: FormCustomersComponent},\r\n        {path: 'form-customers/:deptId', component: FormCustomersComponent},\r\n        \r\n        //Admin\r\n        {path: 'view-employees', component: ViewEmployeesComponent},\r\n        {path: 'view-employees/:status', component: ViewEmployeesComponent},\r\n        {path: 'form-employee', component: FormEmployeesComponent},\r\n        {path: 'form-employee/:id', component: FormEmployeesComponent},\r\n        \r\n        // General\r\n        {path: 'app-updates', component: AppUpdatesComponent},\r\n        {path: 'bug-report', component: BugReportComponent},\r\n        {path: 'view-data-usage', component: ViewDataUsageComponent},\r\n        {path: 'view-monthly-stock', component: ViewStockByTruckComponent},\r\n        {path: 'update-constants', component: UpdateConstantsComponent},\r\n        {path: 'update-customers-list-csv', component: UpdateCustomersListComponent}\r\n    ],\r\n    canActivate: [AuthGuard]\r\n    },\r\n    // otherwise redirect to home page\r\n    { path: '**', redirectTo: '' }\r\n];\r\n\r\nexport const routing = RouterModule.forRoot(appRoutes);\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2N1c3RvbWVycy9mb3JtLWN1c3RvbWVycy9mb3JtLWN1c3RvbWVycy5jb21wb25lbnQuY3NzIn0= */\"","module.exports = \"<!-- This page fragment is to be included under Dashboard <body> tag -->\\r\\n\\r\\n<div class='modal fade' id='deactivateCustomer' tabindex='-10' role='dialog' data-backdrop='false'>  \\r\\n    <div class='modal-dialog' role='document'>  \\r\\n        <div class='modal-content'>  \\r\\n        <div class='modal-header'>  \\r\\n            <button type='button' class='close' data-dismiss='modal' aria-label='Close'><span aria-hidden='true'>&times;</span></button>  \\r\\n            <h4 class='modal-title'>Delete Customer</h4>  \\r\\n        </div>  \\r\\n        <div class='modal-body modal_body_warning'>  \\r\\n        <input type='hidden' name='id' value='invId'>  \\r\\n        <b>Warning: This will remove this customer from the system.</b><br>  \\r\\n        </div>  \\r\\n        <div class='modal-footer text-center'>  \\r\\n            <button type='button' class='btn' data-dismiss='modal' aria-label='Close'>Cancel</button>  \\r\\n            <button type='button' (click)=\\\"DeleteCustomer()\\\" class='btn btn-danger'>Delete</button>  \\r\\n        </div>  \\r\\n        </div>  \\r\\n    </div>  \\r\\n</div>\\r\\n\\r\\n<div class='row'>\\r\\n\\t<div class='col col-sm-offset-1 text-left'>\\r\\n\\t\\t<h3><a class='back_btn' routerLink=\\\"/view-customers/{{deptId}}\\\"><span class='glyphicon glyphicon-chevron-left'></span>Back</a></h3>\\r\\n\\t</div>\\r\\n</div>\\r\\n<div class='row' *ngIf=\\\"customerId\\\">\\r\\n    <div class='col-xs-12 col-md-10 col-md-offset-1 text-left'>\\r\\n        <h3>\\r\\n            <a title='Delete' class='btn btn-lg btn-danger pull-right' href='#' data-toggle='modal' data-target='#deactivateCustomer'> \\r\\n                <b><span class='glyphicon glyphicon-trash'></span> Delete</b>\\r\\n            </a>\\r\\n        </h3>\\r\\n    </div>\\r\\n</div>\\r\\n<div class='row text-center'>\\r\\n\\t<h3 class='text-capitalize' style='color: #323131;'>Create/Update Contact</h3>\\r\\n\\t<div class='col-sm-10 col-sm-offset-1 text-left'>\\r\\n\\t\\t<form (ngSubmit)=\\\"onSubmit()\\\" #nisshoForm=\\\"ngForm\\\">\\r\\n\\t\\t\\t<div class='row margin_top_15'>\\r\\n\\t\\t\\t\\t<div class='col-sm-4'>\\r\\n\\t\\t\\t\\t\\t<label for='jobnum'>Job #:</label>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class='col-sm-8'>\\r\\n\\t\\t\\t\\t\\t<input type='text' id='jobnum' name='jobnum' class='form-control' placeholder='Job #' required [(ngModel)]=\\\"model.jobnum\\\">\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class='row'>\\r\\n\\t\\t\\t\\t<div class='col-sm-4'>\\r\\n\\t\\t\\t\\t\\t<label for='project_name'>Job Name:</label>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class='col-sm-8'>\\r\\n\\t\\t\\t\\t\\t<input type='text' name='project_name' class='form-control' placeholder='Job Name' required [(ngModel)]=\\\"model.project_name\\\">\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class='row'>\\r\\n\\t\\t\\t\\t<div class='col-sm-4'>\\r\\n\\t\\t\\t\\t\\t<label for='contract_amt'>Contract Amount ($):</label>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class='col-sm-8'>\\r\\n\\t\\t\\t\\t\\t<input type='text' id='contract_amt' name='contract_amt' class='form-control' placeholder='Contract Amount ($)' required [(ngModel)]=\\\"model.contract_amt\\\">\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class='row'>\\r\\n\\t\\t\\t\\t<div class='col-sm-4'>\\r\\n\\t\\t\\t\\t\\t<label for='address'>Job Address / Main Streets:</label>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class='col-sm-8'>\\r\\n\\t\\t\\t\\t\\t<input type='text' id='address' name='address' class='form-control' placeholder='Job Address' required [(ngModel)]=\\\"model.address\\\">\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class='row'>\\r\\n\\t\\t\\t\\t<div class='col-sm-4'>\\r\\n\\t\\t\\t\\t\\t<label for='city'>Job City:</label>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class='col-sm-8'>\\r\\n\\t\\t\\t\\t\\t<input type='text' id='city' name='city' class='form-control' placeholder='Job City' required [(ngModel)]=\\\"model.city\\\">\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class='row'>\\r\\n\\t\\t\\t\\t<div class='col-sm-4'>\\r\\n\\t\\t\\t\\t\\t<label for='management'>Client / Property Management:</label>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class='col-sm-8'>\\r\\n\\t\\t\\t\\t\\t<input type='text' id='management' name='management' class='form-control' placeholder='Client / Property Management' required [(ngModel)]=\\\"model.management\\\">\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class='row'>\\r\\n\\t\\t\\t\\t<div class='col-sm-4'>\\r\\n\\t\\t\\t\\t\\t<label for='contact'>Contact Person:</label>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class='col-sm-8'>\\r\\n\\t\\t\\t\\t\\t<input type='text' id='contact' name='contact' class='form-control' placeholder='Contact' required [(ngModel)]=\\\"model.contact\\\">\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class='row'>\\r\\n\\t\\t\\t\\t<div class='col-sm-4'>\\r\\n\\t\\t\\t\\t\\t<label for='phone'>Phone:</label>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class='col-sm-8'>\\r\\n\\t\\t\\t\\t\\t<input type='text' id='phone' name='phone' class='form-control' placeholder='Contact Phone' required [(ngModel)]=\\\"model.phone\\\">\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class='row'>\\r\\n\\t\\t\\t\\t<div class='col-sm-4'>\\r\\n\\t\\t\\t\\t\\t<label for='email'>Contact Email:</label>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class='col-sm-8'>\\r\\n\\t\\t\\t\\t\\t<input type='text' id='email' name='email' class='form-control' placeholder='Contact Email' required [(ngModel)]=\\\"model.email\\\">\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class='row'>\\r\\n\\t\\t\\t\\t<div class='col-sm-4'>\\r\\n\\t\\t\\t\\t\\t<label for='email'>Project Manager</label>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class='col-sm-8'>\\r\\n\\t\\t\\t\\t\\t<input type='text' id='project_manager' name='project_manager' class='form-control' placeholder='Nissho Project Manager' required [(ngModel)]=\\\"model.project_manager\\\">\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class='row margin_top_15'>\\r\\n\\t\\t\\t\\t<div class='col-sm-12 text-center'>\\r\\n\\t\\t\\t\\t\\t<button type='submit' class='btn btn-lg btn-success'>Save Changes</button>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</form>\\r\\n\\t</div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { InventoryManagementService, Customer, AdministrationService } from \"process-smart-ng6-lib\";\r\nimport { ActivatedRoute } from \"@angular/router\";\r\nimport { SharedService } from \"src/app/_services/shared.service\";\r\nimport { Router } from \"@angular/router\";\r\n\r\n@Component({\r\n  selector: 'app-form-customers',\r\n  templateUrl: './form-customers.component.html',\r\n  styleUrls: ['./form-customers.component.css']\r\n})\r\nexport class FormCustomersComponent implements OnInit {\r\n    model: any;\r\n    deptId: string;\r\n    fillerUid: string;\r\n    customerId: string;\r\n    \r\n    constructor(private route: ActivatedRoute,\r\n            private router: Router, private ssv: SharedService,\r\n            private adms: AdministrationService) { }\r\n    \r\n    ngOnInit() {\r\n        this.fillerUid = JSON.parse(localStorage.getItem('currentUser')).user.uid;\r\n        let clientId = JSON.parse(localStorage.getItem('currentUser')).user.client_id;\r\n        \r\n        //Load or create new form\r\n        this.route.params.subscribe(params => {\r\n            this.deptId = params['deptId'];\r\n            this.customerId = params['id'];\r\n            \r\n            if(this.customerId){\r\n                //Load Customer detail\r\n                this.getModel();\r\n            }\r\n            else {\r\n                //Create a new form\r\n                this.model = {\r\n                    department_id: this.deptId,\r\n                    client_id: clientId\r\n                };\r\n            }\r\n        });\r\n    }\r\n    \r\n    DeleteCustomer(){\r\n        if(!this.customerId)\r\n            return;\r\n        \r\n        this.adms.deleteCustomer(this.customerId)\r\n        .subscribe(\r\n        data => {\r\n            this.ssv.showSuccess('Client successfully deleted!');\r\n              this.router.navigate(['/view-customers/' + this.deptId]);\r\n          },\r\n          error => {\r\n              // Display error message\r\n              this.ssv.showError('Unable to delete Client!');\r\n              console.log(error);\r\n          }\r\n    );\r\n    }\r\n    \r\n    onSubmit() {\r\n      //Update DB if exists, or create a new one otherwise\r\n        if(this.customerId){\r\n            this.adms.updateCustomer(this.model, this.customerId)\r\n            .subscribe(\r\n            data => {\r\n                this.ssv.showSuccess('Client successfully updated!');\r\n                  this.router.navigate(['/view-customers/' + this.deptId]);\r\n              },\r\n              error => {\r\n                  // Display error message\r\n                  this.ssv.showError('Unable to update Client!');\r\n                  console.log(error);\r\n              }\r\n        );\r\n        }\r\n        else{\r\n            this.adms.newCustomer(this.model)\r\n                .subscribe(\r\n                data => {\r\n                      // Page redirect when getting response\r\n                    this.ssv.showSuccess('Client successfully added!');\r\n                      this.router.navigate(['/view-customers/' + this.deptId]);\r\n                  },\r\n                  error => {\r\n                      // Display error message\r\n                      this.ssv.showError('Unable to add new client!');\r\n                      console.log(error);\r\n                  }\r\n            );\r\n        }\r\n    }\r\n    \r\n    getModel(){\r\n        this.adms.getCustomer(this.customerId)\r\n        .subscribe(model => this.model = model);\r\n    }\r\n    \r\n    get diagnostic() { return JSON.stringify(this.model); }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2N1c3RvbWVycy92aWV3LWN1c3RvbWVycy92aWV3LWN1c3RvbWVycy5jb21wb25lbnQuY3NzIn0= */\"","module.exports = \"<div class=\\\"row margin_top_15 text-center\\\">\\r\\n   \\t<h3 class=\\\"text-capitalize\\\">Master Contact List</h3>\\r\\n   \\t<div class=\\\"col-sm-6 text-right\\\">\\r\\n\\t\\t<button type=\\\"button\\\" class=\\\"btn btn-success btn-sm button\\\" routerLink=\\\"/form-customers/{{deptId}}\\\">\\r\\n\\t\\t\\t<span class=\\\"glyphicon glyphicon-plus\\\"></span> Add Client\\r\\n\\t\\t</button>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"col-sm-6 text-left\\\">\\r\\n\\t\\t<button type=\\\"button\\\" *ngIf=\\\"!is_downloading_list\\\" class=\\\"btn btn-info btn-sm button\\\" (click)=\\\"downloadAll()\\\">Download All</button>\\r\\n\\t\\t<span *ngIf=\\\"is_downloading_list\\\" class=\\\"loader\\\"></span>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"col-xs-12 margin_top_15 table-responsive\\\">\\r\\n        <div class=\\\"row margin_bottom_15\\\">\\r\\n\\t\\t\\t<div class=\\\"col-sm-4 text-left input-group\\\">\\r\\n\\t               <div class=\\\"input-group-addon\\\"><span class=\\\"glyphicon glyphicon-search\\\"></span></div>\\r\\n\\t               <input type=\\\"text\\\" id=\\\"filterForm\\\" class=\\\"form-control\\\" placeholder=\\\"Search Project or Job #\\\" (input)=\\\"searchItem($event.target.value)\\\">\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<i *ngIf=\\\"!partialItemsList\\\">\\r\\n\\t\\t\\tNo items here!\\r\\n        </i>\\r\\n        <table *ngIf=\\\"partialItemsList\\\" class=\\\"table table_view table-hover\\\">\\r\\n   \\t\\t\\t<thead>\\r\\n       \\t\\t\\t<tr class=\\\"table_heading\\\">\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-3\\\">Project</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Job #</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-3\\\">Management</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Contact</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Actions</th>\\r\\n       \\t\\t\\t</tr>\\r\\n  \\t\\t\\t</thead>\\r\\n\\t\\t\\t<tbody>\\r\\n                <tr *ngFor=\\\"let item of partialItemsList\\\" class=\\\"table_body\\\">\\r\\n                    <td class=\\\"col-sm-3\\\">{{item.project_name}}</td>\\r\\n                    <td class=\\\"col-sm-2\\\">{{item.jobnum}}</td>\\r\\n                    <td class=\\\"col-sm-2\\\">{{item.management}}</td>\\r\\n                    <td class=\\\"col-sm-3\\\">{{item.contact}}<br>{{item.phone}}</td>\\r\\n                    <td class=\\\"col-sm-2\\\">\\r\\n                        <a routerLink=\\\"/form-customers/{{deptId}}/{{item.id}}\\\">Details</a>\\r\\n                    </td>\\r\\n                </tr>\\r\\n\\t         </tbody>\\r\\n        </table>\\r\\n   \\t</div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { AdministrationService, Customer } from \"process-smart-ng6-lib\";\r\nimport { SharedService } from \"src/app/_services/shared.service\";\r\nimport { CustomDownloadServiceService } from \"src/app/_services/custom-download-service.service\";\r\nimport { ActivatedRoute } from \"@angular/router\";\r\nimport { saveAs } from 'file-saver';\r\n\r\n@Component({\r\n  selector: 'app-view-customers',\r\n  templateUrl: './view-customers.component.html',\r\n  styleUrls: ['./view-customers.component.css']\r\n})\r\nexport class ViewCustomersComponent implements OnInit {\r\n    itemsList: Array<Customer>;\r\n    partialItemsList: Array<Customer>;\r\n    deptId: string;\r\n    is_downloading_list: boolean;\r\n\r\n    constructor(private route: ActivatedRoute, private adms: AdministrationService, private ssv: SharedService,\r\n            private cds: CustomDownloadServiceService) { }\r\n    \r\n    ngOnInit() {\r\n        this.route.params.subscribe(params => {\r\n            this.deptId = params['deptId'];\r\n            this.populateItems();\r\n        });\r\n        \r\n        this.is_downloading_list = false;\r\n        \r\n        //Date\r\n        const date = new Date();\r\n        const dd = date.getDate() < 10 ? '0' + date.getDate() : date.getDate();\r\n        const mm = date.getMonth() < 9 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1;\r\n        const yyyy = date.getFullYear();\r\n        \r\n        const uid = JSON.parse(localStorage.getItem('currentUser')).user.uid;\r\n    }\r\n    \r\n    populateItems() {\r\n    this.adms.getCustomersByDept(this.deptId)\r\n      .subscribe(itemsList => {\r\n          //Sort by name (ascending)\r\n          if(itemsList){\r\n              this.itemsList = itemsList.sort((a, b) => {\r\n                  return (a.project_name > b.project_name ? 1 : a.project_name < b.project_name ? -1 : 0);\r\n              });\r\n          }\r\n          this.partialItemsList = itemsList;\r\n      });\r\n    }\r\n    \r\n    searchItem(input: string) {\r\n      if (this.partialItemsList && this.itemsList) {\r\n        this.partialItemsList = this.itemsList.filter(x => \r\n            (!x.jobnum || !x.project_name ||\r\n            x.jobnum.toLowerCase().includes(input.toLowerCase())) ||\r\n            x.project_name.toLowerCase().includes(input.toLowerCase()));\r\n      }\r\n    }\r\n    \r\n    downloadAll(){\r\n        this.is_downloading_list = true;\r\n        this.cds.downloadCustomerListXls()\r\n        .subscribe(\r\n            res => {\r\n                saveAs( res, 'CustomerList.xls', \r\n                    { type: 'application/vnd.ms-excel' });\r\n                this.is_downloading_list = false;\r\n            },\r\n            error => {\r\n                // Display error message\r\n                console.log(error);\r\n                this.ssv.showError('Error: Unable to download list!');\r\n                this.is_downloading_list = false;\r\n            }\r\n        );\r\n    }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Rhc2hib2FyZC1jb250ZW50L2Rhc2hib2FyZC1jb250ZW50LmNvbXBvbmVudC5jc3MifQ== */\"","module.exports = \"<div id=\\\"suc_msg\\\" *ngIf=\\\"success\\\" class=\\\"alert alert-success alert-dismissable text-center\\\">\\r\\n    <a class=\\\"close\\\" data-dismiss=\\\"alert\\\">&times;</a>\\r\\n    <strong>{{success}}</strong>\\r\\n</div>\\r\\n<div id=\\\"err_msg\\\" *ngIf=\\\"error\\\" class=\\\"alert alert-danger alert-dismissable text-center\\\">\\r\\n    <a class=\\\"close\\\" data-dismiss=\\\"alert\\\">&times;</a>\\r\\n    <strong>{{error}}</strong>\\r\\n</div>\\r\\n\\r\\n<input type=\\\"hidden\\\" id=\\\"last_page\\\" value=\\\"nav_fillforms_pool_chem\\\"/>\\r\\n<script>\\r\\n    let last_page = document.getElementById(\\\"last_page\\\").value;\\r\\n    $('.dashboard_content_nav').css(\\\"display\\\",\\\"none\\\");\\r\\n    $('#'+last_page+\\\"_container\\\").css(\\\"display\\\",\\\"block\\\");\\r\\n</script>\"","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-dashboard-content',\r\n  templateUrl: './dashboard-content.component.html',\r\n  styleUrls: ['./dashboard-content.component.css']\r\n})\r\nexport class DashboardContentComponent implements OnInit {\r\n\r\n    success: string;\r\n    error: string;\r\n\r\n  constructor() {\r\n      this.success = 'Success message here';\r\n      this.error = 'Error!!';\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Rhc2hib2FyZC1zaWRlYmFyL2Rhc2hib2FyZC1zaWRlYmFyLmNvbXBvbmVudC5jc3MifQ== */\"","module.exports = \"<div class=\\\"sidebar-nav\\\">\\r\\n    <div class=\\\"navbar navbar-default\\\" role=\\\"navigation\\\">\\r\\n        <div class=\\\"navbar-header\\\">\\r\\n            <button type=\\\"button\\\" class=\\\"navbar-toggle\\\" data-toggle=\\\"collapse\\\" data-target=\\\".sidebar-navbar-collapse\\\">\\r\\n                <span class=\\\"sr-only\\\">Toggle navigation</span>\\r\\n                <span class=\\\"icon-bar\\\"></span>\\r\\n                <span class=\\\"icon-bar\\\"></span>\\r\\n                <span class=\\\"icon-bar\\\"></span>\\r\\n            </button>\\r\\n            <span class=\\\"visible-xs navbar-brand\\\">Actions:</span>\\r\\n        </div>\\r\\n        <div class=\\\"navbar-collapse collapse sidebar-navbar-collapse sidebarStyle\\\">\\r\\n            <ul class=\\\"nav navbar-nav\\\">\\r\\n            <ng-container *ngIf=\\\"authorizedFeatures\\\">\\r\\n                <!-- 1. Administrator -->\\r\\n                <ng-container *ngIf=\\\"authorizedFeatures.includes(6)\\\">\\r\\n                <li id=\\\"nav_form_user_management\\\" class=\\\"form_nav\\\">\\r\\n                    <a>User Management <span class=\\\"glyphicon glyphicon-chevron-down pull-right\\\"></span>\\r\\n                    </a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_users\\\" class=\\\"form_submenu user_management_submenu\\\" routerLink=\\\"/view-employees\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Users</a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_users_deactivated\\\" class=\\\"form_submenu user_management_submenu\\\" routerLink=\\\"/view-employees/inactive\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Deactivated Users</a>\\r\\n                </li>\\r\\n                </ng-container>\\r\\n                \\r\\n                <!-- 2. Management -->\\r\\n                <ng-container *ngIf=\\\"roleId == '2'\\\">\\r\\n                <li id=\\\"nav_form_wop\\\" class=\\\"form_nav\\\">\\r\\n                    <a>Work Proposals\\r\\n                    <span class=\\\"glyphicon glyphicon-chevron-down pull-right\\\"></span>\\r\\n                    </a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_wop_pending\\\" class=\\\"form_submenu wop_submenu\\\" routerLink=\\\"/view-m-work-order/2\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Pending Approval</a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_wop_active_not_scheduled\\\" class=\\\"form_submenu wop_submenu\\\" routerLink=\\\"/view-m-work-order/4\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Assign Work</a>\\r\\n                </li>\\r\\n                \\r\\n                <li id=\\\"nav_form_wo\\\" class=\\\"form_nav\\\">\\r\\n                    <a>Work Order\\r\\n                    <span class=\\\"glyphicon glyphicon-chevron-down pull-right\\\"></span>\\r\\n                    </a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_wo_pending\\\" class=\\\"form_submenu wo_submenu\\\" routerLink=\\\"/view-work-order/2\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Pending Approval</a>\\r\\n                </li>\\r\\n                \\r\\n                <li id=\\\"nav_form_walkthrough\\\" class=\\\"form_nav\\\">\\r\\n                    <a>Walkthrough\\r\\n                    <span class=\\\"glyphicon glyphicon-chevron-down pull-right\\\"></span>\\r\\n                    </a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_walkthrough_pending\\\" class=\\\"form_submenu walkthrough_submenu\\\" routerLink=\\\"/view-walkthrough/2\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Draft</a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_walkthrough_assign\\\" class=\\\"form_submenu walkthrough_submenu\\\" routerLink=\\\"/view-walkthrough/3\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Punchlist</a>\\r\\n                </li>\\r\\n                \\r\\n                <li id=\\\"nav_app_statistics\\\" class=\\\"form_nav\\\" routerLink=\\\"/view-data-usage\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>App Statistics</a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_app_updates\\\" class=\\\"form_nav\\\" routerLink=\\\"/app-updates\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>App Updates</a>\\r\\n                </li>\\r\\n                </ng-container>\\r\\n                \\r\\n                <!-- 3. Maintenance Project Manager -->\\r\\n                <ng-container *ngIf=\\\"roleId == '3'\\\">\\r\\n                <li id=\\\"nav_form_walkthrough\\\" class=\\\"form_nav\\\">\\r\\n                    <a>Walkthrough\\r\\n                    <span class=\\\"glyphicon glyphicon-chevron-down pull-right\\\"></span>\\r\\n                    </a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_walkthrough_pending\\\" class=\\\"form_submenu walkthrough_submenu\\\" routerLink=\\\"/view-walkthrough/2\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Draft</a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_walkthrough_assign\\\" class=\\\"form_submenu walkthrough_submenu\\\" routerLink=\\\"/view-walkthrough/3\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Punchlist</a>\\r\\n                </li>\\r\\n                \\r\\n                <li id=\\\"nav_form_wop\\\" class=\\\"form_nav\\\">\\r\\n                    <a>Work Order\\r\\n                    <span class=\\\"glyphicon glyphicon-chevron-down pull-right\\\"></span>\\r\\n                    </a>\\r\\n                </li>\\r\\n\\t\\t\\t\\t<li id=\\\"nav_wop_draft\\\" class=\\\"form_submenu wop_submenu\\\" routerLink=\\\"/view-m-work-order/1\\\" routerLinkActive=\\\"active\\\">\\r\\n\\t\\t\\t\\t\\t<a>Drafts</a>\\r\\n\\t\\t\\t\\t</li>\\r\\n                <li id=\\\"nav_wop_pending\\\" class=\\\"form_submenu wop_submenu\\\" routerLink=\\\"/view-m-work-order/2\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Pending Approval</a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_wop_active\\\" class=\\\"form_submenu wop_submenu\\\" routerLink=\\\"/view-m-work-order/5\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>In Progress</a>\\r\\n                </li>\\r\\n                \\r\\n                <li id=\\\"nav_new_po\\\" class=\\\"form_nav\\\">\\r\\n\\t\\t\\t\\t\\t<a>New PO<span class=\\\"glyphicon glyphicon-plus pull-right\\\"></span></a>\\r\\n\\t\\t\\t\\t</li>\\r\\n                \\r\\n                <li id=\\\"nav_app_updates\\\" class=\\\"form_nav\\\" routerLink=\\\"/app-updates\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>App Updates</a>\\r\\n                </li>\\r\\n                </ng-container>\\r\\n                \\r\\n                <!-- 4. Irrigation Manager -->\\r\\n                <ng-container *ngIf=\\\"roleId == '4'\\\">\\r\\n                <li id=\\\"nav_form_newform\\\" class=\\\"form_nav\\\">\\r\\n                    <a>New Form\\r\\n                    <span class=\\\"glyphicon glyphicon-chevron-down pull-right\\\"></span>\\r\\n                    </a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_newform_irf\\\" class=\\\"form_submenu newform_submenu\\\" routerLink=\\\"/irrigation-repair\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Irrigation Repair<span class=\\\"glyphicon glyphicon-plus pull-right\\\"></span></a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_newform_po\\\" class=\\\"form_submenu newform_submenu\\\" routerLink=\\\"/purchase-order\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Purchase Order<span class=\\\"glyphicon glyphicon-plus pull-right\\\"></span></a>\\r\\n                </li>\\r\\n                \\r\\n\\t\\t\\t\\t<li id=\\\"nav_form_drafts\\\" class=\\\"form_nav\\\">\\r\\n                    <a>Drafts\\r\\n                    <span class=\\\"glyphicon glyphicon-chevron-down pull-right\\\"></span>\\r\\n                    </a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_drafts_irf\\\" class=\\\"form_submenu drafts_submenu\\\" routerLink=\\\"/view-irrigation-repair/1\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Irrigation Repair</a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_drafts_po\\\" class=\\\"form_submenu drafts_submenu\\\" routerLink=\\\"/view-purchase-order/1\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Purchase Order</a>\\r\\n                </li>\\r\\n                \\r\\n                <li id=\\\"nav_irfapproval\\\" class=\\\"form_nav\\\" routerLink=\\\"/view-irrigation-repair/2\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Pending Approval/ Revision</a>\\r\\n                </li>\\r\\n                \\r\\n                <li id=\\\"nav_form_sent\\\" class=\\\"form_nav\\\">\\r\\n                    <a>Sent\\r\\n                    <span class=\\\"glyphicon glyphicon-chevron-down pull-right\\\"></span>\\r\\n                    </a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_sent_irf\\\" class=\\\"form_submenu sent_submenu\\\" routerLink=\\\"/view-irrigation-repair/3\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Irrigation Repair</a>\\r\\n                </li>\\r\\n                \\r\\n                <li id=\\\"nav_app_updates\\\" class=\\\"form_nav\\\" routerLink=\\\"/app-updates\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>App Updates</a>\\r\\n                </li>\\r\\n                </ng-container>\\r\\n                \\r\\n                <!-- 6. Technician -->\\r\\n                <ng-container *ngIf=\\\"roleId == '6'\\\">\\r\\n                <li id=\\\"nav_form_newform\\\" class=\\\"form_nav\\\">\\r\\n                    <a>New Form\\r\\n                    <span class=\\\"glyphicon glyphicon-chevron-down pull-right\\\"></span>\\r\\n                    </a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_newform_irf\\\" class=\\\"form_submenu newform_submenu\\\" routerLink=\\\"/irrigation-repair\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Irrigation Repair<span class=\\\"glyphicon glyphicon-plus pull-right\\\"></span></a>\\r\\n                </li>\\r\\n                \\r\\n\\t\\t\\t\\t<li id=\\\"nav_form_drafts\\\" class=\\\"form_nav\\\">\\r\\n                    <a>Drafts\\r\\n                    <span class=\\\"glyphicon glyphicon-chevron-down pull-right\\\"></span>\\r\\n                    </a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_drafts_irf\\\" class=\\\"form_submenu drafts_submenu\\\" routerLink=\\\"/view-irrigation-repair/1\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Irrigation Repair</a>\\r\\n                </li>\\r\\n                \\r\\n                <li id=\\\"nav_app_updates\\\" class=\\\"form_nav\\\" routerLink=\\\"/app-updates\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>App Updates</a>\\r\\n                </li>\\r\\n                </ng-container>\\r\\n                \\r\\n                <!-- 5. Office Manager -->\\r\\n                <ng-container *ngIf=\\\"roleId == '5'\\\">\\r\\n                <li id=\\\"nav_form_actions\\\" class=\\\"form_nav\\\">\\r\\n                    <a>Actions <span *ngIf=\\\"(ssv.alerts.wt_3 + ssv.alerts.irf_3) > 0\\\" class=\\\"badge badge-pill badge-error\\\">{{ssv.alerts.wt_3 + ssv.alerts.irf_3}}</span>\\r\\n                    <span class=\\\"glyphicon glyphicon-chevron-down pull-right\\\"></span>\\r\\n                    </a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_actions_punchlist\\\" class=\\\"form_submenu actions_submenu\\\" routerLink=\\\"/view-walkthrough/3\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Punchlists <span *ngIf=\\\"ssv.alerts.wt_3\\\" class=\\\"pull-right alert_number_style\\\">({{ssv.alerts.wt_3}})</span></a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_actions_assign_jobnum\\\" class=\\\"form_submenu actions_submenu\\\" routerLink=\\\"/view-irrigation-repair/3\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Assign Job # <span *ngIf=\\\"ssv.alerts.irf_3\\\" class=\\\"pull-right alert_number_style\\\">({{ssv.alerts.irf_3}})</span></a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_actions_awaiting_po\\\" class=\\\"form_submenu actions_submenu\\\" routerLink=\\\"/view-purchase-order/2\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Awaiting PO Parts</a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_actions_assign_jobnum\\\" class=\\\"form_submenu actions_submenu\\\" routerLink=\\\"/view-work-order/3\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Send to Billing</a>\\r\\n                </li>\\r\\n                \\r\\n                <li id=\\\"nav_new_wo\\\" class=\\\"form_nav\\\" routerLink=\\\"/start-job\\\" routerLinkActive=\\\"active\\\">\\r\\n\\t\\t\\t\\t\\t<a>New Work Order</a>\\r\\n\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t<li id=\\\"nav_view_wo\\\" class=\\\"form_nav\\\" routerLink=\\\"/view-work-order\\\" routerLinkActive=\\\"active\\\">\\r\\n\\t\\t\\t\\t\\t<a>Work Orders <span *ngIf=\\\"ssv.alerts.wo_1 > 0\\\" class=\\\"badge badge-pill badge-error\\\">{{ssv.alerts.wo_1}}</span>\\r\\n                    </a>\\r\\n\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t<li id=\\\"nav_form_forms\\\" class=\\\"form_nav\\\">\\r\\n                    <a>Forms\\r\\n                    <span class=\\\"glyphicon glyphicon-chevron-down pull-right\\\"></span>\\r\\n                    </a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_forms_po\\\" class=\\\"form_submenu forms_submenu\\\" routerLink=\\\"/view-purchase-order/2\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Purchase Order</a>\\r\\n                </li>\\r\\n                \\r\\n                <li id=\\\"nav_form_inventory\\\" class=\\\"form_nav\\\">\\r\\n                    <a>Inventory <span class=\\\"glyphicon glyphicon-chevron-down pull-right\\\"></span>\\r\\n                    </a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_inventory_materials\\\" class=\\\"form_submenu inventory_submenu\\\" routerLink=\\\"/view-materials/1\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Parts List</a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_inventory_containers\\\" class=\\\"form_submenu inventory_submenu\\\" routerLink=\\\"/view-containers/1\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Trucks</a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_inventory_st\\\" class=\\\"form_submenu inventory_submenu\\\" routerLink=\\\"/view-monthly-stock\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Stock Transfer</a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_inventory_pricing\\\" class=\\\"form_submenu inventory_submenu\\\" routerLink=\\\"/update-constants\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Pricing</a>\\r\\n                </li>\\r\\n                \\r\\n                <li id=\\\"nav_form_customers\\\" class=\\\"form_nav\\\">\\r\\n                    <a>Contact List<span class=\\\"glyphicon glyphicon-chevron-down pull-right\\\"></span></a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_customers_irrigation\\\" class=\\\"form_submenu customers_submenu\\\" routerLink=\\\"/view-customers/2\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Irrigation/Maintenance</a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_customers_janitorial\\\" class=\\\"form_submenu customers_submenu\\\" routerLink=\\\"/view-customers/6\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Janitorial</a>\\r\\n                </li>\\r\\n                </ng-container>\\r\\n                \\r\\n                <!-- 7. Customer Service -->\\r\\n                <ng-container *ngIf=\\\"roleId == '7'\\\">\\r\\n                <li id=\\\"nav_form_actions\\\" class=\\\"form_nav\\\">\\r\\n                    <a>Actions <span *ngIf=\\\"ssv.alerts.wt_3 > 0\\\" class=\\\"badge badge-pill badge-error\\\">{{ssv.alerts.wt_3}}</span>\\r\\n                    <span class=\\\"glyphicon glyphicon-chevron-down pull-right\\\"></span>\\r\\n                    </a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_actions_punchlist\\\" class=\\\"form_submenu actions_submenu\\\" routerLink=\\\"/view-walkthrough/3\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Punchlists <span *ngIf=\\\"ssv.alerts.wt_3\\\" class=\\\"pull-right alert_number_style\\\">({{ssv.alerts.wt_3}})</span></a>\\r\\n                </li>\\r\\n                \\r\\n                <li id=\\\"nav_form_customers\\\" class=\\\"form_nav\\\">\\r\\n                    <a>Contact List<span class=\\\"glyphicon glyphicon-chevron-down pull-right\\\"></span></a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_customers_irrigation\\\" class=\\\"form_submenu customers_submenu\\\" routerLink=\\\"/view-customers/2\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Irrigation/Maintenance</a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_customers_janitorial\\\" class=\\\"form_submenu customers_submenu\\\" routerLink=\\\"/view-customers/6\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Janitorial</a>\\r\\n                </li>\\r\\n                </ng-container>\\r\\n                \\r\\n                <!-- 21. Irrigation Staff -->\\r\\n                <ng-container *ngIf=\\\"roleId == '21'\\\">\\r\\n                <li id=\\\"nav_form_actions\\\" class=\\\"form_nav\\\">\\r\\n                    <a>Actions <span *ngIf=\\\"ssv.alerts.irf_3 > 0\\\" class=\\\"badge badge-pill badge-error\\\">{{ssv.alerts.irf_3}}</span>\\r\\n                    <span class=\\\"glyphicon glyphicon-chevron-down pull-right\\\"></span>\\r\\n                    </a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_actions_punchlist\\\" class=\\\"form_submenu actions_submenu\\\" routerLink=\\\"/view-walkthrough/3\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Punchlists <span *ngIf=\\\"ssv.alerts.wt_3\\\" class=\\\"pull-right alert_number_style\\\">({{ssv.alerts.wt_3}})</span></a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_actions_assign_jobnum\\\" class=\\\"form_submenu actions_submenu\\\" routerLink=\\\"/view-irrigation-repair/3\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Assign Job # <span *ngIf=\\\"ssv.alerts.irf_3\\\" class=\\\"pull-right alert_number_style\\\">({{ssv.alerts.irf_3}})</span></a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_actions_awaiting_po\\\" class=\\\"form_submenu actions_submenu\\\" routerLink=\\\"/view-purchase-order/2\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Awaiting PO Parts</a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_actions_assign_jobnum\\\" class=\\\"form_submenu actions_submenu\\\" routerLink=\\\"/view-work-order/3\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Send to Billing</a>\\r\\n                </li>\\r\\n                \\r\\n                <li id=\\\"nav_new_wo\\\" class=\\\"form_nav\\\" routerLink=\\\"/start-job\\\" routerLinkActive=\\\"active\\\">\\r\\n\\t\\t\\t\\t\\t<a>New Work Order</a>\\r\\n\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t<li id=\\\"nav_view_wo\\\" class=\\\"form_nav\\\" routerLink=\\\"/view-work-order\\\" routerLinkActive=\\\"active\\\">\\r\\n\\t\\t\\t\\t\\t<a>Work Orders <span *ngIf=\\\"ssv.alerts.wo_1 > 0\\\" class=\\\"badge badge-pill badge-error\\\">{{ssv.alerts.wo_1}}</span>\\r\\n                    </a>\\r\\n                <li id=\\\"nav_view_po\\\" class=\\\"form_nav\\\" routerLink=\\\"/view-purchase-order/2\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Purchase Order</a>\\r\\n                </li>\\r\\n                \\r\\n                <li id=\\\"nav_form_inventory\\\" class=\\\"form_nav\\\">\\r\\n                    <a>Inventory <span class=\\\"glyphicon glyphicon-chevron-down pull-right\\\"></span>\\r\\n                    </a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_inventory_materials\\\" class=\\\"form_submenu inventory_submenu\\\" routerLink=\\\"/view-materials/1\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Parts List</a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_inventory_containers\\\" class=\\\"form_submenu inventory_submenu\\\" routerLink=\\\"/view-containers/1\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Trucks</a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_inventory_st\\\" class=\\\"form_submenu inventory_submenu\\\" routerLink=\\\"/view-monthly-stock\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Stock Transfer</a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_inventory_pricing\\\" class=\\\"form_submenu inventory_submenu\\\" routerLink=\\\"/update-constants\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Pricing</a>\\r\\n                </li>\\r\\n                \\r\\n                <li id=\\\"nav_form_customers\\\" class=\\\"form_nav\\\">\\r\\n                    <a>Contact List<span class=\\\"glyphicon glyphicon-chevron-down pull-right\\\"></span></a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_customers_irrigation\\\" class=\\\"form_submenu customers_submenu\\\" routerLink=\\\"/view-customers/2\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Irrigation/Maintenance</a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_customers_janitorial\\\" class=\\\"form_submenu customers_submenu\\\" routerLink=\\\"/view-customers/6\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Janitorial</a>\\r\\n                </li>\\r\\n                </ng-container>\\r\\n                \\r\\n                <!-- 12. Janitorial Manager -->\\r\\n                <ng-container *ngIf=\\\"roleId == '12'\\\">\\r\\n                <li id=\\\"nav_project_overview\\\" class=\\\"form_nav\\\" routerLink=\\\"/stock-transfer-statistics\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Project Overview</a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_materials\\\" class=\\\"form_nav\\\" routerLink=\\\"/view-materials/6\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Materials</a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_trucks\\\" class=\\\"form_nav\\\" routerLink=\\\"/view-containers/6\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Trucks</a>\\r\\n                </li>\\r\\n                </ng-container>\\r\\n                \\r\\n                <!-- 13. Porter -->\\r\\n                <ng-container *ngIf=\\\"roleId == '13'\\\">\\r\\n                <li id=\\\"nav_stock_transfer\\\" class=\\\"form_nav\\\" routerLink=\\\"/view-stock-transfer\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>Stock Transfers</a>\\r\\n                </li>\\r\\n                <li id=\\\"nav_app_updates\\\" class=\\\"form_nav\\\" routerLink=\\\"/app-updates\\\" routerLinkActive=\\\"active\\\">\\r\\n                    <a>App Updates</a>\\r\\n                </li>\\r\\n                </ng-container>\\r\\n                \\r\\n                <!-- General -->\\r\\n                <li id=\\\"nav_bugs\\\" class=\\\"form_nav\\\">\\r\\n\\t\\t\\t\\t\\t<a routerLink=\\\"/bug-report\\\" routerLinkActive=\\\"active\\\"><i class=\\\"fas fa-bug\\\"></i> Bug/Error Report</a>\\r\\n\\t\\t\\t\\t</li>\\r\\n            </ng-container>\\r\\n            </ul>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n<script>\\r\\n    //By default, hide all submenu\\r\\n\\t$( \\\".form_submenu\\\" ).toggle();\\r\\n</script>\"","import { Component, OnInit } from '@angular/core';\r\nimport { Formtype, Area, RolePermission } from 'process-smart-ng6-lib';\r\nimport { FormManagementService, AdministrationService, AuthenticationService } from 'process-smart-ng6-lib';\r\nimport { Router } from \"@angular/router\";\r\nimport { SharedService } from \"src/app/_services/shared.service\";\r\n\r\n@Component({\r\n  selector: 'app-dashboard-sidebar',\r\n  templateUrl: './dashboard-sidebar.component.html',\r\n  styleUrls: ['./dashboard-sidebar.component.css']\r\n})\r\nexport class DashboardSidebarComponent implements OnInit {\r\n    clientId: number;\r\n    formsList: Array<Formtype>;\r\n    authorizedFeatures: Array<string>;\r\n    authorizedForms: Array<Formtype>;\r\n    allowedList: Array<string>;\r\n    roleId: string;\r\n\r\n    // TODO: populate form types of this client\r\n  constructor(private fs: FormManagementService, private as: AdministrationService,\r\n          private aus: AuthenticationService, private router: Router,\r\n          private ssv: SharedService) {\r\n  }\r\n\r\n  ngOnInit() {\r\n      this.roleId = JSON.parse(localStorage.getItem('currentUser')).user.role_id;\r\n      \r\n      //Get counts for alert\r\n      this.ssv.countForm('wt_3','49',null,'3');\r\n      this.ssv.countForm('irf_3','47',null,'3');\r\n      this.ssv.countForm('wo_1','45',null,'1');\r\n      \r\n      this.retrieveFormtypes();\r\n      this.retrieveRolePermissions();\r\n      this.retrieveFormPermissions();\r\n  }\r\n\r\n  retrieveFormtypes(): void {\r\n      this.fs.getFormTypes()\r\n      .subscribe(itemsList => {\r\n          this.formsList = itemsList;\r\n          if(!this.authorizedForms && this.allowedList){\r\n              this.authorizedForms = itemsList.filter(x => this.allowedList.includes(x.id));\r\n          }\r\n          \r\n          //Remove refresh Count from localStorage\r\n          localStorage.removeItem(\"numRefresh\");\r\n        },\r\n        error => {\r\n            //Refresh once.\r\n            const numRefresh = localStorage.getItem(\"numRefresh\");\r\n            if(numRefresh){\r\n                if(+numRefresh >= 3){\r\n                    localStorage.removeItem(\"numRefresh\");\r\n                    this.router.navigate(['/login']);\r\n                }\r\n                else{\r\n                    localStorage.setItem(\"numRefresh\", \"\" + (+localStorage.getItem(\"numRefresh\") + 1));\r\n                 // @ts-ignore\r\n                    Android.reloadWebview();\r\n                    window.location.reload();\r\n                }\r\n            }\r\n            else {\r\n                localStorage.setItem(\"numRefresh\", \"1\");\r\n                \r\n             // @ts-ignore\r\n                Android.reloadWebview();\r\n                window.location.reload();\r\n            }\r\n        });\r\n  }\r\n\r\n  retrieveRolePermissions(): void {\r\n      this.aus.getRolePermissions(this.roleId)\r\n      .subscribe(itemsList => {\r\n          this.authorizedFeatures = itemsList.map(x => x.feature_id);\r\n    },\r\n    error => {\r\n    });\r\n  }\r\n  \r\n  retrieveFormPermissions(): void {\r\n      this.aus.getFormPermissions(this.roleId)\r\n      .subscribe(itemsList => {\r\n          this.allowedList = itemsList.map(x => x.form_type_id);\r\n          if(!this.authorizedForms && this.formsList){\r\n              this.authorizedForms = this.formsList.filter(x => this.allowedList.includes(x.id));\r\n          }\r\n    },\r\n    error => {\r\n    });\r\n  }\r\n  \r\n  countForm(formId){\r\n      return '';\r\n  }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Rhc2hib2FyZC10b3BiYXIvZGFzaGJvYXJkLXRvcGJhci5jb21wb25lbnQuY3NzIn0= */\"","module.exports = \"<div id=\\\"header_logo\\\" class=\\\"col-xs-3 col-sm-6\\\">\\r\\n    <div class=\\\"header_title row\\\">\\r\\n        <div class=\\\"col-xs-12 col-sm-3 col-lg-2 margin_top_15\\\">\\r\\n            <img src=\\\"./assets/images/nissho_logo_round.png\\\" class=\\\"nissho_logo\\\">\\r\\n        </div>\\r\\n        <div class=\\\"col-sm-9 col-lg-10 mobile_tablet_hidden white_text\\\">\\r\\n            <div class=\\\"row\\\">\\r\\n                <div class=\\\"col\\\">\\r\\n                    <h2>Nissho of California</h2>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"row\\\">\\r\\n                <div class=\\\"col header_small_text header_subtitle_role\\\">\\r\\n                Workflow Management System\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n<div class=\\\"col-xs-3 col-sm-3 white_text text-center\\\">\\r\\n    <div class=\\\"row\\\">\\r\\n        <div class=\\\"col\\\">\\r\\n            <h2 *ngIf=\\\"user\\\">Hello, {{user.name}}</h2>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"row mobile_hidden\\\">\\r\\n        <div *ngIf=\\\"user\\\" class=\\\"col header_small_text\\\">\\r\\n            {{user.role}}\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n<div class=\\\"col-xs-6 col-sm-3 text-right white_text pad_right_30\\\">\\r\\n    <h2 class=\\\"header_content_height\\\">\\r\\n    \\t<a id=\\\"topbar_refresh\\\" class=\\\"glyphicon glyphicon-refresh pad_right_30 topbar_button hidden-lg\\\" (click)=\\\"onRefresh()\\\"></a>\\r\\n    \\t<a routerLink=\\\"/form-employee/{{user.uid}}\\\" routerLinkActive=\\\"active\\\" id=\\\"topbar_profile\\\" class=\\\"pad_right_30 topbar_button\\\">\\r\\n        \\t<span class=\\\"glyphicon glyphicon-user\\\"></span>\\r\\n        \\t<span class=\\\"hidden-xs hidden-sm\\\"> My Profile</span>\\r\\n       \\t</a>\\r\\n        <a [routerLink]=\\\"['/login']\\\" class=\\\"topbar_button\\\" id=\\\"topbar_logout\\\">\\r\\n        \\t<span class=\\\"glyphicon glyphicon-log-out\\\"></span>\\r\\n        \\t<span class=\\\"hidden-xs hidden-sm\\\"> Logout</span>\\r\\n       \\t</a>\\r\\n    </h2>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { User } from 'process-smart-ng6-lib';\r\nimport { AuthenticationService } from 'process-smart-ng6-lib';\r\n\r\n@Component({\r\n  selector: 'app-dashboard-topbar',\r\n  templateUrl: './dashboard-topbar.component.html',\r\n  styleUrls: ['./dashboard-topbar.component.css']\r\n})\r\nexport class DashboardTopbarComponent implements OnInit {\r\n\r\n    user: any;\r\n\r\n  constructor(private auts: AuthenticationService) {\r\n  }\r\n\r\n  ngOnInit() {\r\n      this.user = JSON.parse(localStorage.getItem('currentUser')).user;\r\n      this.setRole(this.user.role_id);\r\n  }\r\n\r\n  setRole(rid: string) {\r\n    this.auts.getRole(rid)\r\n        .subscribe(role => this.user.role = role.title);\r\n  }\r\n\r\n  onRefresh(){\r\n      var userAgent = window.navigator.userAgent.toLowerCase(),\r\n      safari = /safari/.test( userAgent ),\r\n      ios = /iphone|ipod|ipad/.test( userAgent );\r\n      \r\n      if( ios ) {\r\n          window.location.reload();\r\n      } else {\r\n       // @ts-ignore\r\n          Android.reloadWebview();\r\n      };\r\n  }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Rhc2hib2FyZC9kYXNoYm9hcmQuY29tcG9uZW50LmNzcyJ9 */\"","module.exports = \"<div class=\\\"noscroll container-fluid\\\">\\r\\n\\t<!-- GLOBAL MODALS -->\\r\\n\\t<div class=\\\"modal\\\" id=\\\"uploadFormModal\\\" tabindex=\\\"-1\\\" [ngStyle]=\\\"{'display':ssv.uploadModalActive}\\\">\\r\\n\\t  <div class=\\\"modal-dialog\\\" role=\\\"document\\\" [ngStyle]=\\\"{'display':ssv.uploadModalActive}\\\">\\r\\n\\t    <div class=\\\"modal-content\\\">\\r\\n\\t      <div class=\\\"modal-header text-center\\\">\\r\\n\\t      \\t<h4 class=\\\"modal-title\\\"><b>Just a moment</b></h4>\\r\\n\\t      </div>\\r\\n\\t      <div class=\\\"modal-body text-center margin_top_15 margin_bottom_15\\\">\\r\\n         \\tSaving your form...\\r\\n\\t      </div>\\r\\n\\t    </div><!-- /.modal-content -->\\r\\n\\t  </div><!-- /.modal-dialog -->\\r\\n\\t</div><!-- /.modal -->\\r\\n\\t\\r\\n    <!-- TOPBAR -->\\r\\n    <div id=\\\"header_row\\\" class=\\\"row\\\">\\r\\n        <app-dashboard-topbar></app-dashboard-topbar>\\r\\n    </div>\\r\\n    <div class=\\\"row\\\">\\r\\n        <!-- SIDEBAR -->\\r\\n        <div id=\\\"dashboard_nav\\\" class=\\\"col-xs-12 col-sm-3\\\">\\r\\n            <app-dashboard-sidebar></app-dashboard-sidebar>\\r\\n        </div>\\r\\n        <!-- CONTENT -->\\r\\n        <div id=\\\"dashboard_content\\\" class=\\\"col-xs-12 col-sm-9\\\">\\r\\n            <div id=\\\"suc_msg\\\" *ngIf=\\\"success\\\" class=\\\"alert alert-success alert-dismissable text-center\\\">\\r\\n                <a class=\\\"close\\\" onclick=\\\"$('#suc_msg').hide()\\\">&times;</a>\\r\\n                <strong>{{success}}</strong>\\r\\n            </div>\\r\\n            <div id=\\\"err_msg\\\" *ngIf=\\\"error\\\" class=\\\"alert alert-danger alert-dismissable text-center\\\">\\r\\n            \\t<a class=\\\"close\\\" onclick=\\\"$('#err_msg').hide()\\\">&times;</a>\\r\\n                <strong>{{error}}</strong>\\r\\n            </div>\\r\\n            <router-outlet></router-outlet>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\"","import { Component, OnInit, OnDestroy, HostListener } from '@angular/core';\r\nimport { User } from 'process-smart-ng6-lib';\r\nimport { UserIdleService } from 'angular-user-idle';\r\nimport { Router } from '@angular/router';\r\nimport { AuthenticationService } from 'process-smart-ng6-lib';\r\nimport { SharedService } from '../_services/shared.service';\r\n\r\n@Component({\r\n  selector: 'app-dashboard',\r\n  templateUrl: './dashboard.component.html',\r\n  styleUrls: ['./dashboard.component.css']\r\n})\r\nexport class DashboardComponent implements OnInit, OnDestroy {\r\n    session: any;\r\n\r\n  constructor(private userIdle: UserIdleService, private router: Router, \r\n          private auth: AuthenticationService, public ssv: SharedService) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    // Check session. Redirect to login page if it doesn't exist\r\n    if (!localStorage.getItem('currentUser')) {\r\n        this.auth.logout();\r\n        this.router.navigate(['/login']);\r\n        return;\r\n    }\r\n    this.session = JSON.parse(localStorage.getItem('currentUser'));\r\n\r\n      // Start watching for user inactivity.\r\n    this.userIdle.startWatching();\r\n\r\n    // Start watching when user idle is starting.\r\n    this.userIdle.onTimerStart().subscribe((count) => {\r\n        // if (!this.inactiveUser) {\r\n        //     this.inactiveUser = true;\r\n        //     this.popupTimeoutWarning();\r\n        // }\r\n    });\r\n\r\n    // Logs out when time is up.\r\n    this.userIdle.onTimeout().subscribe(() => {\r\n        // remove user from local storage to log user out\r\n        this.auth.logout();\r\n        this.router.navigate(['/login']);\r\n    });\r\n\r\n    // Send a keepalive request every 10 minutes\r\n    this.userIdle.ping$.subscribe(() => {\r\n        // Check session. Redirect to login page if it doesn't exist\r\n        if (localStorage.getItem('currentUser') === null) {\r\n            this.auth.logout();\r\n            this.router.navigate(['/login']);\r\n        }\r\n        // Keepalive using getrole() request\r\n        this.auth.getRole(this.session.user.role_id).subscribe(role => {}, error => {\r\n            this.auth.logout();\r\n            this.router.navigate(['/login']);\r\n        });\r\n    });\r\n    \r\n    // Open default page based on role\r\n    switch(this.session.user.role_id){\r\n    //Admin\r\n    case 1: this.router.navigate(['/view-employees']); break;\r\n    //Management/VP (Tom), Maintenance Project manager\r\n    case 2:\r\n    case 3: this.router.navigate(['/view-walkthrough/2']); break;\r\n    //Office Manager (Kalyn), Customer Service (Ayla)\r\n    case 5:\r\n    case 7: this.router.navigate(['/view-walkthrough/3']); break;\r\n    //Irrigation Manager (Dan)\r\n    case 4: this.router.navigate(['/view-irrigation-repair/2']); break;\r\n    //Irrigation Technician\r\n    case 6: this.router.navigate(['/view-irrigation-repair/1']); break;\r\n    //Irrigation Staff (Jose Reyes)\r\n    case 21: this.router.navigate(['/view-irrigation-repair/3']); break;\r\n    //Purchasing Staff, Construction Office Staff\r\n    case 8:\r\n    case 11: this.router.navigate(['/view-purchase-order']); break;\r\n    //Accounting Staff\r\n    case 9: this.router.navigate(['/view-work-order']); break;\r\n    //Construction PM\r\n    case 10: this.router.navigate(['/view-c-work-order']); break;\r\n    //Janitorial Manager\r\n    case 12: this.router.navigate(['/view-materials/6']); break;\r\n    //Porter\r\n    case 13: this.router.navigate(['/view-stock-transfer/1']); break;\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n      this.userIdle.stopTimer();\r\n      this.userIdle.stopWatching();\r\n  }\r\n\r\n  @HostListener('document:click')\r\n  clicked() {\r\n    this.userIdle.stopTimer();\r\n  }\r\n\r\n  get success() {\r\n    return this.ssv.sharedNode.success;\r\n  }\r\n\r\n  get error() {\r\n    return this.ssv.sharedNode.error;\r\n  }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Zvcm1zL2ZpbGwvaXJyaWdhdGlvbi1yZXBhaXItcGFydHMvaXJyaWdhdGlvbi1yZXBhaXItcGFydHMuY29tcG9uZW50LmNzcyJ9 */\"","module.exports = \"<div class=\\\"container-fluid\\\">\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<div class=\\\"col-xs-12 text-left\\\">\\r\\n\\t\\t\\t<h3><a (click)=\\\"onSubmit()\\\" class=\\\"back_btn\\\"><span class=\\\"glyphicon glyphicon-chevron-left\\\"></span>{{FN_BACK_TO_FORM}}</a></h3>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n    <div class=\\\"row\\\">\\r\\n        <div class=\\\"col-xs-12\\\">\\r\\n        \\t<form (ngSubmit)=\\\"onSubmit()\\\" #nisshoForm=\\\"ngForm\\\">\\r\\n            <h2 style=\\\"margin-top:50px;\\\">\\r\\n                <span class=\\\"form_title\\\">{{FN_IRRIGATION_PARTS}}</span>\\r\\n            </h2>\\r\\n                <div class=\\\"form-group\\\" id=\\\"materials_container\\\">\\r\\n                   <label class=\\\"group_label_text\\\">{{FN_MATERIAL_USED}}</label>\\r\\n              \\t\\t<div class=\\\"row\\\" *ngFor=\\\"let mat of matList; let i = index\\\">\\r\\n              \\t\\t\\t<div class=\\\"col-xs-7 col-sm-7 pad_right_5\\\">\\r\\n          \\t\\t\\t\\t\\t<input type=\\\"text\\\" id=\\\"matname{{i}}\\\" class='form-control' autocomplete=\\\"off\\\" placeholder=\\\"{{FN_SEARCH_ITEM}}\\\"\\r\\n          \\t\\t\\t\\t\\t (input)=\\\"searchItem($event.target.value,i)\\\" value=\\\"{{getMaterialName(mat.material_id)}}\\\"/>\\r\\n          \\t\\t\\t\\t\\t<input type=\\\"hidden\\\" name=\\\"material{{i}}\\\" [(ngModel)]=\\\"mat.material_id\\\" required/>\\r\\n          \\t\\t\\t\\t\\t<div *ngIf=\\\"currFocus == i\\\" id=\\\"mat_suggestions{{i}}\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"search_suggestion_entry\\\" *ngFor=\\\"let sugg_part of suggestedPartsList\\\" (click)=\\\"onSuggestionSelected(i,sugg_part.id,sugg_part.description,sugg_part.price)\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<b>[{{sugg_part.id}}]</b> {{sugg_part.description}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n              \\t\\t\\t</div>\\r\\n              \\t\\t\\t<div class=\\\"col-xs-3 col-sm-3 pad_right_5 pad_left_none\\\">\\r\\n              \\t\\t\\t\\t<input type=\\\"text\\\" class='form-control' name=\\\"quantity{{i}}\\\" [(ngModel)]=\\\"mat.quantity\\\" placeholder=\\\"{{FN_QUANTITY}}\\\" required/>\\r\\n              \\t\\t\\t</div>\\r\\n              \\t\\t\\t<div class=\\\"col-xs-2 col-sm-2 pad_left_none\\\">\\r\\n             \\t\\t\\t\\t<a type=\\\"text\\\" class='btn btn-danger pull-right x_button' (click)=\\\"onDeleteMaterial(i)\\\">X</a>\\r\\n             \\t\\t\\t</div>\\r\\n              \\t\\t</div>\\r\\n               </div>\\r\\n               <div class=\\\"form-group row margin_top_15 margin_bottom_form\\\">\\r\\n                    <div class=\\\"col-xs-12 col-sm-12\\\">\\r\\n                        <a id=\\\"ladd_row\\\" class=\\\"btn btn-default pull-left\\\" (click)=\\\"addMaterial()\\\"><b>+{{FN_ADD_MATERIAL}}</b></a>\\r\\n                    </div>\\r\\n               \\t</div>\\r\\n            </form>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { Form, Material, FormManagementService, InventoryManagementService } from \"process-smart-ng6-lib\";\r\nimport { ActivatedRoute } from \"@angular/router\";\r\nimport { SharedService } from \"src/app/_services/shared.service\";\r\nimport { Router } from \"@angular/router\";\r\n\r\n@Component({\r\n  selector: 'app-irrigation-repair-parts',\r\n  templateUrl: './irrigation-repair-parts.component.html',\r\n  styleUrls: ['./irrigation-repair-parts.component.css']\r\n})\r\nexport class IrrigationRepairPartsComponent implements OnInit {\r\n    formId: string;\r\n    typeId = '47';\r\n    model: Form;\r\n    fillerUid: string;\r\n    clientId: string;\r\n    partsList: Array<Material>;     //List of all parts\r\n    suggestedPartsList: Array<Material>;   //Filtered list of parts\r\n    currFocus: number;  //Index of item currently being focused\r\n    matList: Array<any>;    //List of used parts (with select properties)\r\n    \r\n  constructor(private route: ActivatedRoute, private fms: FormManagementService,\r\n          private ssv: SharedService, private ims: InventoryManagementService, \r\n          private router: Router) { }\r\n\r\n  ngOnInit() {\r\n      this.initFieldNames();\r\n      this.getPartsList();\r\n      \r\n      this.route.params.subscribe(params => {\r\n          this.formId = params['formId'];\r\n          \r\n          if(this.formId){\r\n              //Load Form\r\n              this.getModel();\r\n          }\r\n          else {\r\n              //Form does not exist\r\n              this.router.navigate(['/'])\r\n          }\r\n      });\r\n  }\r\n  \r\n  onSubmit() {\r\n      if(this.model.process_number == '3'){\r\n          this.router.navigate(['/irrigation-repair/'+this.formId]);\r\n          return;\r\n      }\r\n      \r\n      //Validate & Collect all materials\r\n      this.matList.forEach(x => x.quantity? x.quantity : x.quantity = '1');\r\n      this.model.inputTables.materials = this.matList;\r\n      \r\n      //Upload form data to DB\r\n      if(this.formId){\r\n          //Update an existing form\r\n          this.fms.updateForm(this.model, this.typeId, this.formId)\r\n          .subscribe(\r\n              data => {\r\n                  this.ssv.showSuccess('Form successfully updated!');\r\n                  this.router.navigate(['/irrigation-repair/'+this.formId]);\r\n                },\r\n                error => {\r\n                    // Display error message\r\n                    this.ssv.showError('Unable to update form!');\r\n                }\r\n          );\r\n      }\r\n      else{\r\n        //Form does not exist\r\n          this.router.navigate(['/'])\r\n      }\r\n    }\r\n  \r\n  getModel() {\r\n      this.fms.getForm(this.typeId, this.formId)\r\n        .subscribe(model => {\r\n            model.created_date = this.toHtmlDate(model.created_date);\r\n            model.last_modified_date = this.toHtmlDate(null);\r\n            this.model = model;\r\n            this.matList = model.inputTables.materials;\r\n        });\r\n  }\r\n  \r\n//MULTI INPUT FIELDS    \r\n  addMaterial() {\r\n      const mat : WO_Material = {'form_id': this.typeId,'material_id':'0'};\r\n      if(!this.matList){\r\n          this.matList = [];\r\n      }\r\n      this.matList.push(mat);\r\n  }\r\n  \r\n  onDeleteMaterial(itemIdx : number){\r\n      let deletedItem = this.matList[itemIdx];\r\n      this.matList.splice(itemIdx, 1);\r\n      this.suggestedPartsList = [];\r\n      \r\n      //Delete from server\r\n      let inputMap = {\"inputMap\": deletedItem};\r\n      this.fms.deleteMultiInput(inputMap, this.typeId, 'materials', 'material_id')\r\n          .subscribe(data => {}, error => {console.log(error)});\r\n  }\r\n  \r\n  //MATERIAL SEARCH\r\n  getPartsList() {\r\n      this.ims.getMaterials('1')\r\n        .subscribe(list => {\r\n            this.partsList = list;\r\n        });\r\n  }\r\n  \r\n  /**\r\n   * When a suggestion is selected, assign part ID to matList at position == itemNum\r\n   * Empty out suggestions for future use\r\n   * @param itemNum\r\n   */\r\n  onSuggestionSelected(itemNum : number, matId, matName: string) {\r\n      this.matList[itemNum].material_id = \"\"+matId;\r\n      (<HTMLInputElement> document.getElementById('matname'+itemNum)).value = matName;\r\n      this.suggestedPartsList = [];\r\n  }\r\n  \r\n  searchItem(input: string, itemIdx: number) {\r\n      this.currFocus = itemIdx;\r\n      if(!input){\r\n          this.suggestedPartsList = [];\r\n          return;\r\n      }\r\n      if (this.partsList) {\r\n        this.suggestedPartsList = this.partsList.filter(x => \r\n            (x.description.toLowerCase().includes(input.toLowerCase())) ||\r\n            (x.id == input));\r\n      }\r\n    }\r\n  \r\n  getMaterialName(matId: string) : string {\r\n      if(this.partsList){\r\n          const part = this.partsList.find(x => x.id == matId);\r\n          if(part){\r\n              return part.description;\r\n          }\r\n      }\r\n      return '';\r\n  }\r\n  \r\n  toHtmlDate(datestr : string){\r\n      let date;\r\n      if(datestr){\r\n          date = new Date(datestr);\r\n      }\r\n      else{\r\n          date = new Date();\r\n      } \r\n      const dd = date.getDate() < 10 ? '0' + date.getDate() : date.getDate();\r\n      const mm = date.getMonth() < 9 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1;\r\n      const yyyy = date.getFullYear();\r\n      \r\n      return yyyy + '-' + mm + '-' + dd;\r\n  }\r\n\r\n  //LANGUAGE SUPPORT\r\n  FN_BACK_TO_FORM = \"Back to Form\";\r\n  FN_MATERIAL = \"Material\";\r\n  FN_MATERIAL_USED = \"Materials Used\";\r\n  FN_ADD_MATERIAL = \"Add Material\";\r\n  FN_QUANTITY = \"qty\";\r\n  FN_SEARCH_ITEM = \"Search part...\";\r\n  FN_IRRIGATION_PARTS = \"Irrigation Parts\";\r\n  \r\n  initFieldNames(){\r\n      const language = JSON.parse(localStorage.getItem('currentUser')).user.language_preference;\r\n      console.log('Language is '+language);\r\n      if(language === 'es'){\r\n          this.FN_BACK_TO_FORM = \"Regresar al Formulario\";\r\n          this.FN_MATERIAL = \"Materiales\";\r\n          this.FN_MATERIAL_USED = \"Materiales Utilizado\";\r\n          this.FN_ADD_MATERIAL = \"Aadir Materiales\";\r\n          this.FN_QUANTITY = \"Cantidad\";\r\n          this.FN_SEARCH_ITEM = \"Buscar...\";\r\n          this.FN_IRRIGATION_PARTS = \"Partes de Irrigacin\";\r\n      }\r\n  }\r\n  \r\n  //DIAGNOSTIC\r\n  get mdiagnostic() { return JSON.stringify(this.matList); }\r\n}\r\n","module.exports = \"label, .form_title {\\r\\n\\tfont-weight: bold;\\r\\n}\\r\\n\\r\\nlabel.radio-inline {\\r\\n\\tfont-weight: normal;\\r\\n}\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZm9ybXMvZmlsbC9pcnJpZ2F0aW9uLXJlcGFpci9pcnJpZ2F0aW9uLXJlcGFpci5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0NBQ0MsaUJBQWlCO0FBQ2xCOztBQUVBO0NBQ0MsbUJBQW1CO0FBQ3BCIiwiZmlsZSI6InNyYy9hcHAvZm9ybXMvZmlsbC9pcnJpZ2F0aW9uLXJlcGFpci9pcnJpZ2F0aW9uLXJlcGFpci5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsibGFiZWwsIC5mb3JtX3RpdGxlIHtcclxuXHRmb250LXdlaWdodDogYm9sZDtcclxufVxyXG5cclxubGFiZWwucmFkaW8taW5saW5lIHtcclxuXHRmb250LXdlaWdodDogbm9ybWFsO1xyXG59Il19 */\"","module.exports = \"<div class=\\\"container-fluid\\\">\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<div class=\\\"col-xs-6 text-left\\\">\\r\\n\\t\\t\\t<h3><a (click)=\\\"onSubmitBack()\\\" class=\\\"back_btn\\\">\\r\\n\\t\\t\\t<span class=\\\"glyphicon glyphicon-chevron-left\\\"></span> {{FN_SAVE_BACK}}\\r\\n\\t\\t\\t</a></h3>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"col-xs-6 text-right\\\">\\r\\n\\t\\t\\t<h3><a (click)=\\\"onSubmitPartsList()\\\" class=\\\"back_btn\\\">\\r\\n\\t\\t\\t{{FN_PARTS_USED}} <span class=\\\"glyphicon glyphicon-chevron-right\\\"></span>\\r\\n\\t\\t\\t</a></h3>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n   <div class=\\\"row\\\">\\r\\n       <div class=\\\"col-xs-12\\\">\\r\\n       \\t<form (ngSubmit)=\\\"onSubmit()\\\" #nisshoForm=\\\"ngForm\\\">\\r\\n           <h2 style=\\\"margin-top:50px;\\\" class=\\\"text-center\\\">\\r\\n                <span class=\\\"form_title\\\">{{FN_TITLE}}</span>\\r\\n            </h2>\\r\\n            \\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <label class=\\\"group_label_text\\\">{{FN_JOB_INFO}}</label>\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-sm-12 col-xs-12\\\">\\r\\n                            <label for=\\\"csr_num\\\">CSR #</label>\\r\\n                            <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"csr_num\\\" name=\\\"csr_num\\\" [(ngModel)]=\\\"model.inputMap.csr_num\\\">\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-sm-12 col-xs-12\\\">\\r\\n                            <label for=\\\"job_num\\\">Job #</label>\\r\\n                            <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"job_num\\\" name=\\\"job_num\\\" [(ngModel)]=\\\"model.inputMap.job_num\\\">\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-sm-12 col-xs-12\\\">\\r\\n                            <label for=\\\"tech_name\\\">{{FN_TECH_NAME}}*</label>\\r\\n                            <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"tech_name\\\" name=\\\"tech_name\\\" [(ngModel)]=\\\"model.inputMap.tech_name\\\" required>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-sm-12 col-xs-12\\\">\\r\\n                            <label for=\\\"job_name\\\">{{FN_JOB_NAME}}*</label>\\r\\n                            <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"job_name\\\" name=\\\"job_name\\\" [(ngModel)]=\\\"model.inputMap.job_name\\\" required>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-sm-12 col-xs-12\\\">\\r\\n                            <label for=\\\"job_location\\\">{{FN_JOB_LOCATION}}*</label>\\r\\n                            <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"job_location\\\" name=\\\"job_location\\\" [(ngModel)]=\\\"model.inputMap.job_location\\\" required>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <label class=\\\"group_label_text\\\">{{FN_WORK_HOURS}}</label>\\r\\n                    <div class=\\\"row\\\">\\r\\n                    \\t<div class=\\\"col-sm-4 col-xs-12\\\">\\r\\n                            <label for=\\\"date\\\">{{FN_DATE}}*</label>\\r\\n                            <input type=\\\"date\\\" class=\\\"form-control\\\" id=\\\"date\\\" name=\\\"date\\\" [(ngModel)]=\\\"model.inputMap.date\\\" required>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-sm-6 col-xs-6\\\">\\r\\n                            <label for=\\\"start_time\\\">{{FN_START_TIME}}*</label>\\r\\n                            <input type=\\\"time\\\" autocomplete=\\\"off\\\" class=\\\"form-control\\\" name=\\\"start_time\\\" [(ngModel)]=\\\"model.inputMap.start_time\\\" required>\\r\\n                        </div>\\r\\n                        <div class=\\\"col-sm-6 col-xs-6\\\">\\r\\n                            <label for=\\\"end_time\\\">{{FN_END_TIME}}*</label>\\r\\n                            <input type=\\\"time\\\" autocomplete=\\\"off\\\" class=\\\"form-control\\\" name=\\\"end_time\\\" [(ngModel)]=\\\"model.inputMap.end_time\\\" required>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-sm-4 col-xs-4 pad_right_5\\\">\\r\\n                            <label for=\\\"tech_hours\\\">{{FN_TECH_HOURS}}</label>\\r\\n                            <input type=\\\"text\\\" autocomplete=\\\"off\\\" class=\\\"form-control\\\" id=\\\"tech_hours\\\" name=\\\"tech_hours\\\" [(ngModel)]=\\\"model.inputMap.tech_hours\\\">\\r\\n                        </div>\\r\\n                        <div class=\\\"col-sm-4 col-xs-4 pad_left_none pad_right_5\\\">\\r\\n                            <label for=\\\"ot_hours\\\">{{FN_OT_HOURS}}</label>\\r\\n                            <input type=\\\"text\\\" autocomplete=\\\"off\\\" class=\\\"form-control\\\" id=\\\"ot_hours\\\" name=\\\"ot_hours\\\" [(ngModel)]=\\\"model.inputMap.ot_hours\\\">\\r\\n                        </div>\\r\\n                        <div class=\\\"col-sm-4 col-xs-4 pad_left_none\\\">\\r\\n                            <label for=\\\"labor_hours\\\">{{FN_LABOR_HOURS}}</label>\\r\\n                            <input type=\\\"text\\\" autocomplete=\\\"off\\\" class=\\\"form-control\\\" id=\\\"labor_hours\\\" name=\\\"labor_hours\\\" [(ngModel)]=\\\"model.inputMap.labor_hours\\\">\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n                \\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <label class=\\\"group_label_text\\\">{{FN_WORK_DETAILS}}</label>\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-sm-12 col-xs-12\\\">\\r\\n                            <label for=\\\"problem\\\">{{FN_PROBLEM}}*</label>\\r\\n                            <textarea class=\\\"form-control\\\" id=\\\"problem\\\" name=\\\"problem\\\" [(ngModel)]=\\\"model.inputMap.problem\\\" required></textarea>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-sm-12 col-xs-12\\\">\\r\\n                            <label for=\\\"repair_made\\\">{{FN_REPAIR_MADE}}*</label>\\r\\n                            <textarea class=\\\"form-control\\\" id=\\\"repair_made\\\" name=\\\"repair_made\\\" [(ngModel)]=\\\"model.inputMap.repair_made\\\" required></textarea>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\">\\r\\n                \\t\\t<div class=\\\"col-xs-12 col-sm-12\\\">\\r\\n               \\t\\t\\t\\t<label for=\\\"wo_image\\\">{{ADD_PICS}}</label>\\r\\n               \\t\\t\\t</div>\\r\\n               \\t\\t\\t<!-- Attachment 1 -->\\r\\n               \\t\\t\\t<div *ngIf=\\\"model.inputMap.attachment1 && !attachment1\\\" class=\\\"col-xs-12 col-sm-6 col-md-4\\\">\\r\\n               \\t\\t\\t\\t<img src=\\\"{{getS3FormPicUrl(model.inputMap.attachment1)}}\\\" class=\\\"uploaded_img img-responsive\\\">\\r\\n               \\t\\t\\t</div>\\r\\n               \\t\\t\\t<div *ngIf=\\\"!model.inputMap.attachment1 || attachment1\\\" class=\\\"col-xs-12 col-sm-6 col-md-4\\\">\\r\\n               \\t\\t\\t\\t<input type=\\\"file\\\" class=\\\"form-control\\\" accept=\\\"image/*\\\" #attachment1 (change)=\\\"onFileAdded(attachment1.files,1)\\\">\\r\\n               \\t\\t\\t</div>\\r\\n               \\t\\t\\t<!-- Attachment 2 -->\\r\\n               \\t\\t\\t<div *ngIf=\\\"model.inputMap.attachment2 && !attachment2\\\" class=\\\"col-xs-12 col-sm-6 col-md-4\\\">\\r\\n               \\t\\t\\t\\t<img src=\\\"{{getS3FormPicUrl(model.inputMap.attachment2)}}\\\" class=\\\"uploaded_img img-responsive\\\">\\r\\n               \\t\\t\\t</div>\\r\\n               \\t\\t\\t<div *ngIf=\\\"!model.inputMap.attachment2 || attachment2\\\" class=\\\"col-xs-12 col-sm-6 col-md-4\\\">\\r\\n               \\t\\t\\t\\t<input type=\\\"file\\\" class=\\\"form-control\\\" accept=\\\"image/*\\\" #attachment2 (change)=\\\"onFileAdded(attachment2.files,2)\\\">\\r\\n               \\t\\t\\t</div>\\r\\n               \\t\\t\\t<!-- Attachment 3 -->\\r\\n               \\t\\t\\t<div *ngIf=\\\"model.inputMap.attachment3 && !attachment3\\\" class=\\\"col-xs-12 col-sm-6 col-md-4\\\">\\r\\n               \\t\\t\\t\\t<img src=\\\"{{getS3FormPicUrl(model.inputMap.attachment3)}}\\\" class=\\\"uploaded_img img-responsive\\\">\\r\\n               \\t\\t\\t</div>\\r\\n               \\t\\t\\t<div *ngIf=\\\"!model.inputMap.attachment3 || attachment3\\\" class=\\\"col-xs-12 col-sm-6 col-md-4\\\">\\r\\n               \\t\\t\\t\\t<input type=\\\"file\\\" class=\\\"form-control\\\" accept=\\\"image/*\\\" #attachment3 (change)=\\\"onFileAdded(attachment3.files,3)\\\">\\r\\n               \\t\\t\\t</div>\\r\\n               \\t\\t\\t<!-- Attachment 4 -->\\r\\n               \\t\\t\\t<div *ngIf=\\\"model.inputMap.attachment4 && !attachment4\\\" class=\\\"col-xs-12 col-sm-6 col-md-4\\\">\\r\\n               \\t\\t\\t\\t<img src=\\\"{{getS3FormPicUrl(model.inputMap.attachment4)}}\\\" class=\\\"uploaded_img img-responsive\\\">\\r\\n               \\t\\t\\t</div>\\r\\n               \\t\\t\\t<div *ngIf=\\\"!model.inputMap.attachment4 || attachment4\\\" class=\\\"col-xs-12 col-sm-6 col-md-4\\\">\\r\\n               \\t\\t\\t\\t<input type=\\\"file\\\" class=\\\"form-control\\\" accept=\\\"image/*\\\" #attachment4 (change)=\\\"onFileAdded(attachment4.files,4)\\\">\\r\\n               \\t\\t\\t</div>\\r\\n               \\t\\t\\t<!-- Attachment 5 -->\\r\\n               \\t\\t\\t<div *ngIf=\\\"model.inputMap.attachment5 && !attachment5\\\" class=\\\"col-xs-12 col-sm-6 col-md-4\\\">\\r\\n               \\t\\t\\t\\t<img src=\\\"{{getS3FormPicUrl(model.inputMap.attachment5)}}\\\" class=\\\"uploaded_img img-responsive\\\">\\r\\n               \\t\\t\\t</div>\\r\\n               \\t\\t\\t<div *ngIf=\\\"!model.inputMap.attachment5 || attachment5\\\" class=\\\"col-xs-12 col-sm-6 col-md-4\\\">\\r\\n               \\t\\t\\t\\t<input type=\\\"file\\\" class=\\\"form-control\\\" accept=\\\"image/*\\\" #attachment5 (change)=\\\"onFileAdded(attachment5.files,5)\\\">\\r\\n               \\t\\t\\t</div>\\r\\n                \\t</div>\\r\\n                </div>\\r\\n                \\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-xs-12 col-sm-6\\\">\\r\\n                            <label for=\\\"emergency_call\\\">{{FN_EMERGENCY_CALL}}</label>\\r\\n                            <div id=\\\"emergency_call\\\" class=\\\"form-check form-check-inline\\\">\\r\\n                            \\t<label class=\\\"radio-inline\\\" style=\\\"margin-top:0;\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"radio\\\" name=\\\"emergency_call\\\" value=\\\"1\\\" [(ngModel)]=\\\"model.inputMap.emergency_call\\\"> {{FN_YES}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"radio-inline\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"radio\\\" name=\\\"emergency_call\\\" value=\\\"0\\\" [(ngModel)]=\\\"model.inputMap.emergency_call\\\"> {{FN_NO}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                        <div class=\\\"col-xs-12 col-sm-6\\\">\\r\\n                            <label for=\\\"on_checklist\\\">{{FN_ON_CHECKLIST}}</label>\\r\\n                            <div id=\\\"on_checklist\\\" class=\\\"form-check form-check-inline\\\">\\r\\n                            \\t<label class=\\\"radio-inline\\\" style=\\\"margin-top:0;\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"radio\\\" name=\\\"on_checklist\\\" value=\\\"1\\\" [(ngModel)]=\\\"model.inputMap.on_checklist\\\"> {{FN_YES}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"radio-inline\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"radio\\\" name=\\\"on_checklist\\\" value=\\\"0\\\" [(ngModel)]=\\\"model.inputMap.on_checklist\\\"> {{FN_NO}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-xs-12 col-sm-6\\\">\\r\\n                            <label for=\\\"nissho_area\\\">{{FN_NISSHO_AREA}}</label>\\r\\n                            <div id=\\\"nissho_area\\\" class=\\\"form-check form-check-inline\\\">\\r\\n                            \\t<label class=\\\"radio-inline\\\" style=\\\"margin-top:0;\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"radio\\\" name=\\\"nissho_area\\\" value=\\\"1\\\" [(ngModel)]=\\\"model.inputMap.nissho_area\\\"> {{FN_YES}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"radio-inline\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"radio\\\" name=\\\"nissho_area\\\" value=\\\"0\\\" [(ngModel)]=\\\"model.inputMap.nissho_area\\\"> {{FN_NO}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                        <div class=\\\"col-xs-12 col-sm-6\\\">\\r\\n                            <label for=\\\"customer_service_call\\\">{{FN_CS_CALL}}</label>\\r\\n                            <div id=\\\"customer_service_call\\\" class=\\\"form-check form-check-inline\\\">\\r\\n                            \\t<label class=\\\"radio-inline\\\" style=\\\"margin-top:0;\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"radio\\\" name=\\\"customer_service_call\\\" value=\\\"1\\\" [(ngModel)]=\\\"model.inputMap.customer_service_call\\\"> {{FN_YES}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"radio-inline\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"radio\\\" name=\\\"customer_service_call\\\" value=\\\"0\\\" [(ngModel)]=\\\"model.inputMap.customer_service_call\\\"> {{FN_NO}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-xs-12 col-sm-6\\\">\\r\\n                            <label for=\\\"legend_in_controllers\\\">{{FN_LEGEND_IN}}</label>\\r\\n                            <div id=\\\"legend_in_controllers\\\" class=\\\"form-check form-check-inline\\\">\\r\\n                            \\t<label class=\\\"radio-inline\\\" style=\\\"margin-top:0;\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"radio\\\" name=\\\"legend_in_controllers\\\" value=\\\"1\\\" [(ngModel)]=\\\"model.inputMap.legend_in_controllers\\\"> {{FN_YES}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"radio-inline\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"radio\\\" name=\\\"legend_in_controllers\\\" value=\\\"0\\\" [(ngModel)]=\\\"model.inputMap.legend_in_controllers\\\"> {{FN_NO}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                        <div class=\\\"col-xs-12 col-sm-6\\\">\\r\\n                            <label for=\\\"chart_in_controllers\\\">{{FN_CHART_IN}}</label>\\r\\n                            <div id=\\\"chart_in_controllers\\\" class=\\\"form-check form-check-inline\\\">\\r\\n\\t\\t\\t\\t\\t              <label class=\\\"radio-inline\\\" style=\\\"margin-top:0;\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"radio\\\" name=\\\"chart_in_controllers\\\" value=\\\"1\\\" [(ngModel)]=\\\"model.inputMap.chart_in_controllers\\\"> {{FN_YES}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"radio-inline\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"radio\\\" name=\\\"chart_in_controllers\\\" value=\\\"0\\\" [(ngModel)]=\\\"model.inputMap.chart_in_controllers\\\"> {{FN_NO}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-xs-12 col-sm-6\\\">\\r\\n                            <label for=\\\"job_complete\\\">{{FN_JOB_COMPLETE}}</label>\\r\\n                            <div id=\\\"job_complete\\\" class=\\\"form-check form-check-inline\\\">\\r\\n                                <label class=\\\"radio-inline\\\" style=\\\"margin-top:0;\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"radio\\\" name=\\\"job_complete\\\" value=\\\"1\\\" [(ngModel)]=\\\"model.inputMap.job_complete\\\"> {{FN_YES}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"radio-inline\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"radio\\\" name=\\\"job_complete\\\" value=\\\"0\\\" [(ngModel)]=\\\"model.inputMap.job_complete\\\"> {{FN_NO}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                        <div class=\\\"col-xs-12 col-sm-6\\\">\\r\\n                            <label for=\\\"po_used\\\">{{FN_PO_USED}}</label>\\r\\n                            <div id=\\\"po_used\\\" class=\\\"form-check form-check-inline\\\">\\r\\n                            \\t<label class=\\\"radio-inline\\\" style=\\\"margin-top:0;\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"radio\\\" name=\\\"po_used\\\" value=\\\"1\\\" [(ngModel)]=\\\"model.inputMap.po_used\\\"> {{FN_YES}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"radio-inline\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"radio\\\" name=\\\"po_used\\\" value=\\\"0\\\" [(ngModel)]=\\\"model.inputMap.po_used\\\"> {{FN_NO}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-xs-12 col-sm-6\\\">\\r\\n                            <label for=\\\"evaluation\\\">Evaluation</label>\\r\\n                            <div id=\\\"evaluation\\\" class=\\\"form-check form-check-inline\\\">\\r\\n                                <label class=\\\"radio-inline\\\" style=\\\"margin-top:0;\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"radio\\\" name=\\\"evaluation\\\" value=\\\"1\\\" [(ngModel)]=\\\"model.inputMap.evaluation\\\"> {{FN_YES}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"radio-inline\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"radio\\\" name=\\\"evaluation\\\" value=\\\"0\\\" [(ngModel)]=\\\"model.inputMap.evaluation\\\"> {{FN_NO}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"text-center margin_bottom_form\\\">\\r\\n                \\t<ng-container *ngIf=\\\"model.process_number != '3'\\\">\\r\\n                    <button type=\\\"button\\\" class=\\\"btn btn-success\\\" (click)=\\\"onSubmitProceed()\\\" \\r\\n\\t                    [disabled]=\\\"!nisshoForm.form.valid\\\">{{FN_SUBMIT_FORM}}</button>\\r\\n                    <button id=\\\"loading\\\" class=\\\"hidden\\\" type=\\\"button\\\"></button>\\r\\n                    </ng-container>\\r\\n                </div>\\r\\n            </form>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { Form, FormManagementService, AdministrationService, AuthenticationService, User, Email, EmailNotificationService } from \"process-smart-ng6-lib\";\r\nimport { ActivatedRoute } from \"@angular/router\";\r\nimport { SharedService } from \"src/app/_services/shared.service\";\r\nimport { Router } from \"@angular/router\";\r\nimport { S3Manager } from \"src/app/api/S3Manager\";\r\n\r\n@Component({\r\n  selector: 'app-irrigation-repair',\r\n  templateUrl: './irrigation-repair.component.html',\r\n  styleUrls: ['./irrigation-repair.component.css']\r\n})\r\nexport class IrrigationRepairComponent implements OnInit {\r\n    formId: string;\r\n    typeId = '47';\r\n    model: Form;\r\n    fillerUid: string;\r\n    fillerName: string;\r\n    clientId: string;\r\n    roleId: string;\r\n    matList: Array<any>;    //List of used parts (with select properties)\r\n    navigation: string;\r\n    goToParts = false;\r\n    usersList: Array<User>;\r\n    \r\n    attachment1: File;\r\n    attachment2: File;\r\n    attachment3: File;\r\n    attachment4: File;\r\n    attachment5: File;\r\n    attachment6: File;\r\n    attachment7: File;\r\n    attachment8: File;\r\n    attachment9: File;\r\n    attachment10: File;\r\n    \r\n    constructor(private route: ActivatedRoute, private fms: FormManagementService,\r\n          private ssv: SharedService, private aus: AuthenticationService,\r\n          private adms: AdministrationService, private router: Router,\r\n          private ems: EmailNotificationService) { }\r\n    \r\n    ngOnInit() {\r\n        //Get user info from session\r\n        this.fillerUid = JSON.parse(localStorage.getItem('currentUser')).user.uid;\r\n        this.fillerName = JSON.parse(localStorage.getItem('currentUser')).user.name;\r\n        this.roleId = JSON.parse(localStorage.getItem('currentUser')).user.role_id;\r\n        this.clientId = JSON.parse(localStorage.getItem('currentUser')).user.client_id;\r\n        this.initFieldNames();\r\n        \r\n        this.populateNames();\r\n        \r\n        //Get form ID if specified on route.\r\n        //If specified, load the form.\r\n      this.route.params.subscribe(params => {\r\n            this.formId = params['formId'];\r\n            \r\n            if(this.formId){\r\n                //Load Form\r\n                this.getModel();\r\n            }\r\n            else {\r\n                //Create a new form\r\n                this.model = <Form>{\r\n                    'id': this.formId,\r\n                    'type_id': this.typeId,\r\n                    'status_id': '1',\r\n                    'process_number': '1',\r\n                    'created_date': this.toHtmlDate(null),\r\n                    'last_modified_date': this.toHtmlDate(null),\r\n                    'filler_id': this.fillerUid,\r\n                    'modifier_id': this.fillerUid,\r\n                    'inputMap': {\r\n                        'date': this.toHtmlDate(null),\r\n                        'tech_name': this.fillerName\r\n                    },\r\n                    \"inputTables\": {\r\n                        \"materials\": []\r\n                    }\r\n                };\r\n            }\r\n        });\r\n    }\r\n    \r\n    populateNames() {\r\n        this.aus.getUsers()\r\n          .subscribe(usersList => this.usersList = usersList);\r\n    }\r\n    \r\n    getModel() {\r\n        this.fms.getForm(this.typeId, this.formId)\r\n          .subscribe(model => {\r\n              model.created_date = this.toHtmlDate(model.created_date);\r\n              model.last_modified_date = this.toHtmlDate(null);\r\n              this.model = model;\r\n              this.matList = model.inputTables.materials;\r\n          });\r\n    }\r\n    \r\n    onSubmit() {\r\n      //Collect all materials and labor\r\n      this.model.inputTables.materials = this.matList;\r\n      \r\n      //Ensure number fields are filled\r\n      if(!this.model.inputMap.tech_hours || isNaN(this.model.inputMap.tech_hours) ||\r\n              this.model.inputMap.tech_hours.replace(/^\\s+/, '').replace(/\\s+$/, '') === ''){\r\n          this.model.inputMap.tech_hours = '0';\r\n      }\r\n      if(!this.model.inputMap.ot_hours || isNaN(this.model.inputMap.ot_hours) ||\r\n              this.model.inputMap.ot_hours.replace(/^\\s+/, '').replace(/\\s+$/, '') === ''){\r\n          this.model.inputMap.ot_hours = '0';\r\n      }\r\n      if(!this.model.inputMap.labor_hours || isNaN(this.model.inputMap.labor_hours) ||\r\n              this.model.inputMap.labor_hours.replace(/^\\s+/, '').replace(/\\s+$/, '') === ''){\r\n          this.model.inputMap.labor_hours = '0';\r\n      }\r\n      \r\n    //Check if there are attachments to upload\r\n      let filesToUpload = [null,null,null,null,null];\r\n      let fileNames = [\"\",\"\",\"\",\"\",\"\"];\r\n      let numUploads = 0;\r\n      for(let num = 1; num <= 5; num++) {\r\n          if(this.model.inputMap['attachment'+num] && this['attachment'+num]){\r\n              filesToUpload[numUploads] = this['attachment'+num];\r\n              fileNames[numUploads] = this.model.inputMap['attachment'+num];\r\n              numUploads++;\r\n          }\r\n      }\r\n      \r\n      console.log('Number of uploads: '+numUploads);\r\n      \r\n      if(numUploads > 0){\r\n          this.ssv.activateUploadModal();\r\n      }\r\n      \r\n      //Upload form data to DB\r\n      if(this.formId){\r\n          //Update an existing form\r\n          this.fms.updateForm(this.model, this.typeId, this.formId)\r\n          .subscribe(\r\n              data => {\r\n                  let navUrl = this.navigation + (this.goToParts ? this.formId : \"\");\r\n                  if(numUploads > 0){\r\n                      S3Manager.uploadAllFormAttachments(filesToUpload, \r\n                              fileNames,\r\n                              this.clientId,\r\n                              navUrl,\r\n                              numUploads,\r\n                              this.ssv,\r\n                              this.router);\r\n                  }\r\n                  this.onUpdateFormSuccess();\r\n                  if(numUploads == 0){\r\n                      //Redirect immediately if no uploads\r\n                      this.router.navigate([navUrl]);\r\n                  }\r\n                },\r\n                error => {\r\n                    // Display error message\r\n                    this.ssv.showError('Unable to update form!');\r\n                }\r\n          );\r\n      }\r\n      else{\r\n          //Create a new form\r\n          this.fms.newForm(this.model, this.typeId)\r\n          .subscribe(\r\n              data => {\r\n                  this.formId = data['formId'];\r\n                  let navUrl = this.navigation + (this.goToParts ? data['formId'] : \"\");\r\n                  if(numUploads > 0){\r\n                      S3Manager.uploadAllFormAttachments(filesToUpload, \r\n                              fileNames,\r\n                              this.clientId,\r\n                              navUrl,\r\n                              numUploads,\r\n                              this.ssv,\r\n                              this.router);\r\n                  }\r\n                  this.onCreateFormSuccess(data['formId']);\r\n                  if(numUploads == 0){\r\n                      //Redirect immediately if no uploads\r\n                      this.router.navigate([navUrl]);\r\n                  }\r\n                },\r\n                error => {\r\n                    // Display error message\r\n                    this.ssv.showError('Unable to create form!');\r\n                }\r\n          );\r\n      }\r\n    }\r\n    \r\n    onCreateFormSuccess(formId){\r\n        this.ssv.showSuccess('Form successfully updated!');\r\n    }\r\n    \r\n    onUpdateFormSuccess(){\r\n        this.ssv.showSuccess('Form successfully updated!');\r\n        \r\n        if(this.model.process_number == '2'){\r\n            //Email from Tech to I.Manager (role = 4)\r\n            const recipient = this.usersList.find(x => x.role_id == '4' && x.is_active == '1');\r\n            this.sendTechSubmissionEmail(recipient.uid);\r\n        }\r\n        else if(this.model.process_number == '3'){\r\n            //Send email to Irrigation Staff (role = 21)\r\n            const recipient = this.usersList.find(x => x.role_id == '21' && x.is_active == '21');\r\n            this.sendIRFManagerApprovalEmail(recipient.uid);\r\n        }\r\n    }\r\n    \r\n    //Submit to Irrigation Manager\r\n    onSubmitProceed(){\r\n      //No more submission after manager approval (step 3 onwards)\r\n        if(this.model.process_number == '3'){\r\n            return;\r\n        }\r\n        \r\n        //Update process number if form is submitted (not just saved as draft)\r\n        this.navigation = '/view-irrigation-repair/3';\r\n        if(this.roleId == '4'){\r\n            //Irrigation Manager doesn't need approval\r\n            this.model.process_number = '3';\r\n            this.navigation = '/view-irrigation-repair/3';\r\n        }\r\n        else{\r\n            this.model.process_number = '2';\r\n            this.navigation = '/view-irrigation-repair/2';\r\n        }\r\n          this.onSubmit();\r\n      }\r\n    \r\n    //Submit and redirect to view forms page\r\n    onSubmitBack(){\r\n          this.navigation = '/view-irrigation-repair/'+this.model.process_number;\r\n        //No more submission after manager approval (step 3 onwards)\r\n          if(this.model.process_number == '3'){\r\n              this.router.navigate([this.navigation]);\r\n              return;\r\n          }\r\n          this.onSubmit();\r\n      }\r\n    \r\n    //Submit and redirect to parts list page\r\n    onSubmitPartsList(){\r\n          this.goToParts = true;\r\n          this.navigation = '/irrigation-repair-parts/';\r\n          \r\n        //No more submission after manager approval (step 3 onwards)\r\n          if(this.model.process_number == '3'){\r\n              this.router.navigate([this.navigation+this.formId]);\r\n              return;\r\n          }\r\n          \r\n          this.onSubmit();\r\n      }\r\n    \r\n    onDownloadAttachment(num: string) {\r\n      const filename = this.model.inputMap['attachment'+num];\r\n      S3Manager.downloadFormAttachment(filename, this.clientId);\r\n    }\r\n    \r\n    //Filename = form[GUID]_att[num].[ext]\r\n    onFileAdded(files, num) {\r\n      if (files === undefined || files.length == 0) {\r\n          this['attachment'+num] = null;\r\n          this.model['attachment'+num] = '';\r\n      }\r\n      else{\r\n          const ext = files[0].name.substr(files[0].name.lastIndexOf('.'));\r\n          this['attachment'+num] = files[0];\r\n          this.model.inputMap['attachment'+num] = 'form'+this.newGuid()+'_att'+num+ext;\r\n      }\r\n    }\r\n    \r\n    //Create Unique ID\r\n    newGuid() {\r\n      return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n          const r = Math.random() * 16 | 0, v = c === 'x' ? r : ( r & 0x3 | 0x8 );\r\n          return v.toString(16);\r\n      });\r\n    }\r\n    \r\n    toHtmlDate(datestr : string){\r\n        let date;\r\n        if(datestr){\r\n            date = new Date(datestr);\r\n        }\r\n        else{\r\n            date = new Date();\r\n        } \r\n        const dd = date.getDate() < 10 ? '0' + date.getDate() : date.getDate();\r\n        const mm = date.getMonth() < 9 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1;\r\n        const yyyy = date.getFullYear();\r\n        \r\n        return yyyy + '-' + mm + '-' + dd;\r\n    }\r\n    \r\n    //Send email to Irrigation Manager for approval\r\n    sendTechSubmissionEmail(recipientId){\r\n        //Get form filler as recipient\r\n        this.aus.getUser(recipientId).subscribe(\r\n            user => {\r\n                console.log(JSON.stringify(user));\r\n                if(user.email){\r\n                    //Send Email\r\n                    const recipientList = [user.email];\r\n                    const ccList = [];\r\n                    const bccList = [];\r\n                    const subject = \"Pending Approval - Irrigation Repair\";\r\n                    const content = user.name + \",\"\r\n                            + \"<br><br>An Irrigation repair has been completed.\"\r\n                            + \"<br>Please review and assign a job number to the repair forms.\"\r\n                    const email: Email = {'subject':subject,\r\n                                            'body':content,\r\n                                            'to': recipientList,\r\n                                            'cc':ccList,\r\n                                            'bcc':bccList};\r\n                    console.log(JSON.stringify(email));\r\n                    this.ems.sendEmail(email).subscribe(data => {});\r\n                }\r\n                else{\r\n                    console.log('Email recipient not found');\r\n                }\r\n            },\r\n            error => {\r\n                console.log(error);\r\n                // Display error message\r\n                this.ssv.showError('Error: Email recipient not found!');\r\n            });\r\n    }\r\n    \r\n    //Send to Irrigation Staff for Approval & Job Number\r\n    sendIRFManagerApprovalEmail(recipientId){\r\n        //Get form filler as recipient\r\n        this.aus.getUser(recipientId).subscribe(\r\n            user => {\r\n                console.log(JSON.stringify(user));\r\n                if(user.email){\r\n                    //Send Email\r\n                    const recipientList = [user.email];\r\n                    const ccList = [];\r\n                    const bccList = [];\r\n                    const subject = \"Irrigation Repair Job Number Request\";\r\n                    const content = user.name + \",\"\r\n                            + \"<br><br>An Irrigation Repair requires your approval.\"\r\n                            + \"<br>Please login to the Dashboard to review the repair.\"\r\n                    const email: Email = {'subject':subject,\r\n                                            'body':content,\r\n                                            'to': recipientList,\r\n                                            'cc':ccList,\r\n                                            'bcc':bccList};\r\n                    console.log(JSON.stringify(email));\r\n                    this.ems.sendEmail(email).subscribe(data => {});\r\n                }\r\n                else{\r\n                    console.log('Email recipient not found');\r\n                }\r\n            },\r\n            error => {\r\n                console.log(error);\r\n                // Display error message\r\n                this.ssv.showError('Error: Email recipient not found!');\r\n            });\r\n    }\r\n    \r\n    //DIAGNOSTIC\r\n    get diagnostic() { return JSON.stringify(this.model); }\r\n    get mdiagnostic() { return JSON.stringify(this.matList); }\r\n    \r\n    getS3FormPicUrl(filename) {\r\n        return S3Manager.getFormAttachmentUrl(filename, this.clientId);\r\n    }\r\n    \r\n    //Field Names\r\n    FN_SAVE_BACK = \"Save & Back\";\r\n    FN_PARTS_LIST = \"Parts List\";\r\n    FN_TITLE = \"Irrigation Repair\";\r\n    FN_JOB_INFO = \"Job Information\";\r\n    FN_TECH_NAME = \"Tech Name\";\r\n    FN_JOB_NAME = \"Job Name\";\r\n    FN_JOB_LOCATION = \"Job Location\";\r\n    FN_WORK_HOURS = \"Work Hours\";\r\n    FN_DATE = \"Date\";\r\n    FN_START_TIME = \"Start Time\";\r\n    FN_END_TIME = \"End Time\";\r\n    FN_TECH_HOURS = \"Tech Hours\";\r\n    FN_OT_HOURS = \"O/T Hours\";\r\n    FN_LABOR_HOURS = \"Labor Hours\";\r\n    FN_WORK_DETAILS = \"Work Details\";\r\n    FN_PROBLEM = \"Problem\";\r\n    FN_REPAIR_MADE = \"Repair Made\";\r\n    FN_EMERGENCY_CALL = \"Emergency Call\";\r\n    FN_ON_CHECKLIST = \"On Checklist\";\r\n    FN_NISSHO_AREA = \"Nissho Area\";\r\n    FN_CS_CALL = \"Customer Service Call\";\r\n    FN_LEGEND_IN = \"Legend in Controllers\";\r\n    FN_CHART_IN = \"Charts in Controllers\";\r\n    FN_JOB_COMPLETE = \"Job Complete\";\r\n    FN_PO_USED = \"PO Used\";\r\n    FN_SUBMIT_FORM = \"Submit Form\";\r\n    FN_YES = \"Yes\";\r\n    FN_NO = \"No\";\r\n    FN_BACK_TO_FORM = \"Back to Form\";\r\n    FN_PARTS_USED = \"Parts List\";\r\n    FN_IRRIGATION_PARTS = \"Irrigation Parts\";\r\n    FN_MATERIAL = \"Material\";\r\n    FN_ADD_MATERIAL = \"Add Material\";\r\n    FN_QUANTITY = \"qty\";\r\n    ADD_PICS = \"Upload Pictures\";\r\n    \r\n    initFieldNames(){\r\n        const language = JSON.parse(localStorage.getItem('currentUser')).user.language_preference;\r\n        if(language === 'es'){\r\n            this.FN_SAVE_BACK = \"Guardar & Retroceder\";\r\n            this.FN_PARTS_LIST = \"Lista de Piezas\";\r\n            this.FN_TITLE = \"Reparacin de Irrigacin\";\r\n            this.FN_JOB_INFO = \"Informacin de Trabajo\";\r\n            this.FN_TECH_NAME = \"Nombre de Tcnico\";\r\n            this.FN_JOB_NAME = \"Nombre de trabajo\";\r\n            this.FN_JOB_LOCATION = \"Lugar de trabajo\";\r\n            this.FN_WORK_HOURS = \"Horas de trabajo\";\r\n            this.FN_DATE = \"Fecha\";\r\n            this.FN_START_TIME = \"Hora de comienzo\";\r\n            this.FN_END_TIME = \"Hora del fin\";\r\n            this.FN_TECH_HOURS = \"Horas de trabajo\";\r\n            this.FN_OT_HOURS = \"Horas Extras\";\r\n            this.FN_LABOR_HOURS = \"Horas totales\";\r\n            this.FN_WORK_DETAILS = \"Detalles de trabajo\";\r\n            this.FN_PROBLEM = \"Problema\";\r\n            this.FN_REPAIR_MADE = \"Reparacin hecho\";\r\n            this.FN_EMERGENCY_CALL = \"Llamada de emergencia\";\r\n            this.FN_ON_CHECKLIST = \"En lista de verificacin\";\r\n            this.FN_NISSHO_AREA = \"rea de Nissho\";\r\n            this.FN_CS_CALL = \"Llamada de servicio de cliente\";\r\n            this.FN_LEGEND_IN = \"Leyenda en controles\";\r\n            this.FN_CHART_IN = \"Grfica en controles\";\r\n            this.FN_JOB_COMPLETE = \"Trabajo completado\";\r\n            this.FN_PO_USED = \"PO usado\";\r\n            this.FN_SUBMIT_FORM = \"Enviar\";\r\n            this.FN_YES = \"Si\";\r\n            this.FN_NO = \"No\";\r\n            \r\n            this.FN_BACK_TO_FORM = \"Regresar al Formulario\";\r\n            this.FN_PARTS_USED = \"Partes Usados\";\r\n            this.FN_IRRIGATION_PARTS = \"Partes de Irrigacin\";\r\n            this.FN_MATERIAL = \"Materiales\";\r\n            this.FN_ADD_MATERIAL = \"Aadir Materiales\";\r\n            this.FN_QUANTITY = \"Cantidad\";\r\n            this.ADD_PICS = \"Aadir Foto\";\r\n        }\r\n    }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Zvcm1zL2ZpbGwvbS13b3JrLW9yZGVyL20td29yay1vcmRlci5jb21wb25lbnQuY3NzIn0= */\"","module.exports = \"<div class=\\\"container-fluid\\\">\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<div class=\\\"col col-sm-offset-1 text-left\\\">\\r\\n\\t\\t\\t<h3><a routerLink=\\\"/view-work-order\\\" class=\\\"back_btn\\\"><span class=\\\"glyphicon glyphicon-chevron-left\\\"></span>Back</a></h3>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<div class=\\\"col-sm-2\\\"></div>\\r\\n\\t\\t<div class=\\\"col-sm-8 col-xs-12\\\">\\r\\n        \\t<div class=\\\"row\\\">\\r\\n\\t        \\t<div class=\\\"col-xs-12 col-md-6 col-md-offset-3 text-center\\\">\\r\\n\\t\\t            <h2 class=\\\"text-center\\\">Work Order Form</h2>\\r\\n\\t         \\t</div>\\r\\n\\t        </div>\\r\\n            <form (ngSubmit)=\\\"onSubmit()\\\" #nisshoForm=\\\"ngForm\\\">\\r\\n                 <div class=\\\"form-group\\\">\\r\\n                     <label class=\\\"group_label_text\\\">Project Information</label>\\r\\n                     <div class=\\\"row\\\">\\r\\n                         <div class=\\\"col-sm-6 col-xs-12\\\">\\r\\n                             <label for=\\\"job_number\\\">Nissho Job #</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t<input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"job_number\\\" name=\\\"job_number\\\" [(ngModel)]=\\\"model.inputMap.job_num\\\">\\r\\n                         </div>\\r\\n                         <div class=\\\"col-sm-6 col-xs-12\\\">\\r\\n                             <label for=\\\"po_number\\\">IWO #</label>\\r\\n                             <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"po_number\\\" name=\\\"po_number\\\"  [(ngModel)]=\\\"model.inputMap.po_num\\\">\\r\\n                         </div>\\r\\n                     </div>\\r\\n                     <div class=\\\"row\\\">\\r\\n                         <div class=\\\"col-sm-12 col-xs-12\\\">\\r\\n                             <label for=\\\"project_name\\\">Project Name</label>\\r\\n                             <input type=\\\"text\\\" autocomplete=\\\"off\\\" class=\\\"form-control\\\" id=\\\"project_name\\\" name=\\\"project_name\\\" (input)=\\\"searchCustomer($event.target.value)\\\" [(ngModel)]=\\\"model.inputMap.project_name\\\" required>\\r\\n                         \\t<div *ngIf=\\\"custRecList\\\" id=\\\"customer_suggestion\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"search_suggestion_entry\\\" *ngFor=\\\"let sugg_part of custRecList\\\" (click)=\\\"onCustomerSelected(sugg_part.id)\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{{sugg_part.project_name}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n                         </div>\\r\\n                     </div>\\r\\n                 </div>\\r\\n                 <div class=\\\"form-group\\\">\\r\\n                     <label class=\\\"group_label_text\\\">Client Information</label>\\r\\n                     <div class=\\\"row\\\">\\r\\n                         <div class=\\\"col-sm-12 col-xs-12\\\">\\r\\n                             <label for=\\\"client_name\\\">Client Name</label>\\r\\n                             <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"client_name\\\" name=\\\"client_name\\\" [(ngModel)]=\\\"model.inputMap.client_name\\\" required>\\r\\n                         </div>\\r\\n                     </div>\\r\\n                     <div class=\\\"row\\\">\\r\\n                         <div class=\\\"col-sm-6 col-xs-6\\\">\\r\\n                             <label for=\\\"client_phone\\\">Client Phone #</label>\\r\\n                             <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"client_phone\\\" name=\\\"client_phone\\\" [(ngModel)]=\\\"model.inputMap.client_phone\\\">\\r\\n                         </div>\\r\\n                         <div class=\\\"col-sm-6 col-xs-6\\\">\\r\\n                             <label for=\\\"client_email\\\">Client Email</label>\\r\\n                             <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"client_email\\\" name=\\\"client_email\\\" [(ngModel)]=\\\"model.inputMap.client_email\\\">\\r\\n                         </div>\\r\\n                     </div>\\r\\n                 </div>\\r\\n                 <div class=\\\"form-group\\\">\\r\\n                     <div class=\\\"row\\\">\\r\\n                         <div class=\\\"col-sm-8 col-xs-8\\\">\\r\\n                             <label for=\\\"auth_by_print\\\">Authorized by (Print)</label>\\r\\n                             <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"auth_by_print\\\" name=\\\"auth_by_print\\\" [(ngModel)]=\\\"model.inputMap.auth_by\\\">\\r\\n                         </div>\\r\\n                         <div class=\\\"col-sm-4 col-xs-4\\\">\\r\\n                             <label for=\\\"auth_date\\\">Date</label>\\r\\n                             <input type=\\\"date\\\" class=\\\"form-control\\\" id=\\\"auth_date\\\" name=\\\"auth_date\\\" [(ngModel)]=\\\"model.inputMap.client_signature_date\\\">\\r\\n                         </div>\\r\\n                     </div>\\r\\n                 </div>            \\r\\n                     \\r\\n               <div class=\\\"form-group\\\" id=\\\"materials_container\\\">\\r\\n                   <label class=\\\"group_label_text\\\">Materials</label>\\r\\n              \\t\\t<div class=\\\"row\\\">\\r\\n              \\t\\t\\t<div class=\\\"col-xs-6 col-sm-6 pad_right_5\\\">\\r\\n          \\t\\t\\t\\t\\t<input type=\\\"text\\\" class='form-control' value=\\\"Irrigation materials\\\" disabled />\\r\\n              \\t\\t\\t</div>\\r\\n              \\t\\t\\t<div class=\\\"col-xs-2 col-sm-2 pad_right_5 pad_left_none\\\">\\r\\n              \\t\\t\\t\\t<input type=\\\"text\\\" class='form-control' value=\\\"1\\\" disabled />\\r\\n              \\t\\t\\t</div>\\r\\n              \\t\\t\\t<div class=\\\"col-xs-4 col-sm-4 pad_right_5 pad_left_none text-right\\\">\\r\\n              \\t\\t\\t\\t{{total_cost | currency}}\\r\\n              \\t\\t\\t</div>\\r\\n              \\t\\t</div>\\r\\n               </div>\\r\\n               <div class=\\\"form-group\\\" id=\\\"labors_container\\\">\\r\\n                   <label class=\\\"group_label_text\\\">Labor</label>\\r\\n             \\t\\t<div class=\\\"row\\\" *ngFor=\\\"let lab of labList; let i = index\\\">\\r\\n             \\t\\t\\t<div class=\\\"col-xs-6 col-sm-6 pad_right_5 pad_left_none\\\">\\r\\n              \\t\\t\\t\\t<input type=\\\"text\\\" class='form-control' name=\\\"labor{{i}}\\\" [(ngModel)]=\\\"lab.labor\\\" placeholder=\\\"Labor\\\" required/>\\r\\n              \\t\\t\\t</div>\\r\\n             \\t\\t\\t<div class=\\\"col-xs-2 col-sm-2 pad_right_5 pad_left_none\\\">\\r\\n              \\t\\t\\t\\t<input type=\\\"text\\\" class='form-control' name=\\\"hours{{i}}\\\" [(ngModel)]=\\\"lab.hours\\\" placeholder=\\\"hrs\\\" required/>\\r\\n              \\t\\t\\t</div>\\r\\n              \\t\\t\\t<div class=\\\"col-xs-2 col-sm-2 pad_right_5 pad_left_none\\\">\\r\\n              \\t\\t\\t\\t<input type=\\\"text\\\" class='form-control' name=\\\"rate{{i}}\\\" [(ngModel)]=\\\"lab.rate\\\" placeholder=\\\"rate\\\" required/>\\r\\n              \\t\\t\\t</div>\\r\\n             \\t\\t\\t<div class=\\\"col-xs-2 col-sm-2 pad_left_none\\\">\\r\\n             \\t\\t\\t\\t<a type=\\\"text\\\" class='btn btn-danger pull-right x_button' (click)=\\\"onDeleteLabor(i)\\\">X</a>\\r\\n             \\t\\t\\t</div>\\r\\n             \\t\\t</div>\\r\\n                </div>\\r\\n                <div class=\\\"form-group row margin_top_15\\\">\\r\\n                    <div class=\\\"col-xs-12 col-sm-12\\\">\\r\\n                        <a id=\\\"ladd_row\\\" class=\\\"btn btn-default pull-left\\\" (click)=\\\"addLabor()\\\"><b>+Add Labor</b></a>\\r\\n                    </div>\\r\\n               \\t</div>\\r\\n               \\t<div class=\\\"form-group\\\">\\r\\n                \\t<label class=\\\"group_label_text\\\">Work Information</label>\\r\\n                \\t<div class=\\\"row\\\">\\r\\n\\t\\t\\t        \\t<div class=\\\"col-xs-12 col-md-6 text-left\\\">\\r\\n\\t\\t\\t\\t            <label for=\\\"attachment1\\\">Picture 1</label>\\r\\n\\t\\t\\t\\t            <span *ngIf=\\\"model.inputMap.attachment1 == null\\\"><input type=\\\"file\\\" class=\\\"form-control\\\" accept=\\\"image/*\\\" #attachment1 (change)=\\\"onFileAdded(attachment1.files,1)\\\"></span>\\r\\n                    \\t\\t<span *ngIf=\\\"model.inputMap.attachment1 != null\\\"><a (click)=\\\"onDownloadAttachment(1)\\\"> (Download)</a></span><br>\\r\\n\\t\\t\\t         \\t</div>\\r\\n\\t\\t\\t         \\t<div class=\\\"col-xs-12 col-md-6 text-left\\\">\\r\\n\\t\\t\\t\\t            <label for=\\\"attachment2\\\">Picture 2</label>\\r\\n\\t\\t\\t\\t            <span *ngIf=\\\"model.inputMap.attachment2 == null\\\"><input type=\\\"file\\\" class=\\\"form-control\\\" accept=\\\"image/*\\\" #attachment2 (change)=\\\"onFileAdded(attachment2.files,2)\\\"></span>\\r\\n                    \\t\\t<span *ngIf=\\\"model.inputMap.attachment2 != null\\\"><a (click)=\\\"onDownloadAttachment(2)\\\"> (Download)</a></span><br>\\r\\n\\t\\t\\t         \\t</div>\\r\\n\\t\\t            </div>\\r\\n                \\t<div class=\\\"row\\\">\\r\\n                \\t\\t<div class=\\\"col-xs-12 col-sm-12\\\">\\r\\n                \\t\\t\\t<label for=\\\"work_description\\\">Work Description</label>\\r\\n                \\t\\t\\t<textarea class=\\\"form-control\\\" id=\\\"work_description\\\" name=\\\"work_description\\\" [(ngModel)]=\\\"model.inputMap.work_description\\\"></textarea>\\r\\n                \\t\\t</div>\\r\\n                \\t</div>\\r\\n                </div>\\r\\n               \\t\\r\\n                <div class=\\\"row\\\">\\r\\n\\t                <div class=\\\"col-xs-6 text-right margin_bottom_15\\\">\\r\\n\\t                \\t<button type=\\\"submit\\\" class=\\\"btn btn-info\\\"><b>Save as Draft</b></button>\\r\\n\\t                </div>\\r\\n\\t                <div class=\\\"col-xs-6 text-left margin_bottom_15\\\">\\r\\n\\t                    <button type=\\\"button\\\" class=\\\"btn btn-success\\\" (click)=\\\"onSubmitProceed()\\\" [disabled]=\\\"!nisshoForm.form.valid\\\"><b>Submit Form</b></button>\\r\\n\\t                </div>\\r\\n\\t            </div>\\r\\n            </form>\\r\\n        </div>\\r\\n        <div class=\\\"col-sm-2\\\"></div>\\r\\n    </div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from \"@angular/router\";\r\nimport { SharedService } from \"src/app/_services/shared.service\";\r\nimport { FormManagementService, Form, InventoryManagementService, Material, AdministrationService, Customer } from \"process-smart-ng6-lib\";\r\nimport { S3Manager } from \"src/app/api/S3Manager\";\r\n@Component({\r\n  selector: 'app-m-work-order',\r\n  templateUrl: './m-work-order.component.html',\r\n  styleUrls: ['./m-work-order.component.css']\r\n})\r\nexport class MWorkOrderComponent implements OnInit {\r\n    formId: string;\r\n    typeId = '51';\r\n    model: Form;\r\n    fillerUid: string;\r\n    clientId: string;\r\n    \r\n    customersList: Array<Customer>; //List of all customers (for project name)\r\n    custRecList: Array<Customer>; //List of filtered customers from search\r\n    \r\n    partsList: Array<Material>;     //List of all parts\r\n    suggestedPartsList: Array<Material>;   //Filtered list of parts\r\n    currFocus: number;  //Index of item currently being focused\r\n    \r\n    matList: Array<any>;    //List of used parts (with select properties)\r\n    labList: Array<WO_Labor>;       //List of used labors\r\n    \r\n    attachment1: File;\r\n    attachment2: File;\r\n    \r\n    total_cost: string;\r\n    \r\n    isDraft = true;\r\n    \r\n    constructor(private route: ActivatedRoute, private fms: FormManagementService,\r\n          private ssv: SharedService, private ims: InventoryManagementService,\r\n          private adms: AdministrationService, private router: Router) { }\r\n    \r\n    ngOnInit() {\r\n        this.total_cost = '0';\r\n        \r\n        //Get user info from session\r\n        this.fillerUid = JSON.parse(localStorage.getItem('currentUser')).user.uid;\r\n        this.clientId = JSON.parse(localStorage.getItem('currentUser')).user.client_id;\r\n        \r\n        //Populate parts and customers for search\r\n        this.getPartsList();\r\n        this.getCustomersList();\r\n        \r\n        //Get form ID if specified on route.\r\n        //If specified, load the form.\r\n      this.route.params.subscribe(params => {\r\n            this.formId = params['formId'];\r\n            \r\n            if(this.formId){\r\n                //Load Form\r\n                this.getModel();\r\n            }\r\n            else {\r\n                //Create a new form\r\n                this.model = <Form>{\r\n                    'id': this.formId,\r\n                    'type_id': this.typeId,\r\n                    'status_id': '1',\r\n                    'process_number': '1',\r\n                    'created_date': this.toHtmlDate(null),\r\n                    'last_modified_date': this.toHtmlDate(null),\r\n                    'filler_id': this.fillerUid,\r\n                    'modifier_id': this.fillerUid,\r\n                    'inputMap': {\r\n                    },\r\n                    \"inputTables\": {\r\n                        \"materials\": [],\r\n                        \"labors\": []\r\n                    }\r\n                };\r\n                this.matList = [];\r\n                this.labList = [];\r\n            }\r\n        });\r\n    }\r\n    \r\n    getModel() {\r\n        this.fms.getForm(this.typeId, this.formId)\r\n          .subscribe(model => {\r\n              model.created_date = this.toHtmlDate(model.created_date);\r\n              model.last_modified_date = this.toHtmlDate(null);\r\n              this.model = model;\r\n              this.matList = model.inputTables.materials;\r\n              this.labList = model.inputTables.labors;\r\n          });\r\n    }\r\n    \r\n    getStockTransferTotalCost(){\r\n        \r\n    }\r\n    \r\n    onSubmit() {\r\n      //Collect all materials and labor\r\n      this.model.inputTables.materials = this.matList;\r\n      this.model.inputTables.labors = this.labList;\r\n      \r\n      //Upload form data to DB\r\n      if(this.formId){\r\n          //Update an existing form\r\n          this.fms.updateForm(this.model, this.typeId, this.formId)\r\n          .subscribe(\r\n              data => {\r\n                  this.ssv.showSuccess('Form successfully updated!');\r\n                  this.router.navigate(['/view-m-work-order/'+this.model.process_number]);\r\n                },\r\n                error => {\r\n                    // Display error message\r\n                    this.ssv.showError('Unable to update form!');\r\n                }\r\n          );\r\n      }\r\n      else{\r\n          //Create a new form\r\n          this.fms.newForm(this.model, this.typeId)\r\n          .subscribe(\r\n              data => {\r\n                    // Page redirect when getting response\r\n                  this.ssv.showSuccess('Form successfully updated!');\r\n                    this.router.navigate(['/view-m-work-order/'+this.model.process_number]);\r\n                },\r\n                error => {\r\n                    // Display error message\r\n                    this.ssv.showError('Unable to update form!');\r\n                }\r\n          );\r\n      }\r\n      \r\n      //Save attachments in S3\r\n      for(let num = 1; num <= 2; num++) {\r\n          if(this.model.inputMap['attachment'+num] && this['attachment'+num]){\r\n              S3Manager.uploadFormAttachment(this['attachment'+num], this.model.inputMap['attachment'+num],this.clientId);\r\n          }\r\n      }\r\n    }\r\n    \r\n    //Submit to Irrigation Manager\r\n    onSubmitProceed(){\r\n      //Update process number if form is submitted (not just saved as draft)\r\n        this.model.process_number = '2';\r\n        this.onSubmit();\r\n      }\r\n    \r\n    onDownloadAttachment(num: string) {\r\n      const filename = this.model.inputMap['attachment'+num];\r\n      S3Manager.downloadFormAttachment(filename, this.clientId);\r\n    }\r\n    \r\n    //Filename = form[GUID]_att[num].[ext]\r\n    onFileAdded(files, num) {\r\n      if (files === undefined || files.length == 0) {\r\n          this['attachment'+num] = null;\r\n          this.model['attachment'+num] = '';\r\n      }\r\n      else{\r\n          const ext = files[0].name.substr(files[0].name.lastIndexOf('.'));\r\n          this['attachment'+num] = files[0];\r\n          this.model.inputMap['attachment'+num] = 'form'+this.newGuid()+'_att'+num+ext;\r\n      }\r\n    }\r\n    \r\n    //Create Unique ID\r\n    newGuid() {\r\n      return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n          const r = Math.random() * 16 | 0, v = c === 'x' ? r : ( r & 0x3 | 0x8 );\r\n          return v.toString(16);\r\n      });\r\n    }\r\n    \r\n    toHtmlDate(datestr : string){\r\n        let date;\r\n        if(datestr){\r\n            date = new Date(datestr);\r\n        }\r\n        else{\r\n            date = new Date();\r\n        } \r\n        const dd = date.getDate() < 10 ? '0' + date.getDate() : date.getDate();\r\n        const mm = date.getMonth() < 9 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1;\r\n        const yyyy = date.getFullYear();\r\n        \r\n        return yyyy + '-' + mm + '-' + dd;\r\n    }\r\n    \r\n    //MULTI INPUT FIELDS    \r\n    addMaterial() {\r\n        const mat : WO_Material = {'form_id': this.formId,'material_id':'0'};\r\n        this.matList.push(mat);\r\n    }\r\n    \r\n    onDeleteMaterial(itemIdx : number){\r\n        let deletedItem = this.matList[itemIdx];\r\n        this.matList.splice(itemIdx, 1);\r\n        this.suggestedPartsList = [];\r\n        \r\n        //Delete from server\r\n        let inputMap = {\"inputMap\": deletedItem};\r\n        this.fms.deleteMultiInput(inputMap, this.typeId, 'materials', 'material_id')\r\n            .subscribe(data => {}, error => {console.log(error)});\r\n    }\r\n    \r\n    addLabor() {\r\n        const lab : WO_Labor = {'form_id': this.formId};\r\n        this.labList.push(lab);\r\n    }\r\n    \r\n    onDeleteLabor(itemIdx : number){\r\n        this.labList.splice(itemIdx, 1);\r\n    }\r\n    \r\n    //MATERIAL SEARCH\r\n    getPartsList() {\r\n        this.ims.getMaterials('1')\r\n          .subscribe(list => {\r\n              this.partsList = list;\r\n          });\r\n    }\r\n    \r\n    /**\r\n     * When a suggestion is selected, assign part ID to matList at position == itemNum\r\n     * Empty out suggestions for future use\r\n     * @param itemNum\r\n     */\r\n    onSuggestionSelected(itemNum : number, matId, matName: string) {\r\n        this.matList[itemNum].material_id = \"\"+matId;\r\n        (<HTMLInputElement> document.getElementById('matname'+itemNum)).value = matName;\r\n        this.suggestedPartsList = [];\r\n    }\r\n    \r\n    searchItem(input: string, itemIdx: number) {\r\n        this.currFocus = itemIdx;\r\n        if (this.partsList) {\r\n          this.suggestedPartsList = this.partsList.filter(x => \r\n              (x.description.toLowerCase().includes(input.toLowerCase())));\r\n        }\r\n      }\r\n    \r\n    getMaterialName(matId: string) : string {\r\n        if(this.partsList){\r\n            const part = this.partsList.find(x => x.id == matId);\r\n            if(part){\r\n                return part.description;\r\n            }\r\n        }\r\n        return '';\r\n    }\r\n    \r\n    //CUSTOMER SEARCH\r\n    getCustomersList() {\r\n        this.adms.getCustomersByDept('2')\r\n        .subscribe(list => {\r\n            this.customersList = list;\r\n        });\r\n    }\r\n    \r\n    onCustomerSelected(custId: string) {\r\n        const customer : Customer = this.customersList.find(x => x.id == custId);\r\n        this.model.inputMap.project_name = customer.project_name;\r\n        this.model.inputMap.client_name = customer.contact;\r\n        this.model.inputMap.client_phone = customer.phone;\r\n        this.model.inputMap.client_email = customer.email;\r\n        this.custRecList = [];\r\n    }\r\n    \r\n    searchCustomer(input: string) {\r\n        if (this.customersList) {\r\n          this.custRecList = this.customersList.filter(x => \r\n              (x.project_name.toLowerCase().includes(input.toLowerCase())));\r\n        }\r\n      }\r\n    \r\n    //DIAGNOSTIC\r\n    get diagnostic() { return JSON.stringify(this.model); }\r\n    get mdiagnostic() { return JSON.stringify(this.matList); }\r\n    get ldiagnostic() { return JSON.stringify(this.labList); }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Zvcm1zL2ZpbGwvcHVyY2hhc2Utb3JkZXIvcHVyY2hhc2Utb3JkZXIuY29tcG9uZW50LmNzcyJ9 */\"","module.exports = \"<div class=\\\"container-fluid\\\">\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<div class=\\\"col col-sm-offset-1 text-left\\\">\\r\\n\\t\\t\\t<h3><a routerLink=\\\"/view-purchase-order/{{model.process_number}}\\\" class=\\\"back_btn\\\"><span class=\\\"glyphicon glyphicon-chevron-left\\\"></span>Back</a></h3>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<div class=\\\"col-xs-12\\\">\\r\\n\\t\\t    <div class=\\\"row\\\">\\r\\n\\t        \\t<div class=\\\"col-xs-12 col-md-6 col-md-offset-3 text-center\\\">\\r\\n\\t\\t            <h2 class=\\\"text-center\\\">Purchase Order</h2>\\r\\n\\t         \\t</div>\\r\\n\\t        </div>\\r\\n\\t\\t    <form (ngSubmit)=\\\"onSubmit()\\\" #nisshoForm=\\\"ngForm\\\">\\r\\n\\t\\t    \\t<div class=\\\"form-group\\\">\\r\\n\\t\\t            <label class=\\\"group_label_text\\\">Requisition</label>\\r\\n\\t\\t            <div class=\\\"row\\\">\\r\\n\\t\\t                <div class=\\\"col-sm-6 col-xs-6\\\">\\r\\n\\t\\t                    <label for=\\\"req_date\\\">Date</label>\\r\\n\\t\\t                    <input type=\\\"date\\\" class=\\\"form-control\\\" id=\\\"req_date\\\" name=\\\"req_date\\\" [(ngModel)]=\\\"model.inputMap.req_date\\\">\\r\\n\\t\\t                </div>\\r\\n\\t\\t                <div class=\\\"col-sm-6 col-xs-6\\\">\\r\\n\\t\\t                    <label for=\\\"job_num\\\">Job Number</label>\\r\\n\\t\\t                    <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"job_num\\\" name=\\\"job_num\\\" [(ngModel)]=\\\"model.inputMap.job_num\\\">\\r\\n\\t\\t                </div>\\r\\n\\t\\t            </div>\\r\\n\\t\\t            <div class=\\\"row\\\">\\r\\n\\t\\t                <div class=\\\"col-sm-12 col-xs-12\\\">\\r\\n\\t\\t                \\t<label for=\\\"project_name\\\">Job Name</label>\\r\\n                             <input type=\\\"text\\\" autocomplete=\\\"off\\\" class=\\\"form-control\\\" id=\\\"project_name\\\" name=\\\"job_name\\\" (input)=\\\"searchCustomer($event.target.value)\\\" [(ngModel)]=\\\"model.inputMap.job_name\\\" required>\\r\\n                         \\t<div *ngIf=\\\"custRecList\\\" id=\\\"customer_suggestion\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"search_suggestion_entry\\\" *ngFor=\\\"let sugg_part of custRecList\\\" (click)=\\\"onCustomerSelected(sugg_part.id)\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{{sugg_part.project_name}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t                </div>\\r\\n\\t\\t            </div>\\r\\n\\t\\t            <div class=\\\"row\\\">\\r\\n\\t\\t                <div class=\\\"col-sm-6 col-xs-6\\\">\\r\\n\\t\\t                    <label for=\\\"ord_no\\\">Order No</label>\\r\\n\\t\\t                    <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"ord_no\\\" name=\\\"ord_no\\\" [(ngModel)]=\\\"model.inputMap.order_num\\\">\\r\\n\\t\\t                </div>\\r\\n\\t\\t                <div class=\\\"col-sm-6 col-xs-6\\\">\\r\\n\\t\\t                    <label for=\\\"tract_no\\\">Tract No</label>\\r\\n\\t\\t                    <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"tract_no\\\" name=\\\"tract_no\\\" [(ngModel)]=\\\"model.inputMap.tract_num\\\">\\r\\n\\t\\t                </div>\\r\\n\\t\\t            </div>\\r\\n\\t\\t            <div class=\\\"row\\\">\\r\\n\\t\\t                <div class=\\\"col-sm-12 col-xs-12\\\">\\r\\n\\t\\t                    <label for=\\\"lot_nums\\\">Lot Numbers</label>\\r\\n\\t\\t                    <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"lot_nums\\\" name=\\\"lot_nums\\\" [(ngModel)]=\\\"model.inputMap.lot_nums\\\">\\r\\n\\t\\t                </div>\\r\\n\\t\\t            </div>\\r\\n\\t\\t            <div class=\\\"row\\\">\\r\\n\\t\\t                <div class=\\\"col-sm-12 col-xs-12\\\">\\r\\n\\t\\t                    <label for=\\\"client\\\">Client</label>\\r\\n\\t\\t                    <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"client\\\" name=\\\"client\\\" [(ngModel)]=\\\"model.inputMap.client\\\">\\r\\n\\t\\t                </div>\\r\\n\\t\\t            </div>\\r\\n\\t\\t            <div class=\\\"row\\\">\\r\\n\\t\\t                <div class=\\\"col-sm-6 col-xs-6\\\">\\r\\n\\t\\t                    <label for=\\\"delivery_date2\\\">Delivery Date</label>\\r\\n\\t\\t                    <input type=\\\"date\\\" class=\\\"form-control\\\" id=\\\"delivery_date2\\\" name=\\\"delivery_date2\\\" [(ngModel)]=\\\"model.inputMap.delivery_date2\\\">\\r\\n\\t\\t                </div>\\r\\n\\t\\t                <div class=\\\"col-sm-6 col-xs-6\\\">\\r\\n\\t\\t                    <label for=\\\"delivery_time2\\\">Delivery Time</label>\\r\\n\\t\\t                    <input type=\\\"time\\\" class=\\\"form-control\\\" name=\\\"delivery_time2\\\" [(ngModel)]=\\\"model.inputMap.delivery_time2\\\">\\r\\n\\t\\t                </div>\\r\\n\\t\\t            </div>\\r\\n\\t\\t            <div class=\\\"row\\\">\\r\\n\\t\\t                <div class=\\\"col-sm-12 col-xs-12\\\">\\r\\n\\t\\t                    <label for=\\\"ord_by2\\\">Ordered by</label>\\r\\n\\t\\t                    <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"ord_by2\\\" name=\\\"ord_by2\\\" [(ngModel)]=\\\"model.inputMap.ordered_by\\\">\\r\\n\\t\\t                </div>\\r\\n\\t\\t            </div>\\r\\n\\t\\t            <div class=\\\"row\\\">\\r\\n\\t\\t                <div class=\\\"col-xs-12 col-sm-12\\\">\\r\\n\\t\\t                    <label for=\\\"deliver_to\\\">Deliver to:</label>\\r\\n\\t\\t                    <div id=\\\"deliver_to\\\" class=\\\"form-check form-check-inline\\\">\\r\\n                            \\t<label class=\\\"radio-inline\\\" style=\\\"margin-top:0;\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"radio\\\" name=\\\"deliver_to\\\" value=\\\"site\\\" [(ngModel)]=\\\"model.inputMap.deliver_to\\\"> Job Site\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"radio-inline\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"radio\\\" name=\\\"deliver_to\\\" value=\\\"yard\\\" [(ngModel)]=\\\"model.inputMap.deliver_to\\\"> Yard\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"radio-inline\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"radio\\\" name=\\\"deliver_to\\\" value=\\\"will_call\\\" [(ngModel)]=\\\"model.inputMap.deliver_to\\\"> Will Call\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t                    </div>\\r\\n\\t\\t                </div>\\r\\n\\t\\t            </div>\\r\\n\\t\\t        </div>\\r\\n\\t\\t        <div class=\\\"form-group\\\" id=\\\"materials_container\\\">\\r\\n\\t\\t            <label class=\\\"group_label_text\\\">Order Details</label>\\r\\n\\t\\t            \\t<div class=\\\"row\\\" *ngFor=\\\"let mat of matList; let i = index\\\">\\r\\n\\t            \\t\\t\\t<div class=\\\"col-xs-6 col-sm-4\\\">\\r\\n\\t            \\t\\t\\t\\t<label>Description</label>\\r\\n\\t           \\t\\t\\t\\t\\t<input type=\\\"text\\\" id=\\\"matname{{i}}\\\" class='form-control' autocomplete=\\\"off\\\" placeholder=\\\"Search part...\\\"\\r\\n\\t          \\t\\t\\t\\t\\t \\t(input)=\\\"searchItem($event.target.value,i)\\\" value=\\\"{{getMaterialName(mat.material_id)}}\\\"/>\\r\\n\\t          \\t\\t\\t\\t\\t<input type=\\\"hidden\\\" name=\\\"material{{i}}\\\" [(ngModel)]=\\\"mat.material_id\\\" required/>\\r\\n\\t          \\t\\t\\t\\t\\t<div *ngIf=\\\"currFocus == i\\\" id=\\\"mat_suggestions{{i}}\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"search_suggestion_entry\\\" *ngFor=\\\"let sugg_part of suggestedPartsList\\\" (click)=\\\"onSuggestionSelected(i,sugg_part.id,sugg_part.description,sugg_part.price)\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<b>[{{sugg_part.id}}]</b> {{sugg_part.description}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t            \\t\\t\\t</div>\\r\\n\\t            \\t\\t\\t<div class=\\\"col-xs-2 col-sm-2 pad_left_none\\\">\\r\\n\\t            \\t\\t\\t\\t<label>Order qty</label>\\r\\n\\t            \\t\\t\\t\\t<input type=\\\"text\\\" class='form-control' name=\\\"quantity{{i}}\\\" [(ngModel)]=\\\"mat.quantity\\\" placeholder=\\\"qty\\\" required/>\\r\\n\\t            \\t\\t\\t</div>\\r\\n\\t            \\t\\t\\t<div class=\\\"col-xs-2 col-sm-2 pad_left_none\\\">\\r\\n\\t            \\t\\t\\t\\t<label>Back Order</label>\\r\\n\\t            \\t\\t\\t\\t<input type=\\\"text\\\" class='form-control' name=\\\"back_order{{i}}\\\" [(ngModel)]=\\\"mat.back_order\\\"/>\\r\\n\\t            \\t\\t\\t</div>\\r\\n\\t            \\t\\t\\t<div class=\\\"col-xs-2 col-sm-1 pad_left_none\\\">\\r\\n\\t            \\t\\t\\t\\t<label>Unit</label>\\r\\n\\t            \\t\\t\\t\\t<input type=\\\"text\\\" class='form-control' name=\\\"unit{{i}}\\\" [(ngModel)]=\\\"mat.unit\\\"/>\\r\\n\\t            \\t\\t\\t</div>\\r\\n\\t            \\t\\t\\t<div class=\\\"col-xs-2 col-sm-2 pad_left_none\\\">\\r\\n\\t            \\t\\t\\t\\t<label>Unit Price</label>\\r\\n\\t            \\t\\t\\t\\t<input type=\\\"text\\\" class='form-control' name=\\\"price{{i}}\\\" [(ngModel)]=\\\"mat.price\\\"/>\\r\\n\\t            \\t\\t\\t</div>\\r\\n\\t            \\t\\t\\t<div class=\\\"col-xs-2 col-sm-1 pad_left_none\\\">\\r\\n\\t            \\t\\t\\t\\t<a type=\\\"text\\\" class='btn btn-danger pull-right x_button' (click)=\\\"onDeleteMaterial(i)\\\">X</a>\\r\\n\\t            \\t\\t\\t</div>\\r\\n\\t            \\t\\t\\t<div class=\\\"col-xs-12 col-sm-12 text-right\\\">\\r\\n\\t            \\t\\t\\t\\t<label>Subtotal: </label><span class=\\\"view_form_input\\\">{{mat.price * mat.quantity | currency}}</span>\\r\\n\\t            \\t\\t\\t</div>\\r\\n\\t            \\t\\t</div>\\r\\n\\t\\t            </div>\\r\\n\\t\\t            <div class=\\\"form-group row margin_top_15\\\">\\r\\n\\t                    <div class=\\\"col-xs-12 col-sm-12\\\">\\r\\n\\t                        <a id=\\\"ladd_row\\\" class=\\\"btn btn-default pull-left\\\" (click)=\\\"addMaterial()\\\"><b>+Add Item</b></a>\\r\\n\\t                    </div>\\r\\n\\t               \\t</div>\\r\\n\\t\\t            <div class=\\\"row\\\">\\r\\n\\t\\t                <div class=\\\"col-xs-12 col-sm-12 text-right margin_top_15\\\">\\r\\n\\t\\t                    <b>Total: {{total_cost}}</b>\\r\\n\\t\\t                </div>\\r\\n\\t\\t            </div>    \\r\\n\\t\\t                \\r\\n\\t\\t            <div class=\\\"form-group\\\">\\r\\n\\t\\t            \\t<div class=\\\"row\\\">\\r\\n\\t\\t            \\t\\t<div class=\\\"col-xs-12 col-sm-12\\\">\\r\\n\\t\\t            \\t\\t\\t<label for=\\\"dir_remarks\\\">Directions/Remarks</label>\\r\\n\\t\\t            \\t\\t\\t<textarea class=\\\"form-control\\\" id=\\\"dir_remarks\\\" name=\\\"dir_remarks\\\" [(ngModel)]=\\\"model.inputMap.remarks\\\"></textarea>\\r\\n\\t\\t            \\t\\t</div>\\r\\n\\t\\t            \\t</div>\\r\\n\\t\\t            </div>\\r\\n\\t\\t            <div class=\\\"form-group\\\">\\r\\n\\t\\t            \\t<div class=\\\"row\\\">\\r\\n\\t\\t            \\t\\t<div class=\\\"col-xs-12 col-sm-6\\\">\\r\\n\\t\\t            \\t\\t\\t<label for=\\\"req_by_name\\\">Requested by</label>\\r\\n\\t\\t            \\t\\t\\t<input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"req_by_name\\\" name=\\\"req_by_name\\\" [(ngModel)]=\\\"model.inputMap.requested_by\\\">\\r\\n\\t            \\t\\t\\t</div>\\r\\n            \\t\\t\\t</div>\\r\\n           \\t\\t\\t</div>\\r\\n\\t\\t            <div class=\\\"row\\\" *ngIf=\\\"model\\\">\\r\\n\\t\\t                <div class=\\\"col-xs-6 text-right margin_bottom_15\\\">\\r\\n\\t\\t                \\t<button type=\\\"submit\\\" class=\\\"btn btn-info\\\"><b>Save Changes</b></button>\\r\\n\\t\\t                </div>\\r\\n\\t\\t                <div class=\\\"col-xs-6 text-left margin_bottom_15\\\" *ngIf=\\\"model.process_number == '1'\\\">\\r\\n\\t\\t                    <button type=\\\"button\\\" class=\\\"btn btn-success\\\" (click)=\\\"onSubmitProceed()\\\" [disabled]=\\\"!nisshoForm.form.valid\\\"><b>Submit Form</b></button>\\r\\n\\t\\t                </div>\\r\\n\\t\\t            </div>\\r\\n\\t\\t        </form>\\r\\n\\t\\t    </div>\\r\\n\\t</div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { Email } from \"process-smart-ng6-lib\";\r\nimport { ActivatedRoute } from \"@angular/router\";\r\nimport { FormManagementService, AuthenticationService, AdministrationService, EmailNotificationService, User, Form, Material, InventoryManagementService, Customer } from \"process-smart-ng6-lib\";\r\nimport { SharedService } from \"src/app/_services/shared.service\";\r\nimport { Router } from \"@angular/router\";\r\n\r\n@Component({\r\n  selector: 'app-purchase-order',\r\n  templateUrl: './purchase-order.component.html',\r\n  styleUrls: ['./purchase-order.component.css']\r\n})\r\nexport class PurchaseOrderComponent implements OnInit {\r\n    formId: string;\r\n    typeId = '48';\r\n    model: Form;\r\n    fillerUid: string;\r\n    fillerName: string;\r\n    clientId: string;\r\n    roleId: string;\r\n    navigation: string;\r\n    usersList: Array<User>;\r\n    total_cost: number;\r\n    \r\n    customersList: Array<Customer>; //List of all customers (for project name)\r\n    custRecList: Array<Customer>; //List of filtered customers from search\r\n    \r\n    partsList: Array<Material>;     //List of all parts\r\n    suggestedPartsList: Array<Material>;   //Filtered list of parts\r\n    currFocus: number;  //Index of item currently being focused\r\n    matList: Array<any>;    //List of used parts (with select properties)\r\n    \r\n    constructor(private route: ActivatedRoute, private fms: FormManagementService,\r\n          private ssv: SharedService, private aus: AuthenticationService,\r\n          private adms: AdministrationService, private router: Router,\r\n          private ems: EmailNotificationService, private ims: InventoryManagementService) { }\r\n    \r\n    ngOnInit() {\r\n        \r\n        //Get user info from session\r\n        this.fillerUid = JSON.parse(localStorage.getItem('currentUser')).user.uid;\r\n        this.fillerName = JSON.parse(localStorage.getItem('currentUser')).user.name;\r\n        this.roleId = JSON.parse(localStorage.getItem('currentUser')).user.role_id;\r\n        this.clientId = JSON.parse(localStorage.getItem('currentUser')).user.client_id;\r\n        \r\n        this.populateNames();\r\n        this.getPartsList();\r\n        this.getCustomersList();\r\n        \r\n        //Get form ID if specified on route.\r\n        //If specified, load the form.\r\n      this.route.params.subscribe(params => {\r\n            this.formId = params['formId'];\r\n            \r\n            if(this.formId){\r\n                //Load Form\r\n                this.getModel();\r\n            }\r\n            else {\r\n                //Create a new form\r\n                this.model = <Form>{\r\n                    'id': this.formId,\r\n                    'type_id': this.typeId,\r\n                    'status_id': '1',\r\n                    'process_number': '1',\r\n                    'created_date': this.ssv.toHtmlDate(null),\r\n                    'last_modified_date': this.ssv.toHtmlDate(null),\r\n                    'filler_id': this.fillerUid,\r\n                    'modifier_id': this.fillerUid,\r\n                    'inputMap': {\r\n                        'req_date': this.ssv.toHtmlDate(null),\r\n                        'requested_by': this.fillerName\r\n                    },\r\n                    \"inputTables\": {\r\n                        \"materials\": []\r\n                    }\r\n                };\r\n            }\r\n        });\r\n    }\r\n    \r\n    populateNames() {\r\n        this.aus.getUsers()\r\n          .subscribe(usersList => this.usersList = usersList);\r\n    }\r\n    \r\n    getModel() {\r\n        this.fms.getForm(this.typeId, this.formId)\r\n          .subscribe(model => {\r\n              model.created_date = this.ssv.toHtmlDate(model.created_date);\r\n              model.last_modified_date = this.ssv.toHtmlDate(null);\r\n              this.model = model;\r\n              this.matList = model.inputTables.materials;\r\n          });\r\n    }\r\n    \r\n    onSubmit() {\r\n      //Collect all materials and labor\r\n      this.model.inputTables.materials = this.matList;\r\n      \r\n      //Upload form data to DB\r\n      if(this.formId){\r\n          //Update an existing form\r\n          this.fms.updateForm(this.model, this.typeId, this.formId)\r\n          .subscribe(\r\n              data => {\r\n                  //If submitted by Dan, email Natalie\r\n                  if(this.roleId == '4' && this.model.process_number == '2'){\r\n                    //Email from Tech to I.Manager (role = 4) to Customer Service (role = 7)\r\n                      const recipient = this.usersList.find(x => x.role_id == '7' && x.is_active == '1');\r\n                      this.sendIManagerSubmissionEmail(recipient.uid);\r\n                      this.ssv.showSuccess('Form successfully submitted!');\r\n                      this.router.navigate(['/view-purchase-order/1']);\r\n                  }\r\n                  else{\r\n                      this.ssv.showSuccess('Form successfully updated!');\r\n                      this.router.navigate(['/view-purchase-order/2']);\r\n                  }\r\n                },\r\n                error => {\r\n                    // Display error message\r\n                    this.ssv.showError('Unable to update form!');\r\n                }\r\n          );\r\n      }\r\n      else{\r\n          //Create a new form\r\n          this.fms.newForm(this.model, this.typeId)\r\n          .subscribe(\r\n              data => {\r\n                  //If submitted by Dan and is not draft, email Natalie\r\n                //If submitted by Dan, email Natalie\r\n                  if(this.roleId == '4' && this.model.process_number == '2'){\r\n                    //Email from Tech to I.Manager (role = 4) to Customer Service (role = 7)\r\n                      const recipient = this.usersList.find(x => x.role_id == '7' && x.is_active == '1');\r\n                      this.sendIManagerSubmissionEmail(recipient.uid);\r\n                      this.ssv.showSuccess('Form successfully submitted!');\r\n                      this.router.navigate(['/view-purchase-order/1']);\r\n                  }\r\n                  else{\r\n                      this.ssv.showSuccess('Form successfully updated!');\r\n                      this.router.navigate(['/view-purchase-order/2']);\r\n                  }\r\n              }\r\n          );\r\n      }\r\n    }\r\n    \r\n    //Submit to Irrigation Manager\r\n    onSubmitProceed(){\r\n          //Update process number if form is submitted (not just saved as draft)\r\n          this.model.process_number = '2';\r\n          this.onSubmit();\r\n      }\r\n    \r\n    //Send email to Irrigation Manager for approval\r\n    sendIManagerSubmissionEmail(recipientId){\r\n        //Get form filler as recipient\r\n        this.aus.getUser(recipientId).subscribe(\r\n            user => {\r\n                console.log(JSON.stringify(user));\r\n                if(user.email){\r\n                    //Send Email\r\n                    const recipientList = [user.email];\r\n                    const ccList = [];\r\n                    const bccList = [];\r\n                    const subject = \"Purchase Order - Waiting for Review\";\r\n                    const content = user.name + \",\"\r\n                            + \"<br><br>A Purchase Order has been submitted for review.\"\r\n                            + \"<br>Please review and assign a job number to the form.\"\r\n                    const email: Email = {'subject':subject,\r\n                                            'body':content,\r\n                                            'to': recipientList,\r\n                                            'cc':ccList,\r\n                                            'bcc':bccList};\r\n                    this.ems.sendEmail(email).subscribe(data => {});\r\n                }\r\n                else{\r\n                    console.log('Email recipient not found');\r\n                }\r\n            },\r\n            error => {\r\n                console.log(error);\r\n                // Display error message\r\n                this.ssv.showError('Error: Email recipient not found!');\r\n            });\r\n    }\r\n    \r\n    //MULTI INPUT FIELDS    \r\n    addMaterial() {\r\n        const mat : WO_Material = {'form_id': this.typeId,'material_id':'0'};\r\n        if(!this.matList){\r\n            this.matList = [];\r\n        }\r\n        this.matList.push(mat);\r\n    }\r\n    \r\n    onDeleteMaterial(itemIdx : number){\r\n        let deletedItem = this.matList[itemIdx];\r\n        this.matList.splice(itemIdx, 1);\r\n        this.suggestedPartsList = [];\r\n        \r\n        //Delete from server\r\n        let inputMap = {\"inputMap\": deletedItem};\r\n        this.fms.deleteMultiInput(inputMap, this.typeId, 'materials', 'material_id')\r\n            .subscribe(data => {}, error => {console.log(error)});\r\n    }\r\n    \r\n    //MATERIAL SEARCH\r\n    getPartsList() {\r\n        this.ims.getMaterials('1')\r\n          .subscribe(list => {\r\n              this.partsList = list;\r\n          });\r\n    }\r\n    \r\n    /**\r\n     * When a suggestion is selected, assign part ID to matList at position == itemNum\r\n     * Empty out suggestions for future use\r\n     * @param itemNum\r\n     */\r\n    onSuggestionSelected(itemNum : number, matId, matName: string) {\r\n        this.matList[itemNum].material_id = \"\"+matId;\r\n        const part = this.partsList.find(x => x.id == matId);\r\n        if(part){\r\n            this.matList[itemNum].price = \"\" + part.price;\r\n            this.matList[itemNum].unit = part.unit;\r\n        }\r\n        \r\n        (<HTMLInputElement> document.getElementById('matname'+itemNum)).value = matName;\r\n        this.suggestedPartsList = [];\r\n    }\r\n    \r\n    searchItem(input: string, itemIdx: number) {\r\n        this.currFocus = itemIdx;\r\n        if(!input){\r\n            this.suggestedPartsList = [];\r\n            return;\r\n        }\r\n        if (this.partsList) {\r\n          this.suggestedPartsList = this.partsList.filter(x => \r\n              (x.description.toLowerCase().includes(input.toLowerCase())) ||\r\n              (x.id == input));\r\n        }\r\n      }\r\n    \r\n    getMaterialName(matId: string) : string {\r\n        if(this.partsList){\r\n            const part = this.partsList.find(x => x.id == matId);\r\n            if(part){\r\n                return part.description;\r\n            }\r\n        }\r\n        return '';\r\n    }\r\n    \r\n    //CUSTOMER SEARCH\r\n    getCustomersList() {\r\n        this.adms.getCustomersByDept('2')\r\n        .subscribe(list => {\r\n            this.customersList = list;\r\n        });\r\n    }\r\n    \r\n    onCustomerSelected(custId: string) {\r\n        const customer : Customer = this.customersList.find(x => x.id == custId);\r\n        this.model.inputMap.job_name = customer.project_name;\r\n        this.model.inputMap.job_num = customer.jobnum;\r\n        this.model.inputMap.client = customer.management;\r\n        this.custRecList = [];\r\n    }\r\n    \r\n    searchCustomer(input: string) {\r\n        if (this.customersList) {\r\n          this.custRecList = this.customersList.filter(x => \r\n              (x.project_name.toLowerCase().includes(input.toLowerCase())));\r\n        }\r\n      }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Zvcm1zL2ZpbGwvc3RhcnQtam9iL3N0YXJ0LWpvYi5jb21wb25lbnQuY3NzIn0= */\"","module.exports = \"<!-- This page fragment is to be included under Dashboard <body> tag -->\\r\\n\\r\\n<div class=\\\"row margin_addform text-left\\\">\\r\\n   \\t<h2 class=\\\"text-center\\\">Start a Job</h2>\\r\\n    <div class=\\\"col-xs-12 col-md-10 col-md-offset-1 margin_addform\\\">\\r\\n    \\t<form (ngSubmit)=\\\"onSubmit()\\\" #nisshoForm=\\\"ngForm\\\">\\r\\n    \\t\\t<div class=\\\"row\\\">\\r\\n\\t        \\t<div class=\\\"col-xs-12 col-md-4 col-md-offset-4 text-left\\\">\\r\\n\\t\\t            <label for=\\\"job_number\\\">Enter Job Number</label>\\r\\n\\t         \\t</div>\\r\\n            </div>\\r\\n            <div class=\\\"row\\\">\\r\\n            \\t<div class=\\\"col-xs-6 col-md-4 col-md-offset-4 text-left\\\">\\r\\n\\t\\t            <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"Job #\\\" name=\\\"job_number\\\" [(ngModel)]=\\\"job_number\\\" required>\\r\\n\\t         \\t</div>\\r\\n\\t         \\t<div class=\\\"col-xs-6 col-md-4 text-left\\\">\\r\\n\\t                <button type=\\\"submit\\\" class=\\\"btn btn-success\\\" [disabled]=\\\"!nisshoForm.form.valid\\\"><b>Start Job</b></button>\\r\\n\\t            </div>\\r\\n            </div>\\r\\n    \\t</form>\\t\\r\\n   \\t</div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { Form, FormManagementService } from \"process-smart-ng6-lib\";\r\nimport { SharedService } from \"src/app/_services/shared.service\";\r\nimport { Router } from \"@angular/router\";\r\n\r\n@Component({\r\n  selector: 'app-start-job',\r\n  templateUrl: './start-job.component.html',\r\n  styleUrls: ['./start-job.component.css']\r\n})\r\nexport class StartJobComponent implements OnInit {\r\n\r\n    typeId = '45';  //Work Order\r\n    typeId2 = '54'; //Stock Transfer\r\n    model: Form;    //Work Order\r\n    model2: Form;    //Stock Transfer\r\n    fillerUid: string;\r\n    job_number: string;\r\n    jobNumsAvailable: Array<string>;\r\n    \r\n  constructor(private fms: FormManagementService, private ssv: SharedService,\r\n          private router: Router) { }\r\n\r\n  ngOnInit() {\r\n      this.fillerUid = JSON.parse(localStorage.getItem('currentUser')).user.uid;\r\n      this.populateJobNumberList();\r\n      this.jobNumsAvailable = [];\r\n      \r\n      //Init Work Order model\r\n      this.model = <Form>{\r\n              'id': '0',\r\n              'type_id': this.typeId,\r\n              'status_id': '1',\r\n              'process_number': '1',\r\n              'created_date': this.ssv.toHtmlDate(null),\r\n              'last_modified_date': this.ssv.toHtmlDate(null),\r\n              'filler_id': this.fillerUid,\r\n              'modifier_id': this.fillerUid,\r\n              'inputMap': {\r\n                  'date': this.ssv.toHtmlDate(null)\r\n              },\r\n              \"inputTables\": {\r\n                  \"materials\": [],\r\n                  \"labors\": []\r\n              }\r\n          };\r\n      \r\n      //Init Stock Transfer model\r\n      this.model2 = <Form>{\r\n              'id': '0',\r\n              'type_id': this.typeId2,\r\n              'status_id': '1',\r\n              'process_number': '1',\r\n              'created_date': this.ssv.toHtmlDate(null),\r\n              'last_modified_date': this.ssv.toHtmlDate(null),\r\n              'filler_id': this.fillerUid,\r\n              'modifier_id': this.fillerUid,\r\n              'inputMap': {\r\n                  'date': this.ssv.toHtmlDate(null)\r\n              },\r\n              \"inputTables\": {\r\n                  \"materials\": []\r\n              }\r\n          };\r\n  }\r\n  \r\n  onSubmit() {\r\n      if(!this.jobNumsAvailable.includes(this.job_number)){\r\n        //Create a new work order\r\n          this.model.inputMap.job_num = this.job_number;\r\n          this.fms.newForm(this.model, this.typeId)\r\n          .subscribe(\r\n              data => {\r\n                  let woId = data['formId'];\r\n                //If successful, create a new stock transfer\r\n                  this.model2.inputMap.job_num = this.job_number;\r\n                  this.fms.newForm(this.model2, this.typeId2)\r\n                  .subscribe(\r\n                      data => {\r\n                            // Page redirect when getting response\r\n                              this.ssv.showSuccess('Form successfully created!');\r\n                            this.router.navigate(['/work-order/'+woId]);\r\n                        },\r\n                        error => {\r\n                            // Display error message\r\n                            this.ssv.showError('Unable to create stock transfer!');\r\n                        }\r\n                  );\r\n                },\r\n                error => {\r\n                    // Display error message\r\n                    this.ssv.showError('Unable to start job!');\r\n                }\r\n          );\r\n          \r\n      }\r\n      else{\r\n          this.ssv.showError('Error: job number taken!');\r\n      }\r\n    }\r\n\r\n  populateJobNumberList() {\r\n      //Get job numbers from non-deleted Work Orders (type = '45')\r\n      this.fms.getForms(this.typeId, 1000, 'DESC', 0)\r\n        .subscribe(WOList => {\r\n            if(WOList){\r\n                this.jobNumsAvailable = WOList.filter(x => x.is_deleted == '0').map(x => x.inputMap.job_num);\r\n            }\r\n        });\r\n    }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Zvcm1zL2ZpbGwvc3RvY2stdHJhbnNmZXIvc3RvY2stdHJhbnNmZXIuY29tcG9uZW50LmNzcyJ9 */\"","module.exports = \"<div class=\\\"container-fluid\\\">\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<div class=\\\"col col-sm-offset-1 text-left\\\">\\r\\n\\t\\t\\t<h3><a routerLink=\\\"/view-stock-transfer\\\" class=\\\"back_btn\\\"><span class=\\\"glyphicon glyphicon-chevron-left\\\"></span>Back</a></h3>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<div class=\\\"col-lg-2 col-md-1\\\"></div>\\r\\n\\t\\t<div class=\\\"col-lg-8 col-md-10 col-xs-12\\\">\\r\\n        \\t<div class=\\\"row\\\">\\r\\n\\t        \\t<div class=\\\"col-xs-12 col-md-6 col-md-offset-3 text-center\\\">\\r\\n\\t\\t            <h2 class=\\\"text-center\\\">Stock Transfer</h2>\\r\\n\\t         \\t</div>\\r\\n\\t        </div>\\r\\n            <form (ngSubmit)=\\\"onSubmit()\\\" #nisshoForm=\\\"ngForm\\\">\\r\\n                 <div class=\\\"form-group\\\">\\r\\n                     <label class=\\\"group_label_text\\\">Project Information</label>\\r\\n                     <div class=\\\"row\\\">\\r\\n                         <div class=\\\"col-sm-6 col-xs-12\\\">\\r\\n                             <label for=\\\"job_num\\\">Job Number</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t<input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"job_num\\\" name=\\\"job_num\\\" [(ngModel)]=\\\"model.inputMap.job_num\\\">\\r\\n                         </div>\\r\\n                         <div class=\\\"col-sm-6 col-xs-12\\\">\\r\\n                             <label for=\\\"date\\\">Date</label>\\r\\n                             <input type=\\\"date\\\" class=\\\"form-control\\\" id=\\\"date\\\" name=\\\"date\\\"  [(ngModel)]=\\\"model.inputMap.date\\\">\\r\\n                         </div>\\r\\n                     </div>\\r\\n                     <div class=\\\"row\\\">\\r\\n                         <div class=\\\"col-sm-12 col-xs-12\\\">\\r\\n                             <label for=\\\"project_name\\\">Project Name</label>\\r\\n                             <input type=\\\"text\\\" autocomplete=\\\"off\\\" class=\\\"form-control\\\" id=\\\"project_name\\\" name=\\\"project_name\\\" (input)=\\\"searchCustomer($event.target.value)\\\" [(ngModel)]=\\\"model.inputMap.name\\\" required>\\r\\n                         \\t<div *ngIf=\\\"custRecList\\\" id=\\\"customer_suggestion\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"search_suggestion_entry\\\" *ngFor=\\\"let sugg_part of custRecList\\\" (click)=\\\"onCustomerSelected(sugg_part.id)\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{{sugg_part.project_name}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n                         </div>\\r\\n                     </div>\\r\\n                 </div>\\r\\n                     \\r\\n               <div class=\\\"form-group\\\" id=\\\"materials_container\\\">\\r\\n                   <label class=\\\"group_label_text\\\">Materials Used</label>\\r\\n              \\t\\t<div class=\\\"row\\\" *ngFor=\\\"let mat of matList; let i = index\\\">\\r\\n              \\t\\t\\t<div class=\\\"col-xs-7 col-sm-7 pad_right_5\\\">\\r\\n          \\t\\t\\t\\t\\t<input type=\\\"text\\\" id=\\\"matname{{i}}\\\" class='form-control' autocomplete=\\\"off\\\" placeholder=\\\"Search part...\\\"\\r\\n          \\t\\t\\t\\t\\t (input)=\\\"searchItem($event.target.value,i)\\\" value=\\\"{{getMaterialName(mat.material_id)}}\\\"/>\\r\\n          \\t\\t\\t\\t\\t<input type=\\\"hidden\\\" name=\\\"material{{i}}\\\" [(ngModel)]=\\\"mat.material_id\\\" required/>\\r\\n          \\t\\t\\t\\t\\t<div *ngIf=\\\"currFocus == i\\\" id=\\\"mat_suggestions{{i}}\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"search_suggestion_entry\\\" *ngFor=\\\"let sugg_part of suggestedPartsList\\\" (click)=\\\"onSuggestionSelected(i,sugg_part.id,sugg_part.description,sugg_part.price)\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{{sugg_part.description}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n              \\t\\t\\t</div>\\r\\n              \\t\\t\\t<div class=\\\"col-xs-3 col-sm-3 pad_right_5 pad_left_none\\\">\\r\\n              \\t\\t\\t\\t<input type=\\\"text\\\" class='form-control' name=\\\"quantity{{i}}\\\" [(ngModel)]=\\\"mat.quantity\\\" placeholder=\\\"qty\\\" required/>\\r\\n              \\t\\t\\t</div>\\r\\n              \\t\\t\\t<div class=\\\"col-xs-2 col-sm-2 pad_left_none\\\">\\r\\n             \\t\\t\\t\\t<a type=\\\"text\\\" class='btn btn-danger pull-right x_button' (click)=\\\"onDeleteMaterial(i)\\\">X</a>\\r\\n             \\t\\t\\t</div>\\r\\n              \\t\\t</div>\\r\\n               </div>\\r\\n               <div class=\\\"form-group row margin_top_15\\\">\\r\\n                    <div class=\\\"col-xs-12 col-sm-12\\\">\\r\\n                        <a id=\\\"ladd_row\\\" class=\\\"btn btn-default pull-left\\\" (click)=\\\"addMaterial()\\\"><b>+Add Material</b></a>\\r\\n                    \\t<button id=\\\"scan_button\\\" type=\\\"button\\\" (click)=\\\"scanPart()\\\" class=\\\"btn btn-default pull-right\\\"><b>SCAN</b></button>\\r\\n                    </div>\\r\\n               \\t</div>\\r\\n               \\t\\r\\n                <div class=\\\"row\\\">\\r\\n\\t                <div class=\\\"col-xs-6 text-right margin_bottom_15\\\">\\r\\n\\t                \\t<button type=\\\"submit\\\" class=\\\"btn btn-info\\\"><b>Save as Draft</b></button>\\r\\n\\t                </div>\\r\\n\\t                <div class=\\\"col-xs-6 text-left margin_bottom_15\\\">\\r\\n\\t                    <button type=\\\"button\\\" class=\\\"btn btn-success\\\" (click)=\\\"onSubmitProceed()\\\" [disabled]=\\\"!nisshoForm.form.valid\\\"><b>Submit Form</b></button>\\r\\n\\t                </div>\\r\\n\\t            </div>\\r\\n            </form>\\r\\n        </div>\\r\\n        <div class=\\\"col-lg-2\\\"></div>\\r\\n    </div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from \"@angular/router\";\r\nimport { FormManagementService, AdministrationService, Customer, Form, Material, InventoryManagementService } from \"process-smart-ng6-lib\";\r\nimport { SharedService } from \"src/app/_services/shared.service\";\r\nimport { CookieService } from 'ngx-cookie-service';\r\n\r\n@Component({\r\n  selector: 'app-stock-transfer',\r\n  templateUrl: './stock-transfer.component.html',\r\n  styleUrls: ['./stock-transfer.component.css']\r\n})\r\nexport class StockTransferComponent implements OnInit {\r\n    formId: string;\r\n    typeId = '46';\r\n    model: Form;\r\n    fillerUid: string;\r\n    clientId: string;\r\n    \r\n    customersList: Array<Customer>; //List of all customers (for project name)\r\n    custRecList: Array<Customer>; //List of filtered customers from search\r\n    \r\n    partsList: Array<Material>;     //List of all parts\r\n    suggestedPartsList: Array<Material>;   //Filtered list of parts\r\n    currFocus: number;  //Index of item currently being focused\r\n    \r\n    matList: Array<any>;    //List of used parts (with select properties)\r\n    iosScanFlag = false;\r\n    isDraft = true;\r\n    \r\n    constructor(private route: ActivatedRoute, private fms: FormManagementService,\r\n            private ssv: SharedService, private adms: AdministrationService, \r\n            private ims: InventoryManagementService, private router: Router,\r\n            private coos: CookieService) { }\r\n      \r\n      ngOnInit() {\r\n          //Get user info from session\r\n          this.fillerUid = JSON.parse(localStorage.getItem('currentUser')).user.uid;\r\n          this.clientId = JSON.parse(localStorage.getItem('currentUser')).user.client_id;\r\n          \r\n          //Populate customers for search\r\n          this.getPartsList();\r\n          this.getCustomersList();\r\n          \r\n          //Get form ID if specified on route.\r\n          //If specified, load the form.\r\n        this.route.params.subscribe(params => {\r\n              this.formId = params['formId'];\r\n              \r\n              if(this.formId){\r\n                //Save form ID in cookie\r\n                  //document.cookie = 'formId=' + this.formId + '; max-age=86400; path=\"/\"';\r\n                  this.coos.set('formId', this.formId, null, '/');\r\n                  \r\n                  //Load Form\r\n                  this.getModel();\r\n              }\r\n              else {\r\n                  //Create a new form\r\n                  this.model = <Form>{\r\n                      'id': this.formId,\r\n                      'type_id': this.typeId,\r\n                      'status_id': '1',\r\n                      'process_number': '1',\r\n                      'created_date': this.toHtmlDate(null),\r\n                      'last_modified_date': this.toHtmlDate(null),\r\n                      'filler_id': this.fillerUid,\r\n                      'modifier_id': this.fillerUid,\r\n                      'inputMap': {\r\n                          \"date\": this.toHtmlDate(null)\r\n                      },\r\n                      \"inputTables\": {\r\n                          \"materials\": []\r\n                      }\r\n                  };\r\n                  this.matList = [];\r\n              }\r\n          });\r\n      }\r\n      \r\n      getModel() {\r\n          this.fms.getForm(this.typeId, this.formId)\r\n            .subscribe(model => {\r\n                model.created_date = this.toHtmlDate(model.created_date);\r\n                model.last_modified_date = this.toHtmlDate(null);\r\n                this.model = model;\r\n                this.matList = model.inputTables.materials;\r\n            });\r\n      }\r\n      \r\n      onSubmit() {\r\n        //Collect all materials and labor\r\n          this.model.inputTables.materials = this.matList;\r\n          \r\n          //Get api key\r\n          const apiKey = JSON.parse(localStorage.getItem('currentUser')).apiKey;\r\n          const form_id = this.formId;  \r\n          \r\n          //Upload form data to DB\r\n          if(this.formId){\r\n              //Update an existing form\r\n              this.fms.updateForm(this.model, this.typeId, this.formId)\r\n              .subscribe(\r\n                  data => {\r\n                    //Save form ID in cookie\r\n                      //document.cookie = 'formId=' + data['formId'] + '; max-age=86400; path=\"/\"';\r\n                      this.coos.set('formId', this.formId, null, '/');\r\n                      \r\n                      if(this.iosScanFlag){\r\n                          this.iosScanFlag = false;\r\n                          //console.log(\"Sending to: \"+\"scanpart://nissho/\"+this.formId+\"/\"+apiKey);\r\n                          \r\n                          setTimeout(function(){document.location.href=\"scanpart://nissho/\"+form_id+\"/\"+apiKey},250);\r\n                      }\r\n                      else{\r\n                          this.ssv.showSuccess('Form successfully updated!');\r\n                          // @ts-ignore\r\n                         Android.reloadWebview();\r\n                         \r\n                         if(this.model.process_number == '2'){\r\n                             this.router.navigate(['/view-stock-transfer/1']);\r\n                         }\r\n                      }\r\n                    },\r\n                    error => {\r\n                        // Display error message\r\n                        this.ssv.showError('Unable to update form!');\r\n                    }\r\n              );\r\n          }\r\n          else{\r\n              //Create a new form\r\n              this.fms.newForm(this.model, this.typeId)\r\n              .subscribe(\r\n                  data => {\r\n                      //Save form ID in cookie\r\n                      //document.cookie = 'formId=' + data['formId'] + '; max-age=86400; path=\"/\"';\r\n                      this.coos.set('formId', data['formId'], null, '/');\r\n                      \r\n                      this.formId = data['formId'];\r\n                        // Page redirect when getting response\r\n                      this.ssv.showSuccess('Form successfully updated!');\r\n                        \r\n                        if(this.iosScanFlag){\r\n                            this.iosScanFlag = false;\r\n                            //console.log(\"Sending to: \"+\"scanpart://nissho/\"+data['formId']+\"/\"+apiKey);\r\n                            setTimeout(function(){document.location.href=\"scanpart://nissho/\"+data['formId']+\"/\"+apiKey},250);\r\n                        }\r\n                        else{\r\n                             // @ts-ignore\r\n                            Android.reloadWebview();\r\n                            \r\n                            if(this.model.process_number == '2'){\r\n                                this.router.navigate(['/view-stock-transfer/1']);\r\n                            }\r\n                            else{\r\n                                this.router.navigate(['/stock-transfer/'+data['formId']]);\r\n                            }\r\n                        }\r\n                    \r\n                    },\r\n                    error => {\r\n                        // Display error message\r\n                        this.ssv.showError('Unable to update form!');\r\n                    }\r\n              );\r\n          }\r\n      }\r\n      \r\n      onSubmitProceed(){\r\n        //Update process number if form is submitted (not just saved as draft)\r\n          this.model.process_number = '2';\r\n          this.onSubmit();\r\n      }\r\n      \r\n      toHtmlDate(datestr : string){\r\n          let date;\r\n          if(datestr){\r\n              date = new Date(datestr);\r\n          }\r\n          else{\r\n              date = new Date();\r\n          } \r\n          const dd = date.getDate() < 10 ? '0' + date.getDate() : date.getDate();\r\n          const mm = date.getMonth() < 9 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1;\r\n          const yyyy = date.getFullYear();\r\n          \r\n          return yyyy + '-' + mm + '-' + dd;\r\n      }\r\n      \r\n    //MULTI INPUT FIELDS    \r\n      addMaterial() {\r\n          const mat : WO_Material = {'form_id': this.typeId,'material_id':'0'};\r\n          this.matList.push(mat);\r\n      }\r\n      \r\n      onDeleteMaterial(itemIdx : number){\r\n          let deletedItem = this.matList[itemIdx];\r\n          this.matList.splice(itemIdx, 1);\r\n          this.suggestedPartsList = [];\r\n          \r\n          //Delete from server\r\n          let inputMap = {\"inputMap\": deletedItem};\r\n          this.fms.deleteMultiInput(inputMap, this.typeId, 'materials', 'material_id')\r\n              .subscribe(data => {}, error => {console.log(error)});\r\n      }\r\n      \r\n    //MATERIAL SEARCH\r\n      getPartsList() {\r\n          this.ims.getMaterials('6')\r\n            .subscribe(list => {\r\n                this.partsList = list;\r\n            });\r\n      }\r\n      \r\n      /**\r\n       * When a suggestion is selected, assign part ID to matList at position == itemNum\r\n       * Empty out suggestions for future use\r\n       * @param itemNum\r\n       */\r\n      onSuggestionSelected(itemNum : number, matId, matName: string, price) {\r\n          this.matList[itemNum].material_id = \"\"+matId;\r\n          if(price){\r\n              this.matList[itemNum].price = \"\"+price;\r\n          }\r\n          else{\r\n              this.matList[itemNum].price = \"0\";\r\n          }\r\n          \r\n          (<HTMLInputElement> document.getElementById('matname'+itemNum)).value = matName;\r\n          this.suggestedPartsList = [];\r\n      }\r\n      \r\n      searchItem(input: string, itemIdx: number) {\r\n          this.currFocus = itemIdx;\r\n          if (this.partsList) {\r\n            this.suggestedPartsList = this.partsList.filter(x => \r\n                (x.description.toLowerCase().includes(input.toLowerCase())));\r\n          }\r\n        }\r\n      \r\n      getMaterialName(matId: string) : string {\r\n          if(this.partsList){\r\n              const part = this.partsList.find(x => x.id == matId);\r\n              if(part){\r\n                  return part.description;\r\n              }\r\n          }\r\n          return '';\r\n      }\r\n      \r\n      //CUSTOMER SEARCH\r\n      getCustomersList() {\r\n          this.adms.getCustomersByDept('6')\r\n          .subscribe(list => {\r\n              this.customersList = list;\r\n          });\r\n      }\r\n      \r\n      onCustomerSelected(custId: string) {\r\n          const customer : Customer = this.customersList.find(x => x.id == custId);\r\n          this.model.inputMap.name = customer.project_name;\r\n          this.model.inputMap.job_num = customer.jobnum;\r\n          this.custRecList = [];\r\n      }\r\n      \r\n      searchCustomer(input: string) {\r\n          if (this.customersList) {\r\n            this.custRecList = this.customersList.filter(x => \r\n                (x.project_name.toLowerCase().includes(input.toLowerCase())));\r\n          }\r\n      }\r\n      \r\n      scanPart(){\r\n          //Call Android Scanner function\r\n        //Check if user is using iOS\r\n          var userAgent = window.navigator.userAgent.toLowerCase(),\r\n          safari = /safari/.test( userAgent ),\r\n          ios = /iphone|ipod|ipad/.test( userAgent );\r\n          \r\n          if( ios ) {\r\n              console.log('IS IOS');\r\n              if ( safari ) {\r\n                  //Safari browser\r\n              } else if ( !safari ) {\r\n                  //Webview\r\n                  //Navigate to a fake URL\r\n                  //setTimeout(function(){document.location.href=\"scanpart://nissho/irrigation\"},250)\r\n                  this.iosScanFlag = true;\r\n                  this.onSubmit();\r\n              };\r\n          } else {\r\n              this.onSubmit();\r\n              //Call Android Scanner function\r\n              console.log('Not IOS');\r\n              // @ts-ignore\r\n              Android.startScan();\r\n          };\r\n      }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Zvcm1zL2ZpbGwvd2Fsa3Rocm91Z2gvd2Fsa3Rocm91Z2guY29tcG9uZW50LmNzcyJ9 */\"","module.exports = \"<div class=\\\"modal fade nmodal_layer\\\" id=\\\"deleteWTModal\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" data-backdrop=\\\"false\\\">\\r\\n  <div class=\\\"modal-dialog\\\" role=\\\"document\\\">\\r\\n    <div class=\\\"modal-content\\\">\\r\\n      <div class=\\\"modal-header text-center\\\">\\r\\n      \\t<button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\r\\n      \\t<h4 class=\\\"modal-title\\\">Confirm Note Deletion</h4>\\r\\n      </div>\\r\\n      <div class=\\\"modal-body modal_body_warning text-center\\\">\\r\\n\\t\\t<b>Delete Note #{{focusedId+1}}?</b><br>\\r\\n      </div>\\r\\n      <div class=\\\"modal-footer text-center\\\">\\r\\n      \\t<button type=\\\"button\\\" (click)=\\\"onDeleteNote()\\\" class=\\\"btn btn-danger margin_right_15\\\">Delete</button>\\r\\n      \\t<button type=\\\"button\\\" class=\\\"btn\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\">Cancel</button>\\r\\n      </div>\\r\\n    </div><!-- /.modal-content -->\\r\\n  </div><!-- /.modal-dialog -->\\r\\n</div><!-- /.modal -->\\r\\n\\r\\n<div class=\\\"container-fluid\\\">\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<div class=\\\"col col-sm-offset-1 text-left\\\">\\r\\n\\t\\t\\t<h3><a routerLink=\\\"/view-walkthrough/2\\\" class=\\\"back_btn\\\"><span class=\\\"glyphicon glyphicon-chevron-left\\\"></span>Back</a></h3>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<div class=\\\"col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 col-xs-12\\\">\\r\\n        \\t<div class=\\\"row\\\">\\r\\n\\t        \\t<div class=\\\"col-xs-12 col-md-6 col-md-offset-3 text-center\\\">\\r\\n\\t\\t            <h2 class=\\\"text-center\\\">Walkthrough Form</h2>\\r\\n\\t         \\t</div>\\r\\n\\t        </div>\\r\\n            <form *ngIf=\\\"model\\\" (ngSubmit)=\\\"onSubmit()\\\" #nisshoForm=\\\"ngForm\\\">\\r\\n                <div class=\\\"form-group\\\">\\r\\n                \\t<label class=\\\"group_label_text\\\">Project Info</label>\\r\\n                \\t<div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-xs-12 col-sm-6\\\">\\r\\n                        \\t<label for=\\\"walkthrough_type\\\">Walkthrough Type</label>\\r\\n              \\t\\t\\t\\t<select class=\\\"form-control\\\" name=\\\"walkthrough_type\\\" [(ngModel)]=\\\"model.inputMap.walkthrough_type\\\">\\r\\n               \\t\\t\\t\\t\\t\\t<option value=\\\"HOA\\\" selected>HOA</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"Job\\\">Job</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"Models\\\">Models</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"Turnover\\\">Turnover</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t</select>\\r\\n           \\t\\t\\t\\t</div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-sm-6 col-xs-12\\\">\\r\\n                             <label for=\\\"project_name\\\">Project Name</label>\\r\\n                             <input type=\\\"text\\\" autocomplete=\\\"off\\\" class=\\\"form-control\\\" id=\\\"project_name\\\" name=\\\"project_name\\\" (input)=\\\"searchCustomer($event.target.value)\\\" [(ngModel)]=\\\"model.inputMap.project_name\\\" required>\\r\\n                         \\t<div *ngIf=\\\"custRecList\\\" id=\\\"customer_suggestion\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"search_suggestion_entry\\\" *ngFor=\\\"let sugg_part of custRecList\\\" (click)=\\\"onCustomerSelected(sugg_part.id)\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{{sugg_part.project_name}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n                         </div>\\r\\n                        <div class=\\\"col-sm-6 col-xs-12\\\">\\r\\n                            <label for=\\\"lot_numbers\\\">Site</label>\\r\\n                            <input type=\\\"text\\\" autocomplete=\\\"off\\\" class=\\\"form-control\\\" id=\\\"lot_numbers\\\" name=\\\"lot_numbers\\\" [(ngModel)]=\\\"model.inputMap.lot_numbers\\\">\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-sm-12 col-xs-12\\\">\\r\\n                            <label for=\\\"management_company\\\">Management Company / Developer</label>\\r\\n                            <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"management_company\\\" name=\\\"management_company\\\" [(ngModel)]=\\\"model.inputMap.management_company\\\">\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-sm-12 col-xs-12\\\">\\r\\n                            <label for=\\\"management_email\\\">Management Email</label>\\r\\n                        \\t<textarea class=\\\"form-control\\\" id=\\\"management_email\\\" name=\\\"management_email\\\" [(ngModel)]=\\\"model.inputMap.management_email\\\"></textarea>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\">\\r\\n                \\t\\t<div class=\\\"col-xs-12 col-sm-12\\\">\\r\\n                \\t\\t\\t<label for=\\\"attending\\\">Attending</label>\\r\\n                \\t\\t\\t<textarea class=\\\"form-control\\\" id=\\\"attending\\\" name=\\\"attending\\\" [(ngModel)]=\\\"model.inputMap.attending\\\" required></textarea>\\r\\n                \\t\\t</div>\\r\\n                \\t</div>\\r\\n                \\t<div class=\\\"row\\\">\\r\\n                \\t\\t<div class=\\\"col-sm-4 col-xs-12\\\">\\r\\n                            <label for=\\\"date\\\">Date</label>\\r\\n                            <input type=\\\"date\\\" class=\\\"form-control\\\" id=\\\"date\\\" name=\\\"date\\\" [(ngModel)]=\\\"model.inputMap.date\\\">\\r\\n                        </div>\\r\\n                \\t\\t<div class=\\\"col-sm-4 col-sm-offset-2 col-xs-12\\\">\\r\\n                \\t\\t\\t<label for=\\\"complete_by\\\">Complete by</label>\\r\\n                            <input type=\\\"date\\\" class=\\\"form-control\\\" id=\\\"complete_by\\\" name=\\\"complete_by\\\" [(ngModel)]=\\\"model.inputMap.complete_by\\\">\\r\\n                \\t\\t</div>\\r\\n                \\t</div>\\r\\n                </div>\\r\\n                <div id=\\\"notes_container\\\">\\r\\n                    <label class=\\\"group_label_text\\\">Notes</label>\\r\\n                   \\t<div class=\\\"row form-group\\\" *ngFor=\\\"let note of notesList; let i = index\\\">\\r\\n             \\t\\t\\t<div class=\\\"col-xs-3 col-sm-3 large_label\\\">\\r\\n               \\t\\t\\t\\tItem #{{i+1}}\\r\\n               \\t\\t\\t</div>\\r\\n               \\t\\t\\t<div class=\\\"col-xs-2 col-sm-2 col-xs-offset-7 col-sm-offset-7 pad_left_none\\\">\\r\\n               \\t\\t\\t\\t<a type=\\\"text\\\" class='btn btn-danger pull-right x_button' \\r\\n               \\t\\t\\t\\t(click)=\\\"onClickForm(i)\\\" data-toggle=\\\"modal\\\" data-target=\\\"#deleteWTModal\\\">X</a>\\r\\n               \\t\\t\\t</div>\\r\\n               \\t\\t\\t<div class=\\\"col-xs-12 col-sm-12\\\">\\r\\n               \\t\\t\\t\\t<label>Area/Location</label>\\r\\n               \\t\\t\\t\\t<input type=\\\"text\\\" class='form-control' name=\\\"address{{i}}\\\" [(ngModel)]=\\\"note.address\\\"/>\\r\\n               \\t\\t\\t</div>\\r\\n               \\t\\t\\t<div class=\\\"col-xs-12 col-sm-12\\\">\\r\\n               \\t\\t\\t\\t<label>Description</label>\\r\\n               \\t\\t\\t\\t<textarea class=\\\"form-control\\\" name=\\\"description{{i}}\\\" [(ngModel)]=\\\"note.description\\\"></textarea>\\r\\n               \\t\\t\\t</div>\\r\\n               \\t\\t\\t<div *ngIf=\\\"note.attachment1 && !attachments1[i]\\\" class=\\\"col-xs-12 col-sm-6 col-md-4\\\">\\r\\n               \\t\\t\\t\\t<img src=\\\"{{getS3FormPicUrl(note.attachment1)}}\\\" class=\\\"uploaded_img img-responsive\\\">\\r\\n               \\t\\t\\t</div>\\r\\n               \\t\\t\\t<div *ngIf=\\\"!note.attachment1 || attachments1[i]\\\" class=\\\"col-xs-12 col-sm-6 col-md-4\\\">\\r\\n               \\t\\t\\t\\t<input type=\\\"file\\\" class=\\\"form-control\\\" accept=\\\"image/*\\\" (change)=\\\"onFileAdded($event,i,1)\\\">\\r\\n               \\t\\t\\t</div>\\r\\n               \\t\\t\\t\\r\\n               \\t\\t\\t<div *ngIf=\\\"note.attachment2 && !attachments2[i]\\\" class=\\\"col-xs-12 col-sm-6 col-md-4\\\">\\r\\n               \\t\\t\\t\\t<img src=\\\"{{getS3FormPicUrl(note.attachment2)}}\\\" class=\\\"uploaded_img img-responsive\\\">\\r\\n               \\t\\t\\t</div>\\r\\n               \\t\\t\\t<div *ngIf=\\\"!note.attachment2 || attachments2[i]\\\" class=\\\"col-xs-12 col-sm-6 col-md-4\\\">\\r\\n               \\t\\t\\t\\t<input type=\\\"file\\\" class=\\\"form-control\\\" accept=\\\"image/*\\\" (change)=\\\"onFileAdded($event,i,2)\\\">\\r\\n               \\t\\t\\t</div>\\r\\n               \\t\\t\\t\\r\\n               \\t\\t\\t<div *ngIf=\\\"note.attachment3 && !attachments3[i]\\\" class=\\\"col-xs-12 col-sm-6 col-md-4\\\">\\r\\n               \\t\\t\\t\\t<img src=\\\"{{getS3FormPicUrl(note.attachment3)}}\\\" class=\\\"uploaded_img img-responsive\\\">\\r\\n               \\t\\t\\t</div>\\r\\n               \\t\\t\\t<div *ngIf=\\\"!note.attachment3 || attachments3[i]\\\" class=\\\"col-xs-12 col-sm-6 col-md-4\\\">\\r\\n               \\t\\t\\t\\t<input type=\\\"file\\\" class=\\\"form-control\\\" accept=\\\"image/*\\\" (change)=\\\"onFileAdded($event,i,3)\\\">\\r\\n               \\t\\t\\t</div>\\r\\n             \\t\\t</div>\\r\\n                </div>\\r\\n                <div class=\\\"form-group row margin_top_15\\\">\\r\\n                    <div class=\\\"col-xs-12 col-sm-12\\\">\\r\\n                        <a id=\\\"ladd_row\\\" class=\\\"btn btn-default pull-left\\\" (click)=\\\"addNote()\\\"><b>+Add Note</b></a>\\r\\n                    </div>\\r\\n               \\t</div>\\r\\n                <div class=\\\"row\\\" *ngIf=\\\"!isSubmitting\\\">\\r\\n\\t                <div class=\\\"col-xs-6 text-right margin_bottom_form\\\">\\r\\n\\t                \\t<button type=\\\"submit\\\" class=\\\"btn btn-info\\\"><b>Save as Draft</b></button>\\r\\n\\t                </div>\\r\\n\\t                <div class=\\\"col-xs-6 text-left margin_bottom_form\\\">\\r\\n\\t                    <button type=\\\"button\\\" class=\\\"btn btn-success\\\" (click)=\\\"onSubmitProceed()\\\" [disabled]=\\\"!nisshoForm.form.valid\\\"><b>Submit Form</b></button>\\r\\n\\t                </div>\\r\\n\\t            </div>\\r\\n\\t            <div class=\\\"row\\\" *ngIf=\\\"isSubmitting\\\">\\r\\n\\t                <div class=\\\"col-xs-12 text-center margin_bottom_form\\\">\\r\\n\\t                \\t<span class=\\\"loader\\\"></span> Saving...\\r\\n\\t                </div>\\r\\n                </div>\\r\\n            </form>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { Form, Customer, FormManagementService, AdministrationService, AuthenticationService, Email, EmailNotificationService } from \"process-smart-ng6-lib\";\r\nimport { S3Manager } from \"src/app/api/S3Manager\";\r\nimport { ActivatedRoute } from \"@angular/router\";\r\nimport { SharedService } from \"src/app/_services/shared.service\";\r\nimport { Router } from \"@angular/router\";\r\n\r\n@Component({\r\n  selector: 'app-walkthrough',\r\n  templateUrl: './walkthrough.component.html',\r\n  styleUrls: ['./walkthrough.component.css']\r\n})\r\nexport class WalkthroughComponent implements OnInit {\r\n\r\n    formId: string;\r\n    typeId = '49';\r\n    model: Form;\r\n    fillerUid: string;\r\n    clientId: string;\r\n    fillerName: string;\r\n    focusedId: number;\r\n    \r\n    customersList: Array<Customer>; //List of all customers (for project name)\r\n    custRecList: Array<Customer>; //List of filtered customers from search\r\n    \r\n    notesList: Array<any>;     //List of all notes\r\n    currFocus: number;  //Index of item currently being focused\r\n    nextItemNum: number;\r\n    \r\n    attachments1: Array<File>;\r\n    attachments2: Array<File>;\r\n    attachments3: Array<File>;\r\n    \r\n    isDraft = true;\r\n    isSubmitting = false;\r\n  \r\n    constructor(private route: ActivatedRoute, private fms: FormManagementService,\r\n            private ssv: SharedService, private aus: AdministrationService, \r\n            private router: Router, private adms: AuthenticationService,\r\n            private ems: EmailNotificationService) { }\r\n      \r\n      ngOnInit() {\r\n          //Get user info from session\r\n          this.fillerUid = JSON.parse(localStorage.getItem('currentUser')).user.uid;\r\n          this.fillerName = JSON.parse(localStorage.getItem('currentUser')).user.name;\r\n          this.clientId = JSON.parse(localStorage.getItem('currentUser')).user.client_id;\r\n          \r\n          //Populate customers for search\r\n          this.getCustomersList();\r\n          \r\n        //Create list of empty attachment slots\r\n          this.attachments1 = [];\r\n          this.attachments2 = [];\r\n          this.attachments3 = [];\r\n          \r\n          //Get form ID if specified on route.\r\n          //If specified, load the form.\r\n        this.route.params.subscribe(params => {\r\n              this.formId = params['formId'];\r\n              \r\n              if(this.formId){\r\n                  //Load Form\r\n                  this.getModel();\r\n              }\r\n              else {\r\n                  //Create a new form\r\n                  this.model = <Form>{\r\n                      'id': '0',\r\n                      'type_id': this.typeId,\r\n                      'status_id': '1',\r\n                      'process_number': '2',\r\n                      'created_date': this.toHtmlDate(null),\r\n                      'last_modified_date': this.toHtmlDate(null),\r\n                      'filler_id': this.fillerUid,\r\n                      'modifier_id': this.fillerUid,\r\n                      'inputMap': {\r\n                      },\r\n                      \"inputTables\": {\r\n                          \"notes\": []\r\n                      }\r\n                  };\r\n                  this.notesList = [];\r\n                  this.nextItemNum = 1;\r\n              }\r\n          });\r\n      }\r\n      \r\n      getModel() {\r\n          this.fms.getForm(this.typeId, this.formId)\r\n            .subscribe(model => {\r\n                model.created_date = this.toHtmlDate(model.created_date);\r\n                model.last_modified_date = this.toHtmlDate(null);\r\n                \r\n                if(model.inputMap.date){\r\n                    let date = new Date(model.inputMap.date);\r\n                    date.setDate(date.getDate() + 15);\r\n                    model.inputMap.complete_by = this.ssv.toHtmlDateStr(date);\r\n                }\r\n                \r\n                this.model = model;\r\n                this.notesList = model.inputTables.notes;\r\n                this.nextItemNum = +this.notesList[this.notesList.length-1].item_number + 1;\r\n                \r\n                for(let i = 0; i < this.notesList.length; i++){\r\n                    this.attachments1.push(null);\r\n                    this.attachments2.push(null);\r\n                    this.attachments3.push(null);\r\n                }\r\n            });\r\n      }\r\n      \r\n      onSubmit() {\r\n          this.isSubmitting = true;\r\n        //Add \"-\" to empty note fields\r\n          this.notesList.forEach(n => {\r\n              if(!n.address){\r\n                  n.address = '-';\r\n              }\r\n              if(!n.description){\r\n                  n.description = '-';\r\n              }\r\n          })\r\n          \r\n          //Collect all notes\r\n            this.model.inputTables.notes = this.notesList;\r\n          \r\n        //Upload form data to DB\r\n        if(this.formId){\r\n            //Update an existing form\r\n            this.fms.updateForm(this.model, this.typeId, this.formId)\r\n            .subscribe(\r\n                data => {\r\n                  //Save attachments in S3\r\n                    for(let num = 1; num <= 3; num++) {\r\n                        for(let noteIdx = 0; noteIdx < this.attachments1.length; noteIdx++) {\r\n                            if(this.model.inputTables.notes[noteIdx]['attachment'+num] && this['attachments'+num][noteIdx]){\r\n                                S3Manager.uploadFormAttachment(this['attachments'+num][noteIdx], this.model.inputTables.notes[noteIdx]['attachment'+num],this.clientId);\r\n                            }\r\n                        }\r\n                    }\r\n                    \r\n                 // Page redirect when getting response\r\n                    if(this.model.process_number == '3'){\r\n                        this.notifyPunchlistReady();\r\n                        this.ssv.showSuccess('Walkthrough successfully sent!');\r\n                    }\r\n                    else{\r\n                        this.ssv.showSuccess('Walkthrough successfully updated!');\r\n                    }\r\n                    \r\n                    this.router.navigate(['/view-walkthrough/2']);\r\n                  },\r\n                  error => {\r\n                      // Display error message\r\n                      this.isSubmitting = false;\r\n                      this.ssv.showError('Unable to update form!');\r\n                  }\r\n            );\r\n        }\r\n        else{\r\n            //Create a new form\r\n            this.fms.newForm(this.model, this.typeId)\r\n            .subscribe(\r\n                data => {\r\n                  //Save attachments in S3\r\n                    for(let num = 1; num <= 3; num++) {\r\n                        for(let noteIdx = 0; noteIdx < this.attachments1.length; noteIdx++) {\r\n                            if(this.model.inputTables.notes[noteIdx]['attachment'+num] && this['attachments'+num][noteIdx]){\r\n                                S3Manager.uploadFormAttachment(this['attachments'+num][noteIdx], this.model.inputTables.notes[noteIdx]['attachment'+num],this.clientId);\r\n                            }\r\n                        }\r\n                    }\r\n                    \r\n                 // Page redirect when getting response\r\n                    if(this.model.process_number == '3'){\r\n                        this.notifyPunchlistReady();\r\n                        this.ssv.showSuccess('Walkthrough successfully sent!');\r\n                    }\r\n                    else{\r\n                        this.ssv.showSuccess('Walkthrough successfully updated!');\r\n                    }\r\n                    \r\n                    this.router.navigate(['/view-walkthrough/2']);\r\n                  },\r\n                  error => {\r\n                      // Display error message\r\n                      this.isSubmitting = false;\r\n                      this.ssv.showError('Unable to update form!');\r\n                  }\r\n            );\r\n        }\r\n      }\r\n      \r\n      onClickForm(id){\r\n          this.focusedId = +id;\r\n      }\r\n      \r\n      onSubmitProceed(){\r\n        //Update process number if form is submitted (not just saved as draft)\r\n          this.model.process_number = '3';\r\n          this.onSubmit();\r\n      }\r\n      \r\n      toHtmlDate(datestr : string){\r\n          let date;\r\n          if(datestr){\r\n              date = new Date(datestr);\r\n          }\r\n          else{\r\n              date = new Date();\r\n          } \r\n          const dd = date.getDate() < 10 ? '0' + date.getDate() : date.getDate();\r\n          const mm = date.getMonth() < 9 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1;\r\n          const yyyy = date.getFullYear();\r\n          \r\n          return yyyy + '-' + mm + '-' + dd;\r\n      }\r\n      \r\n      //MULTI INPUT FIELDS    \r\n      addNote() {\r\n          let fid;\r\n          if(this.formId){\r\n              fid = this.formId;\r\n          }\r\n          else{\r\n              fid = '0';\r\n          }\r\n          const mat = {'form_id': fid, 'item_number': '' + this.nextItemNum};\r\n          this.notesList.push(mat);\r\n          \r\n          //Add counter to next item number\r\n          this.nextItemNum++;\r\n          \r\n          //Add attachment size\r\n          this.attachments1.push(null);\r\n          this.attachments2.push(null);\r\n          this.attachments3.push(null);\r\n      }\r\n      \r\n      onDeleteNote(){\r\n          document.getElementById('deleteWTModal').style.display = \"none\";\r\n          \r\n          const note = this.notesList[this.focusedId];\r\n          this.notesList.splice(this.focusedId, 1);\r\n          \r\n          //Delete attachment(s)\r\n          this.attachments1.splice(this.focusedId, 1);\r\n          this.attachments2.splice(this.focusedId, 1);\r\n          this.attachments3.splice(this.focusedId, 1);\r\n          \r\n        //Delete from server\r\n          let inputMap = {\"inputMap\": note};\r\n          this.fms.deleteMultiInput(inputMap, this.typeId, 'notes', 'item_number')\r\n              .subscribe(data => {}, error => {console.log(error)});\r\n      }\r\n      \r\n      //CUSTOMER SEARCH\r\n      getCustomersList() {\r\n          this.aus.getCustomers()\r\n          .subscribe(list => {\r\n              this.customersList = list;\r\n          });\r\n      }\r\n      \r\n      onCustomerSelected(custId: string) {\r\n          const customer : Customer = this.customersList.find(x => x.id == custId);\r\n          this.model.inputMap.project_name = customer.project_name;\r\n          this.model.inputMap.management_company = customer.management;\r\n          this.model.inputMap.management_email = customer.email;\r\n          this.custRecList = [];\r\n      }\r\n      \r\n      searchCustomer(input: string) {\r\n          if (this.customersList) {\r\n            this.custRecList = this.customersList.filter(x => \r\n                (x.project_name.toLowerCase().includes(input.toLowerCase())));\r\n          }\r\n        }\r\n      \r\n      notifyPunchlistReady() {\r\n          //Get Ayla's email\r\n          this.adms.getUser('57').subscribe(\r\n              user => {\r\n                  if(user.email){\r\n                      //Send Email\r\n                      const recipientList = [user.email];\r\n                      const ccList = [];\r\n                      const bccList = [];\r\n                      const subject = \"Punchlist Ready\";\r\n                      const content = user.name + \",\"\r\n                              + \"<br><br>A Punchlist is ready for download.\"\r\n                              + \"<br>Please download the punchlist from the dashboard.\";\r\n                      const email: Email = {'subject':subject,\r\n                                              'body':content,\r\n                                              'to': recipientList,\r\n                                              'cc':ccList,\r\n                                              'bcc':bccList};\r\n                      this.ems.sendEmail(email).subscribe(data => {});\r\n                  }\r\n                  else{\r\n                      console.log('Email recipient not found');\r\n                  }\r\n              },\r\n              error => {\r\n                  console.log(error);\r\n                  // Display error message\r\n                  this.ssv.showError('Error: Email recipient not found!');\r\n              });\r\n      }\r\n      \r\n      onFileAdded(event, noteIdx, num) {\r\n          if (event.target.files === undefined || event.target.files.length == 0) {\r\n              this['attachments'+num][noteIdx] = null;\r\n              delete this.notesList[noteIdx]['attachment'+num];\r\n          }\r\n          else{\r\n              const ext = event.target.files[0].name.substr(event.target.files[0].name.lastIndexOf('.'));\r\n              this['attachments'+num][noteIdx] = event.target.files[0];\r\n              this.notesList[noteIdx]['attachment'+num] = 'form'+this.ssv.newGuid()+'_note'+(+noteIdx+1)+'_att'+num+ext;\r\n          }\r\n        }\r\n      \r\n      //DIAGNOSTIC\r\n      get diagnostic() { return JSON.stringify(this.model); }\r\n      get ndiagnostic() { return JSON.stringify(this.notesList); }\r\n\r\n      getS3FormPicUrl(filename) {\r\n          return S3Manager.getFormAttachmentUrl(filename, this.clientId);\r\n      }\r\n}\r\n","module.exports = \"label {\\r\\n\\tfont-weight: bold;\\r\\n}\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZm9ybXMvZmlsbC93b3JrLW9yZGVyL3dvcmstb3JkZXIuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtDQUNDLGlCQUFpQjtBQUNsQiIsImZpbGUiOiJzcmMvYXBwL2Zvcm1zL2ZpbGwvd29yay1vcmRlci93b3JrLW9yZGVyLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyJsYWJlbCB7XHJcblx0Zm9udC13ZWlnaHQ6IGJvbGQ7XHJcbn0iXX0= */\"","module.exports = \"<!-- Deletion Modal -->\\r\\n<div class=\\\"modal fade\\\" id=\\\"deletionConfirmation\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" data-backdrop=\\\"false\\\">\\r\\n  <div class=\\\"modal-dialog\\\" role=\\\"document\\\">\\r\\n    <div class=\\\"modal-content\\\">\\r\\n      <form (ngSubmit)=\\\"onDelete()\\\" #nisshoForm=\\\"ngForm\\\">\\r\\n      <div class=\\\"modal-header\\\">\\r\\n      \\t<button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\r\\n      \\t<h4 class=\\\"modal-title\\\">Delete Work Order</h4>\\r\\n      </div>\\r\\n      <div class=\\\"modal-body modal_body_warning\\\">\\r\\n\\t\\t<b>Warning: This will delete the Work Order and <u>ALL forms with the same job number</u> from the system.</b><br>\\r\\n      </div>\\r\\n      <div class=\\\"modal-footer text-center\\\">\\r\\n      \\t<button type=\\\"submit\\\" class=\\\"btn btn-danger\\\">Delete</button>\\r\\n      \\t<button type=\\\"button\\\" class=\\\"btn btn-default\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\">Cancel</button>\\r\\n      </div>\\r\\n      </form>\\r\\n    </div><!-- /.modal-content -->\\r\\n  </div><!-- /.modal-dialog -->\\r\\n</div><!-- /.modal -->\\r\\n\\r\\n<div class=\\\"container-fluid\\\">\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<div class=\\\"col col-sm-offset-1 text-left\\\">\\r\\n\\t\\t\\t<h3><a routerLink=\\\"/view-work-order/1\\\" class=\\\"back_btn\\\"><span class=\\\"glyphicon glyphicon-chevron-left\\\"></span>Back w/o saving</a>\\r\\n\\t\\t\\t<a data-toggle=\\\"modal\\\" data-target=\\\"#deletionConfirmation\\\" class=\\\"btn btn-danger btn-lg pull-right\\\">Delete WO</a></h3>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<div class=\\\"col-sm-2\\\"></div>\\r\\n\\t\\t<div class=\\\"col-sm-8 col-xs-12\\\">\\r\\n        \\t<div class=\\\"row\\\">\\r\\n\\t        \\t<div class=\\\"col-xs-12 col-md-6 col-md-offset-3 text-center\\\">\\r\\n\\t\\t            <h2 class=\\\"text-center\\\">Work Order Form</h2>\\r\\n\\t         \\t</div>\\r\\n\\t        </div>\\r\\n            <form (ngSubmit)=\\\"onSubmit()\\\" #nisshoForm=\\\"ngForm\\\">\\r\\n                 <div class=\\\"form-group\\\">\\r\\n                     <label class=\\\"group_label_text\\\">Project Information</label>\\r\\n                     <div class=\\\"row\\\">\\r\\n                         <div class=\\\"col-sm-6 col-xs-12\\\">\\r\\n                             <label for=\\\"job_number\\\">Nissho Job #</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div><i>{{job_number}}</i></div>\\r\\n                         </div>\\r\\n                         <div class=\\\"col-sm-6 col-xs-12\\\">\\r\\n                             <label for=\\\"po_number\\\">IWO #</label>\\r\\n                             <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"po_number\\\" name=\\\"po_number\\\"  [(ngModel)]=\\\"model.inputMap.po_num\\\">\\r\\n                         </div>\\r\\n                     </div>\\r\\n                     <div class=\\\"row\\\">\\r\\n                         <div class=\\\"col-sm-12 col-xs-12\\\">\\r\\n                             <label for=\\\"project_name\\\">Project Name</label>\\r\\n                             <input type=\\\"text\\\" autocomplete=\\\"off\\\" class=\\\"form-control\\\" id=\\\"project_name\\\" name=\\\"project_name\\\" (input)=\\\"searchCustomer($event.target.value)\\\" [(ngModel)]=\\\"model.inputMap.project_name\\\" required>\\r\\n                         \\t<div *ngIf=\\\"custRecList\\\" id=\\\"customer_suggestion\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"search_suggestion_entry\\\" *ngFor=\\\"let sugg_part of custRecList\\\" (click)=\\\"onCustomerSelected(sugg_part.id)\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{{sugg_part.project_name}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n                         </div>\\r\\n                     </div>\\r\\n                     <div class=\\\"row\\\">\\r\\n                         <div class=\\\"col-sm-12 col-xs-12\\\">\\r\\n                             <label for=\\\"pm_name\\\">Project Manager</label>\\r\\n                             <input type=\\\"text\\\" autocomplete=\\\"off\\\" class=\\\"form-control\\\" id=\\\"pm_name\\\" name=\\\"pm_name\\\" (input)=\\\"searchPM($event.target.value)\\\" [(ngModel)]=\\\"model.inputMap.project_manager\\\" required>\\r\\n                         \\t<div *ngIf=\\\"pmRecList\\\" id=\\\"pm_suggestion\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"search_suggestion_entry\\\" *ngFor=\\\"let sugg_pm of pmRecList\\\" (click)=\\\"onPMSelected(sugg_pm)\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{{sugg_pm}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n                         </div>\\r\\n                     </div>\\r\\n                 </div>\\r\\n                 <div class=\\\"form-group\\\">\\r\\n                     <label class=\\\"group_label_text\\\">Client Information</label>\\r\\n                     <div class=\\\"row\\\">\\r\\n                         <div class=\\\"col-sm-12 col-xs-12\\\">\\r\\n                             <label for=\\\"client_name\\\">Client Name</label>\\r\\n                             <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"client_name\\\" name=\\\"client_name\\\" [(ngModel)]=\\\"model.inputMap.client_name\\\" required>\\r\\n                         </div>\\r\\n                     </div>\\r\\n                     <div class=\\\"row\\\">\\r\\n                         <div class=\\\"col-sm-6 col-xs-6\\\">\\r\\n                             <label for=\\\"client_phone\\\">Client Phone #</label>\\r\\n                             <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"client_phone\\\" name=\\\"client_phone\\\" [(ngModel)]=\\\"model.inputMap.client_phone\\\">\\r\\n                         </div>\\r\\n                         <div class=\\\"col-sm-6 col-xs-6\\\">\\r\\n                             <label for=\\\"client_email\\\">Client Email</label>\\r\\n                             <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"client_email\\\" name=\\\"client_email\\\" [(ngModel)]=\\\"model.inputMap.client_email\\\">\\r\\n                         </div>\\r\\n                     </div>\\r\\n                 </div>\\r\\n                 <div class=\\\"form-group\\\">\\r\\n                     <div class=\\\"row\\\">\\r\\n                         <div class=\\\"col-sm-8 col-xs-8\\\">\\r\\n                             <label for=\\\"auth_by_print\\\">Authorized by (Print)</label>\\r\\n                             <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"auth_by_print\\\" name=\\\"auth_by_print\\\" [(ngModel)]=\\\"model.inputMap.auth_by\\\">\\r\\n                         </div>\\r\\n                         <div class=\\\"col-sm-4 col-xs-4\\\">\\r\\n                             <label for=\\\"auth_date\\\">Date</label>\\r\\n                             <input type=\\\"date\\\" class=\\\"form-control\\\" id=\\\"auth_date\\\" name=\\\"auth_date\\\" [(ngModel)]=\\\"model.inputMap.client_signature_date\\\">\\r\\n                         </div>\\r\\n                     </div>\\r\\n                 </div>            \\r\\n                     \\r\\n               <div class=\\\"form-group\\\" id=\\\"materials_container\\\">\\r\\n                   <label class=\\\"group_label_text\\\">Materials</label>\\r\\n              \\t\\t<div class=\\\"row\\\">\\r\\n              \\t\\t\\t<div class=\\\"col-xs-6 col-sm-6 pad_right_5\\\">\\r\\n          \\t\\t\\t\\t\\tIrrigation materials:\\r\\n              \\t\\t\\t</div>\\r\\n              \\t\\t\\t<div class=\\\"col-xs-6 col-sm-6 pad_left_none text-right\\\">\\r\\n              \\t\\t\\t\\t{{getStockTransferTotalCost() | currency}}\\r\\n              \\t\\t\\t</div>\\r\\n              \\t\\t</div>\\r\\n               </div>\\r\\n               <div class=\\\"form-group\\\" id=\\\"labors_container\\\">\\r\\n                   <label class=\\\"group_label_text\\\">Labor</label>\\r\\n             \\t\\t<div class=\\\"row\\\">\\r\\n              \\t\\t\\t<div class=\\\"col-xs-6 col-sm-6 pad_right_5\\\">\\r\\n          \\t\\t\\t\\t\\tIrrigation Technician:\\r\\n              \\t\\t\\t</div>\\r\\n              \\t\\t\\t<div class=\\\"col-xs-4 col-sm-4 pad_right_5 pad_left_none\\\">\\r\\n              \\t\\t\\t\\t{{tech_hours}} hrs x {{constants.tech_rate | currency}} =\\r\\n              \\t\\t\\t</div>\\r\\n              \\t\\t\\t<div class=\\\"col-xs-2 col-sm-2 pad_left_none text-right\\\">\\r\\n              \\t\\t\\t\\t{{tech_hours * constants.tech_rate | currency}}\\r\\n              \\t\\t\\t</div>\\r\\n              \\t\\t</div>\\r\\n              \\t\\t<div *ngIf=\\\"labor_hours > 0\\\" class=\\\"row\\\">\\r\\n              \\t\\t\\t<div class=\\\"col-xs-6 col-sm-6 pad_right_5\\\">\\r\\n          \\t\\t\\t\\t\\tLabor:\\r\\n              \\t\\t\\t</div>\\r\\n              \\t\\t\\t<div class=\\\"col-xs-4 col-sm-4 pad_right_5 pad_left_none\\\">\\r\\n              \\t\\t\\t\\t{{labor_hours}} hrs x {{constants.tech_labor_rate | currency}} =\\r\\n              \\t\\t\\t</div>\\r\\n              \\t\\t\\t<div class=\\\"col-xs-2 col-sm-2 pad_left_none text-right\\\">\\r\\n              \\t\\t\\t\\t{{labor_hours * constants.tech_labor_rate | currency}}\\r\\n              \\t\\t\\t</div>\\r\\n              \\t\\t</div>\\r\\n              \\t\\t<div *ngIf=\\\"ot_hours > 0\\\" class=\\\"row\\\">\\r\\n              \\t\\t\\t<div class=\\\"col-xs-6 col-sm-6 pad_right_5\\\">\\r\\n          \\t\\t\\t\\t\\tOvertime:\\r\\n              \\t\\t\\t</div>\\r\\n              \\t\\t\\t<div class=\\\"col-xs-4 col-sm-4 pad_right_5 pad_left_none\\\">\\r\\n              \\t\\t\\t\\t{{ot_hours}} hrs x {{constants.tech_ot_rate | currency}} =\\r\\n              \\t\\t\\t</div>\\r\\n              \\t\\t\\t<div class=\\\"col-xs-2 col-sm-2 pad_left_none text-right\\\">\\r\\n              \\t\\t\\t\\t{{ot_hours * constants.tech_ot_rate | currency}}\\r\\n              \\t\\t\\t</div>\\r\\n              \\t\\t</div>\\r\\n              \\t\\t<div *ngIf=\\\"ot_hours > 0\\\" class=\\\"row\\\">\\r\\n              \\t\\t\\t<div class=\\\"col-xs-6 col-sm-6 pad_right_5\\\">\\r\\n          \\t\\t\\t\\t\\t<b>Total Labor Cost :</b>\\r\\n              \\t\\t\\t</div>\\r\\n              \\t\\t\\t<div class=\\\"col-xs-2 col-xs-offset-4 col-sm-2 col-sm-offset-4 pad_left_none text-right\\\">\\r\\n              \\t\\t\\t\\t<b>{{total_lab_cost | currency}}</b>\\r\\n              \\t\\t\\t</div>\\r\\n              \\t\\t</div>\\r\\n                </div>\\r\\n               \\t<div class=\\\"form-group\\\">\\r\\n                \\t<label class=\\\"group_label_text\\\">Work Information</label>\\r\\n                \\t<div class=\\\"row\\\">\\r\\n\\t\\t\\t        \\t<div class=\\\"col-xs-12 col-md-6 text-left\\\">\\r\\n\\t\\t\\t\\t            <label for=\\\"attachment1\\\">Picture 1</label>\\r\\n\\t\\t\\t\\t            <span *ngIf=\\\"model.inputMap.attachment1 == null\\\"><input type=\\\"file\\\" class=\\\"form-control\\\" accept=\\\"image/*\\\" #attachment1 (change)=\\\"onFileAdded(attachment1.files,1)\\\"></span>\\r\\n                    \\t\\t<span *ngIf=\\\"model.inputMap.attachment1 != null\\\"><a (click)=\\\"onDownloadAttachment(1)\\\"> (Download)</a></span><br>\\r\\n\\t\\t\\t         \\t</div>\\r\\n\\t\\t\\t         \\t<div class=\\\"col-xs-12 col-md-6 text-left\\\">\\r\\n\\t\\t\\t\\t            <label for=\\\"attachment2\\\">Picture 2</label>\\r\\n\\t\\t\\t\\t            <span *ngIf=\\\"model.inputMap.attachment2 == null\\\"><input type=\\\"file\\\" class=\\\"form-control\\\" accept=\\\"image/*\\\" #attachment2 (change)=\\\"onFileAdded(attachment2.files,2)\\\"></span>\\r\\n                    \\t\\t<span *ngIf=\\\"model.inputMap.attachment2 != null\\\"><a (click)=\\\"onDownloadAttachment(2)\\\"> (Download)</a></span><br>\\r\\n\\t\\t\\t         \\t</div>\\r\\n\\t\\t            </div>\\r\\n                \\t<div class=\\\"row\\\">\\r\\n                \\t\\t<div class=\\\"col-xs-12 col-sm-12\\\">\\r\\n                \\t\\t\\t<label for=\\\"work_location\\\">Location</label>\\r\\n                \\t\\t\\t<input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"work_location\\\" name=\\\"location\\\" [(ngModel)]=\\\"model.inputMap.location\\\">\\r\\n                \\t\\t</div>\\r\\n                \\t</div>\\r\\n                \\t<div class=\\\"row\\\">\\r\\n                \\t\\t<div class=\\\"col-xs-12 col-sm-12\\\">\\r\\n                \\t\\t\\t<label for=\\\"work_description\\\">Work Description</label>\\r\\n                \\t\\t\\t<textarea class=\\\"form-control\\\" id=\\\"work_description\\\" name=\\\"work_description\\\" [(ngModel)]=\\\"model.inputMap.work_description\\\"></textarea>\\r\\n                \\t\\t</div>\\r\\n                \\t</div>\\r\\n                </div>\\r\\n               \\t\\r\\n                <div class=\\\"row\\\" *ngIf=\\\"model && model.process_number == '1'\\\">\\r\\n\\t                <div class=\\\"col-xs-12 text-center margin_bottom_15\\\">\\r\\n\\t                \\t<button type=\\\"submit\\\" class=\\\"btn btn-info\\\"><b>Save Changes</b></button>\\r\\n\\t                </div>\\r\\n\\t            </div>\\r\\n            </form>\\r\\n        </div>\\r\\n        <div class=\\\"col-sm-2\\\"></div>\\r\\n    </div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from \"@angular/router\";\r\nimport { SharedService } from \"src/app/_services/shared.service\";\r\nimport { FormManagementService, Form, InventoryManagementService, Material, AdministrationService, Customer, AuthenticationService } from \"process-smart-ng6-lib\";\r\nimport { S3Manager } from \"src/app/api/S3Manager\";\r\n\r\n@Component({\r\n  selector: 'app-work-order',\r\n  templateUrl: './work-order.component.html',\r\n  styleUrls: ['./work-order.component.css']\r\n})\r\nexport class WorkOrderComponent implements OnInit {\r\n    formId: string;\r\n    typeId = '45';\r\n    model: Form;\r\n    fillerUid: string;\r\n    clientId: string;\r\n    job_number: string;\r\n    \r\n    //Search\r\n    customersList: Array<Customer>; //List of all customers (for project name)\r\n    custRecList: Array<Customer>; //List of filtered customers from search\r\n    \r\n    pmList: Array<string>; //List of all PM name\r\n    pmRecList: Array<string>; //List of all PM name\r\n    \r\n    partsList: Array<Material>;     //List of all parts\r\n    suggestedPartsList: Array<Material>;   //Filtered list of parts\r\n    currFocus: number;  //Index of item currently being focused\r\n    \r\n    matList: Array<any>;    //List of used parts (with select properties)\r\n    labList: Array<WO_Labor>;       //List of used labors\r\n    \r\n    attachment1: File;\r\n    attachment2: File;\r\n    \r\n    total_mat_cost: number;\r\n    tech_hours: number;\r\n    labor_hours: number;\r\n    ot_hours: number;\r\n    total_lab_cost: number;\r\n    constants: any;\r\n    \r\n    stockTransfer: Form;     //...with the same job number\r\n    repairFormList: Array<Form>;        //...with the same job number\r\n    \r\n    isDraft = true;\r\n    \r\n    constructor(private route: ActivatedRoute, private fms: FormManagementService,\r\n          private ssv: SharedService, private ims: InventoryManagementService,\r\n          private adms: AdministrationService, private aus: AuthenticationService,\r\n          private router: Router) { }\r\n    \r\n    ngOnInit() {\r\n        this.total_mat_cost = 0.0;\r\n        this.total_lab_cost = 0.0;\r\n        this.tech_hours = 2.0;\r\n        this.ot_hours = 0.0;\r\n        this.labor_hours = 0.0;\r\n        \r\n        this.repairFormList = [];\r\n        \r\n        //Get user info from session\r\n        this.fillerUid = JSON.parse(localStorage.getItem('currentUser')).user.uid;\r\n        this.clientId = JSON.parse(localStorage.getItem('currentUser')).user.client_id;\r\n        \r\n        //Populate parts and customers for search\r\n        this.getConstants();\r\n        this.getCustomersList();\r\n        this.getPMList();\r\n        \r\n        //Get form ID if specified on route.\r\n        //If specified, load the form.\r\n      this.route.params.subscribe(params => {\r\n            this.formId = params['formId'];\r\n            \r\n            if(this.formId){\r\n                //Load Form\r\n                this.getModel();\r\n            }\r\n        });\r\n    }\r\n    \r\n    getModel() {\r\n        this.fms.getForm(this.typeId, this.formId)\r\n          .subscribe(model => {\r\n              model.created_date = this.toHtmlDate(model.created_date);\r\n              model.last_modified_date = this.toHtmlDate(null);\r\n              this.model = model;\r\n              this.matList = model.inputTables.materials;\r\n              this.labList = model.inputTables.labors;\r\n              this.job_number = model.inputMap.job_num;\r\n              \r\n              if(!model.inputMap.work_description){\r\n                  this.model.inputMap.work_description = \"Technician was dispatched to above location for \";\r\n              }\r\n              \r\n              //Populate Forms\r\n              this.populateST(model.inputMap.job_num);\r\n              this.populateIRFs(model.inputMap.job_num);\r\n          });\r\n    }\r\n    \r\n    populateST(jobnum: string){\r\n        this.fms.getForms('54', 1000, 'DESC', 0)\r\n            .subscribe(list => {\r\n                this.stockTransfer = list.find(x => x.is_deleted == '0' && x.inputMap.job_num == jobnum);\r\n            });\r\n    }\r\n    \r\n    populateIRFs(jobnum: string){\r\n        this.fms.getForms('47', 1000, 'DESC', 0)\r\n            .subscribe(list => {\r\n                this.repairFormList = list.filter(x => x.is_deleted == '0' && x.inputMap.job_num == jobnum);\r\n                this.setIrrigationRepairTotalLaborHrs();\r\n            });\r\n    }\r\n    \r\n    //TOTAL LABOR HOURS\r\n    setIrrigationRepairTotalLaborHrs(){\r\n        this.tech_hours = this.repairFormList.reduce((sum, irf) => \r\n        sum + (+irf.inputMap.tech_hours), 0);\r\n        this.labor_hours = this.repairFormList.reduce((sum, irf) => \r\n        sum + (+irf.inputMap.labor_hours), 0);\r\n        this.ot_hours = this.repairFormList.reduce((sum, irf) => \r\n        sum + (+irf.inputMap.ot_hours), 0);\r\n        \r\n        if(this.tech_hours < 2.0){\r\n            this.tech_hours = 2;\r\n        }\r\n        \r\n        this.tech_hours += Math.floor(this.tech_hours/2)*0.25;\r\n        this.labor_hours += Math.floor(this.labor_hours/2)*0.25;\r\n        this.ot_hours += Math.floor(this.ot_hours/2)*0.25;\r\n        \r\n        this.total_lab_cost = (this.tech_hours * this.constants.tech_rate) + \r\n            (this.labor_hours* this.constants.tech_labor_rate) + \r\n            (this.ot_hours * this.constants.tech_ot_rate);\r\n    }\r\n    \r\n    //TOTAL MATERIAL COST\r\n    getStockTransferTotalCost(){\r\n        if(this.total_mat_cost){\r\n            return this.total_mat_cost;\r\n        }\r\n        else if(this.stockTransfer && this.stockTransfer.inputTables && this.stockTransfer.inputTables.materials){\r\n            //Add up all part qty * price each, add tax on top of them and apply markup\r\n            this.total_mat_cost = this.stockTransfer.inputTables.materials.reduce((sum, mat) => \r\n            sum + (+mat.quantity * +mat.price) + ((+mat.quantity * +mat.price)*this.constants.tax_rate/100), 0);\r\n            \r\n            //Apply markup\r\n            this.total_mat_cost = this.total_mat_cost * 100 / this.constants.markup_rate;\r\n            return this.total_mat_cost;\r\n        }\r\n        else {\r\n            return 0;\r\n        }\r\n    }\r\n    \r\n    getConstants(){\r\n        this.adms.getConstants()\r\n            .subscribe(data => {\r\n               this.constants = data; \r\n            },\r\n            error => {\r\n                this.ssv.showError('Error: Failed to retrieve pricing rates!');\r\n            });\r\n    }\r\n    \r\n    onSubmit() {\r\n      //Collect all materials and labor\r\n      this.model.inputTables.materials = this.matList;\r\n      this.model.inputTables.labors = this.labList;\r\n      \r\n      //Form validation\r\n      if(!this.validateForm()){\r\n          return;\r\n      }\r\n      \r\n      //Upload form data to DB\r\n      if(this.formId){\r\n          //Update an existing form\r\n          this.fms.updateForm(this.model, this.typeId, this.formId)\r\n          .subscribe(\r\n              data => {\r\n                  this.ssv.showSuccess('Form successfully updated!');\r\n                  this.router.navigate(['/view-work-order/'+this.model.process_number]);\r\n                },\r\n                error => {\r\n                    // Display error message\r\n                    this.ssv.showError('Unable to update form!');\r\n                }\r\n          );\r\n      }\r\n      else{\r\n          //Create a new form\r\n          this.model.inputMap.date = this.toHtmlDate(null);\r\n          this.fms.newForm(this.model, this.typeId)\r\n          .subscribe(\r\n              data => {\r\n                    // Page redirect when getting response\r\n                  this.ssv.showSuccess('Form successfully updated!');\r\n                    this.router.navigate(['/view-work-order/'+this.model.process_number]);\r\n                },\r\n                error => {\r\n                    // Display error message\r\n                    this.ssv.showError('Unable to create new form!');\r\n                }\r\n          );\r\n      }\r\n      \r\n      //Save attachments in S3\r\n      for(let num = 1; num <= 2; num++) {\r\n          if(this.model.inputMap['attachment'+num] && this['attachment'+num]){\r\n              S3Manager.uploadFormAttachment(this['attachment'+num], this.model.inputMap['attachment'+num],this.clientId);\r\n          }\r\n      }\r\n    }\r\n    \r\n  //Submit to Irrigation Manager\r\n    onSubmitProceed(){\r\n      //Update process number if form is submitted (not just saved as draft)\r\n        this.model.process_number = '2';\r\n        this.onSubmit();\r\n      }\r\n    \r\n    //Deactivate work order form and all activeIRFs, STs and POs with the same job number\r\n    onDelete(){\r\n        console.log('here');\r\n        this.fms.setFormDeactivateStatus(this.typeId, this.formId, true)\r\n            .subscribe(data => {\r\n                //Deactivate IRFs w/ the same jobnum\r\n                this.deactivateIRFs();\r\n                \r\n                //Deactivate ST w/ the same jobnum\r\n                this.deactivateSTs();\r\n                \r\n                //Deactivate POs w/ the same jobnum\r\n                //this.deactivatePOs();\r\n                \r\n                this.ssv.showSuccess(\"Work Order successfully deleted\");\r\n                this.router.navigate(['/view-work-order/x']);\r\n            },\r\n            error => {\r\n                this.ssv.showError(\"Form(s) failed to be deleted\");\r\n                console.log(error);\r\n            });\r\n    }\r\n    \r\n    validateForm(): boolean{\r\n        if(this.exceedChar(this.model.inputMap.po_num,50)){\r\n            this.ssv.showError(\"IWO# cannot exceed 50 characters!\");\r\n            return false;\r\n        }\r\n        if(this.exceedChar(this.model.inputMap.project_name,100)){\r\n            this.ssv.showError(\"Project Name cannot exceed 100 characters!\");\r\n            return false;\r\n        }\r\n        if(this.exceedChar(this.model.inputMap.client_name,100)){\r\n            this.ssv.showError(\"Client Name cannot exceed 100 characters!\");\r\n            return false;\r\n        }\r\n        if(this.exceedChar(this.model.inputMap.client_phone,100)){\r\n            this.ssv.showError(\"Client Phone cannot exceed 50 characters!\");\r\n            return false;\r\n        }\r\n        if(this.exceedChar(this.model.inputMap.client_email,100)){\r\n            this.ssv.showError(\"Client Email cannot exceed 100 characters!\");\r\n            return false;\r\n        }\r\n        if(this.exceedChar(this.model.inputMap.auth_by,100)){\r\n            this.ssv.showError(\"Authorized By cannot exceed 100 characters!\");\r\n            return false;\r\n        }\r\n        if(this.exceedChar(this.model.inputMap.work_description,3000)){\r\n            this.ssv.showError(\"Work Description cannot exceed 3000 characters!\");\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    \r\n    exceedChar(s: string, n: number): boolean{\r\n        if(!s){\r\n            return false;\r\n        }\r\n        return s.length > n;\r\n    }\r\n    \r\n    deactivateIRFs(){\r\n        //Get IDs of all IRFs with this job number\r\n        this.repairFormList.forEach(x => {\r\n            this.fms.setFormDeactivateStatus(x.type_id, x.id, true)\r\n            .subscribe(data => {\r\n                console.log('Deleted IRF '+ x.id);\r\n            },\r\n            error => {\r\n                console.log(error);\r\n            });\r\n        });\r\n    }\r\n    \r\n    deactivateSTs(){\r\n        //Get ID of Stock Transfer with this job number\r\n        this.fms.setFormDeactivateStatus(this.stockTransfer.type_id, this.stockTransfer.id, true)\r\n        .subscribe(data => {\r\n            console.log('Deleted ST '+ this.stockTransfer.id);\r\n        },\r\n        error => {\r\n            console.log(error);\r\n        });\r\n    }\r\n    \r\n    onDownloadAttachment(num: string) {\r\n      const filename = this.model.inputMap['attachment'+num];\r\n      S3Manager.downloadFormAttachment(filename, this.clientId);\r\n    }\r\n    \r\n    //Filename = form[GUID]_att[num].[ext]\r\n    onFileAdded(files, num) {\r\n      if (files === undefined || files.length == 0) {\r\n          this['attachment'+num] = null;\r\n          this.model.inputMap['attachment'+num] = '';\r\n      }\r\n      else{\r\n          const ext = files[0].name.substr(files[0].name.lastIndexOf('.'));\r\n          this['attachment'+num] = files[0];\r\n          this.model.inputMap['attachment'+num] = 'form'+this.newGuid()+'_att'+num+ext;\r\n      }\r\n    }\r\n    \r\n    //Create Unique ID\r\n    newGuid() {\r\n      return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n          const r = Math.random() * 16 | 0, v = c === 'x' ? r : ( r & 0x3 | 0x8 );\r\n          return v.toString(16);\r\n      });\r\n    }\r\n    \r\n    toHtmlDate(datestr : string){\r\n        let date;\r\n        if(datestr){\r\n            date = new Date(datestr);\r\n        }\r\n        else{\r\n            date = new Date();\r\n        } \r\n        const dd = date.getDate() < 10 ? '0' + date.getDate() : date.getDate();\r\n        const mm = date.getMonth() < 9 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1;\r\n        const yyyy = date.getFullYear();\r\n        \r\n        return yyyy + '-' + mm + '-' + dd;\r\n    }\r\n    \r\n  //PM SEARCH\r\n    getPMList() {\r\n        this.aus.getUsers()\r\n          .subscribe(list => {\r\n              if(list){\r\n                  this.pmList = list.filter(x => x.role_id == '2' || x.role_id == '3')\r\n                                      .map(x => x.name);\r\n              }\r\n          });\r\n    }\r\n    \r\n    onPMSelected(pmName: string) {\r\n        this.model.inputMap.project_manager = pmName;\r\n        this.pmRecList = [];\r\n    }\r\n    \r\n    searchPM(input: string) {\r\n        if (this.pmList) {\r\n          this.pmRecList = this.pmList.filter(x => \r\n              (x.toLowerCase().includes(input.toLowerCase())));\r\n        }\r\n      }\r\n    \r\n    //CUSTOMER SEARCH\r\n    getCustomersList() {\r\n        this.adms.getCustomers()\r\n        .subscribe(list => {\r\n            this.customersList = list;\r\n        });\r\n    }\r\n    \r\n    onCustomerSelected(custId: string) {\r\n        const customer : Customer = this.customersList.find(x => x.id == custId);\r\n        this.model.inputMap.project_name = customer.project_name;\r\n        this.model.inputMap.client_name = customer.management;\r\n        this.model.inputMap.client_phone = customer.phone;\r\n        this.model.inputMap.client_email = customer.email;\r\n        this.model.inputMap.auth_by = customer.contact;\r\n        this.model.inputMap.project_manager = customer.project_manager;\r\n        this.custRecList = [];\r\n    }\r\n    \r\n    searchCustomer(input: string) {\r\n        if (this.customersList) {\r\n          this.custRecList = this.customersList.filter(x => \r\n              (x.project_name.toLowerCase().includes(input.toLowerCase())));\r\n        }\r\n      }\r\n    \r\n    //DIAGNOSTIC\r\n    get diagnostic() { return JSON.stringify(this.model); }\r\n    get mdiagnostic() { return JSON.stringify(this.matList); }\r\n    get ldiagnostic() { return JSON.stringify(this.labList); }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Zvcm1zL3ZpZXctYy13b3JrLW9yZGVyL3ZpZXctYy13b3JrLW9yZGVyLmNvbXBvbmVudC5jc3MifQ== */\"","module.exports = \"<div class=\\\"row margin_top_15 text-center\\\">\\r\\n   \\t<h3 class=\\\"text-capitalize\\\">Work Order</h3>\\r\\n   \\t<div class=\\\"col-sm-12 text-center\\\">\\r\\n\\t\\t<button type=\\\"button\\\" class=\\\"btn btn-success btn-sm button\\\" routerLink=\\\"/m-work-order\\\">\\r\\n\\t\\t\\t<span class=\\\"glyphicon glyphicon-plus\\\"></span> New Form\\r\\n\\t\\t</button>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"col-sm-10 col-sm-offset-1 col-xs-12 margin_top_15 table-responsive\\\">\\r\\n        <div class=\\\"row margin_bottom_15\\\">\\r\\n\\t\\t\\t<div class=\\\"col-sm-4 text-left input-group\\\">\\r\\n\\t               <div class=\\\"input-group-addon\\\"><span class=\\\"glyphicon glyphicon-search\\\"></span></div>\\r\\n\\t               <input type=\\\"text\\\" id=\\\"filterForm\\\" class=\\\"form-control\\\" placeholder=\\\"Search Project or Job #\\\" (input)=\\\"searchItem($event.target.value)\\\">\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<i *ngIf=\\\"!partialItemsList\\\">\\r\\n\\t\\t\\tNo items here!\\r\\n        </i>\\r\\n        <table *ngIf=\\\"partialItemsList\\\" class=\\\"table table_view table-hover\\\">\\r\\n   \\t\\t\\t<thead>\\r\\n       \\t\\t\\t<tr class=\\\"table_heading\\\">\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-3\\\">Project</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Job #</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">PO #</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-3\\\">Last Modified</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Actions</th>\\r\\n       \\t\\t\\t</tr>\\r\\n  \\t\\t\\t</thead>\\r\\n\\t\\t\\t<tbody>\\r\\n                <tr *ngFor=\\\"let item of partialItemsList\\\" class=\\\"table_body\\\">\\r\\n                    <td class=\\\"col-sm-3\\\">{{item.inputMap.project_name}}</td>\\r\\n                    <td class=\\\"col-sm-2\\\">{{item.inputMap.job_num}}</td>\\r\\n                    <td class=\\\"col-sm-2\\\">{{item.inputMap.po_num}}</td>\\r\\n                    <td class=\\\"col-sm-3\\\">{{item.last_modified_date | date}}<br>by {{getEmployeeName(item.modifier_id)}}</td>\\r\\n                    <td class=\\\"col-sm-2\\\">\\r\\n                        <a>PDF</a> - <a>XLS</a><br><a>Recall</a>\\r\\n                    </td>\\r\\n                </tr>\\r\\n\\t         </tbody>\\r\\n        </table>\\r\\n   \\t</div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { Form, User } from \"process-smart-ng6-lib\";\r\nimport { FormManagementService, DocumentConversionService, AuthenticationService } from \"process-smart-ng6-lib\";\r\nimport { SharedService } from \"src/app/_services/shared.service\";\r\nimport { saveAs } from 'file-saver';\r\nimport { ActivatedRoute } from \"@angular/router\";\r\n\r\n@Component({\r\n  selector: 'app-view-c-work-order',\r\n  templateUrl: './view-c-work-order.component.html',\r\n  styleUrls: ['./view-c-work-order.component.css']\r\n})\r\nexport class ViewCWorkOrderComponent implements OnInit {\r\n    itemsList: Array<Form>;\r\n    partialItemsList: Array<Form>;\r\n    usersList: Array<User>;\r\n    formId = '52';\r\n    processNum: string;\r\n    \r\n    constructor(private fms: FormManagementService, private adms: AuthenticationService,\r\n          private dcs: DocumentConversionService, private ssv: SharedService,\r\n          private route: ActivatedRoute) { }\r\n    \r\n    ngOnInit() {\r\n        this.populateNames();\r\n        \r\n        this.route.params.subscribe(params => {\r\n            this.processNum = params['processNum'];\r\n            this.populateItems();\r\n        });\r\n        \r\n        const uid = JSON.parse(localStorage.getItem('currentUser')).user.uid;\r\n    }\r\n    \r\n    populateItems() {\r\n    this.fms.getForms(this.formId, 20, 'DESC', 0)\r\n      .subscribe(itemsList => {\r\n          if(this.processNum){\r\n              itemsList = itemsList.filter(x => x.process_number == this.processNum);\r\n          }\r\n          \r\n          if(itemsList){\r\n              this.itemsList = itemsList.sort((a, b) => {\r\n                  return (a.id < b.id ? 1 : a.id > b.id ? -1 : 0);\r\n              });\r\n          }\r\n          this.partialItemsList = itemsList;\r\n      });\r\n    }\r\n    \r\n    populateNames() {\r\n      this.adms.getUsers()\r\n        .subscribe(usersList => this.usersList = usersList);\r\n    }\r\n    \r\n    getEmployeeName(uid: string) {\r\n        if (uid == null || this.usersList == null) { return ''; }\r\n        const user = this.usersList.find(x => x.uid === uid);\r\n        return (user? user.name : '-');\r\n    }\r\n    \r\n    onDownload(id: number) {\r\n    //  this.dcs.DownloadWorkOrder(id)\r\n    //  .subscribe(\r\n    //      res => {\r\n    //          saveAs(res, 'WorkOrder.xls', \r\n    //              { type: 'application/vnd.ms-excel' })\r\n    //      },\r\n    //      error => {\r\n    //          // Display error message\r\n    //          this.ssv.showError('Error: Unable to download form!');\r\n    //      }\r\n    //  );\r\n    }\r\n    \r\n    searchItem(input: string) {\r\n      if (this.partialItemsList && this.itemsList) {\r\n        this.partialItemsList = this.itemsList.filter(x => \r\n            (x.inputMap.job_num.toLowerCase().includes(input.toLowerCase())) ||\r\n            x.inputMap.project_name.toLowerCase().includes(input.toLowerCase()));\r\n      }\r\n    }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Zvcm1zL3ZpZXctY29zdC1zdW1tYXJ5L3ZpZXctY29zdC1zdW1tYXJ5LmNvbXBvbmVudC5jc3MifQ== */\"","module.exports = \"<div class=\\\"row margin_top_15 text-center\\\">\\r\\n   \\t<h3 class=\\\"text-capitalize\\\">Work Order</h3>\\r\\n   \\t<div class=\\\"col-sm-12 text-center\\\">\\r\\n\\t\\t<button type=\\\"button\\\" class=\\\"btn btn-success btn-sm button\\\" routerLink=\\\"/work-order\\\">\\r\\n\\t\\t\\t<span class=\\\"glyphicon glyphicon-plus\\\"></span> New Form\\r\\n\\t\\t</button>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"col-sm-10 col-sm-offset-1 col-xs-12 margin_top_15 table-responsive\\\">\\r\\n        <div class=\\\"row margin_bottom_15\\\">\\r\\n\\t\\t\\t<div class=\\\"col-sm-4 text-left input-group\\\">\\r\\n\\t               <div class=\\\"input-group-addon\\\"><span class=\\\"glyphicon glyphicon-search\\\"></span></div>\\r\\n\\t               <input type=\\\"text\\\" id=\\\"filterForm\\\" class=\\\"form-control\\\" placeholder=\\\"Search Project\\\" (input)=\\\"searchItem($event.target.value)\\\">\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<i *ngIf=\\\"!partialItemsList\\\">\\r\\n\\t\\t\\tNo items here!\\r\\n        </i>\\r\\n        <table *ngIf=\\\"partialItemsList\\\" class=\\\"table table_view table-hover\\\">\\r\\n   \\t\\t\\t<thead>\\r\\n       \\t\\t\\t<tr class=\\\"table_heading\\\">\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-3\\\">Project</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Client</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Date</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-3\\\">Last Modified</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Actions</th>\\r\\n       \\t\\t\\t</tr>\\r\\n  \\t\\t\\t</thead>\\r\\n\\t\\t\\t<tbody>\\r\\n                <tr *ngFor=\\\"let item of partialItemsList\\\" class=\\\"table_body\\\">\\r\\n                    <td class=\\\"col-sm-3\\\">{{item.inputMap.job_name}}</td>\\r\\n                    <td class=\\\"col-sm-2\\\">{{item.inputMap.client}}</td>\\r\\n                    <td class=\\\"col-sm-2\\\">{{item.inputMap.date | date}}</td>\\r\\n                    <td class=\\\"col-sm-3\\\">{{item.last_modified_date | date}}<br>by {{getEmployeeName(item.modifier_id)}}</td>\\r\\n                    <td class=\\\"col-sm-2\\\">\\r\\n                        <a>PDF</a> - <a>XLS</a><br>\\r\\n                        <a>Edit</a>\\r\\n                    </td>\\r\\n                </tr>\\r\\n\\t         </tbody>\\r\\n        </table>\\r\\n   \\t</div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { Form, User } from \"process-smart-ng6-lib\";\r\nimport { FormManagementService, DocumentConversionService, AuthenticationService } from \"process-smart-ng6-lib\";\r\nimport { SharedService } from \"src/app/_services/shared.service\";\r\nimport { saveAs } from 'file-saver';\r\nimport { ActivatedRoute } from \"@angular/router\";\r\n\r\n@Component({\r\n  selector: 'app-view-cost-summary',\r\n  templateUrl: './view-cost-summary.component.html',\r\n  styleUrls: ['./view-cost-summary.component.css']\r\n})\r\nexport class ViewCostSummaryComponent implements OnInit {\r\n    itemsList: Array<Form>;\r\n    partialItemsList: Array<Form>;\r\n    usersList: Array<User>;\r\n    formId = '50';\r\n    processNum: string;\r\n    \r\n    constructor(private fms: FormManagementService, private adms: AuthenticationService,\r\n          private dcs: DocumentConversionService, private ssv: SharedService,\r\n          private route: ActivatedRoute) { }\r\n    \r\n    ngOnInit() {\r\n        this.populateNames();\r\n        \r\n        this.route.params.subscribe(params => {\r\n            this.processNum = params['processNum'];\r\n            this.populateItems();\r\n        });\r\n        \r\n        const uid = JSON.parse(localStorage.getItem('currentUser')).user.uid;\r\n    }\r\n    \r\n    populateItems() {\r\n    this.fms.getForms(this.formId, 20, 'DESC', 0)\r\n      .subscribe(itemsList => {\r\n          if(this.processNum){\r\n              itemsList = itemsList.filter(x => x.process_number == this.processNum);\r\n          }\r\n          \r\n          if(itemsList){\r\n              this.itemsList = itemsList.sort((a, b) => {\r\n                  return (a.id < b.id ? 1 : a.id > b.id ? -1 : 0);\r\n              });\r\n          }\r\n          this.partialItemsList = itemsList;\r\n      });\r\n    }\r\n    \r\n    populateNames() {\r\n      this.adms.getUsers()\r\n        .subscribe(usersList => this.usersList = usersList);\r\n    }\r\n    \r\n    getEmployeeName(uid: string) {\r\n        if (uid == null || this.usersList == null) { return ''; }\r\n        const user = this.usersList.find(x => x.uid === uid);\r\n        return (user? user.name : '-');\r\n    }\r\n    \r\n    onDownload(id: number) {\r\n    //  this.dcs.DownloadWorkOrder(id)\r\n    //      .subscribe(\r\n    //          res => {\r\n    //              saveAs(res, 'WorkOrder.xls', \r\n    //                  { type: 'application/vnd.ms-excel' })\r\n    //          },\r\n    //          error => {\r\n    //              // Display error message\r\n    //              this.ssv.showError('Error: Unable to download form!');\r\n    //          }\r\n    //      );\r\n    }\r\n    \r\n    searchItem(input: string) {\r\n      if (this.partialItemsList && this.itemsList) {\r\n        this.partialItemsList = this.itemsList.filter(x => \r\n            (x.inputMap.job_num.toLowerCase().includes(input.toLowerCase())) ||\r\n            x.inputMap.project_name.toLowerCase().includes(input.toLowerCase()));\r\n      }\r\n    }\r\n}\r\n","module.exports = \".big_checkbox{\\r\\n\\twidth: 30px;\\r\\n\\theight: 30px;\\r\\n\\tpadding: 10px;\\r\\n}\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZm9ybXMvdmlldy1pcnJpZ2F0aW9uLXJlcGFpci92aWV3LWlycmlnYXRpb24tcmVwYWlyLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Q0FDQyxXQUFXO0NBQ1gsWUFBWTtDQUNaLGFBQWE7QUFDZCIsImZpbGUiOiJzcmMvYXBwL2Zvcm1zL3ZpZXctaXJyaWdhdGlvbi1yZXBhaXIvdmlldy1pcnJpZ2F0aW9uLXJlcGFpci5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmJpZ19jaGVja2JveHtcclxuXHR3aWR0aDogMzBweDtcclxuXHRoZWlnaHQ6IDMwcHg7XHJcblx0cGFkZGluZzogMTBweDtcclxufSJdfQ== */\"","module.exports = \"<!-- MODALS -->\\r\\n<div class=\\\"modal fade nmodal_layer\\\" id=\\\"approveIRF\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" data-backdrop=\\\"false\\\">\\r\\n  <div class=\\\"modal-dialog\\\" role=\\\"document\\\">\\r\\n    <div class=\\\"modal-content\\\">\\r\\n      <div class=\\\"modal-header text-center\\\">\\r\\n      \\t<button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\r\\n      \\t<h4 class=\\\"modal-title\\\">Approve or Reject</h4>\\r\\n      </div>\\r\\n      <div class=\\\"modal-body\\\">\\r\\n\\t\\t<div class=\\\"form-group text-left\\\">\\r\\n         \\t<label for=\\\"decision_reason\\\">If REJECT, Enter Reason: </label>\\r\\n\\t\\t\\t<textarea class=\\\"form-control\\\" name=\\\"reject_reason\\\" [(ngModel)]=\\\"reject_reason\\\"></textarea>\\r\\n      \\t</div>\\r\\n      \\t<div class=\\\"text-center\\\">\\r\\n      \\t\\t<button type=\\\"button\\\" (click)=\\\"onIrrigationManagerApprove()\\\" class=\\\"btn btn-success margin_right_15\\\"><span class=\\\"glyphicon glyphicon-ok\\\"></span> Approve</button>\\r\\n\\t\\t\\t<button type=\\\"button\\\" (click)=\\\"onIrrigationManagerReject()\\\" class=\\\"btn btn-danger\\\"><span class=\\\"glyphicon glyphicon-remove\\\"></span> Reject</button>\\r\\n      \\t</div>\\r\\n      </div>\\r\\n      <div class=\\\"modal-footer text-center\\\">\\r\\n      \\t<button type=\\\"button\\\" class=\\\"btn\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\">Cancel</button>\\r\\n      </div>\\r\\n    </div><!-- /.modal-content -->\\r\\n  </div><!-- /.modal-dialog -->\\r\\n</div><!-- /.modal -->\\r\\n\\r\\n<div class=\\\"modal fade nmodal_layer\\\" id=\\\"approveCIRF\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" data-backdrop=\\\"false\\\">\\r\\n  <div class=\\\"modal-dialog\\\" role=\\\"document\\\">\\r\\n    <div class=\\\"modal-content\\\">\\r\\n      <div class=\\\"modal-header text-center\\\">\\r\\n      \\t<button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\r\\n      \\t<h4 class=\\\"modal-title\\\">Approve or Reject</h4>\\r\\n      </div>\\r\\n      <div class=\\\"modal-body\\\">\\r\\n\\t\\t<div class=\\\"form-group text-left\\\">\\r\\n\\t\\t\\t<label for=\\\"job_number\\\"><b>APPROVE</b> - Enter Job Number: </label>\\r\\n\\t\\t\\t<input type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"jobnum\\\" [(ngModel)]=\\\"jobnum\\\">\\r\\n\\t\\t\\t<h5 class=\\\"red_text\\\"><b><i>Form will be assigned to a work order with the same job number</i></b></h5>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"form-group text-left\\\">\\r\\n         \\t<label for=\\\"decision_reason\\\">REJECT - Enter Reason for Rejection: </label>\\r\\n\\t\\t\\t<textarea class=\\\"form-control\\\" name=\\\"reject_reason\\\" [(ngModel)]=\\\"reject_reason\\\"></textarea>\\r\\n      \\t</div>\\r\\n      \\t<div class=\\\"text-center\\\">\\r\\n\\t\\t\\t<button type=\\\"button\\\" (click)=\\\"onCustomerServiceApprove()\\\" class=\\\"btn btn-success margin_right_15\\\"><span class=\\\"glyphicon glyphicon-ok\\\"></span> Approve</button>\\r\\n\\t\\t\\t<button type=\\\"button\\\" (click)=\\\"onCustomerServiceReject()\\\" class=\\\"btn btn-danger\\\"><span class=\\\"glyphicon glyphicon-remove\\\"></span> Reject</button>\\r\\n      \\t</div>\\r\\n      </div>\\r\\n      <div class=\\\"modal-footer text-center\\\">\\r\\n      \\t<button type=\\\"button\\\" class=\\\"btn\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\">Cancel</button>\\r\\n      </div>\\r\\n    </div><!-- /.modal-content -->\\r\\n  </div><!-- /.modal-dialog -->\\r\\n</div><!-- /.modal -->\\r\\n\\r\\n<div class=\\\"modal fade nmodal_layer\\\" id=\\\"changeCIRF\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" data-backdrop=\\\"false\\\">\\r\\n  <div class=\\\"modal-dialog\\\" role=\\\"document\\\">\\r\\n    <div class=\\\"modal-content\\\">\\r\\n      <div class=\\\"modal-header text-center\\\">\\r\\n      \\t<button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\r\\n      \\t<h4 class=\\\"modal-title\\\">Change Job Number</h4>\\r\\n      </div>\\r\\n      <div class=\\\"modal-body\\\">\\r\\n\\t\\t<div class=\\\"form-group text-left\\\">\\r\\n\\t\\t\\t<label for=\\\"job_number\\\">Enter new Job Number: </label>\\r\\n\\t\\t\\t<input type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"jobnum\\\" [(ngModel)]=\\\"jobnum\\\">\\r\\n\\t\\t\\t<h5 class=\\\"red_text\\\"><b><i>Form will be assigned to work order with the same job number</i></b></h5>\\r\\n\\t\\t</div>\\r\\n      \\t<div class=\\\"text-center\\\">\\r\\n\\t\\t\\t<button type=\\\"button\\\" (click)=\\\"onCustomerServiceApprove()\\\" class=\\\"btn btn-success margin_right_15\\\"><span class=\\\"glyphicon glyphicon-ok\\\"></span> Save Changes</button>\\r\\n      \\t</div>\\r\\n      </div>\\r\\n      <div class=\\\"modal-footer text-center\\\">\\r\\n      \\t<button type=\\\"button\\\" class=\\\"btn\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\">Cancel</button>\\r\\n      </div>\\r\\n    </div><!-- /.modal-content -->\\r\\n  </div><!-- /.modal-dialog -->\\r\\n</div><!-- /.modal -->\\r\\n\\r\\n<div class=\\\"modal fade nmodal_layer\\\" id=\\\"deleteIRFModal\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" data-backdrop=\\\"false\\\">\\r\\n  <div class=\\\"modal-dialog\\\" role=\\\"document\\\">\\r\\n    <div class=\\\"modal-content\\\">\\r\\n      <div class=\\\"modal-header text-center\\\">\\r\\n      \\t<button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\r\\n      \\t<h4 class=\\\"modal-title\\\">Delete Irrigation Repair Form</h4>\\r\\n      </div>\\r\\n      <div class=\\\"modal-body modal_body_warning\\\">\\r\\n\\t\\t<b>Warning: This will remove the Irrigation Repair Form from the system.</b><br>\\r\\n      </div>\\r\\n      <div class=\\\"modal-footer text-center\\\">\\r\\n      \\t<button type=\\\"button\\\" (click)=\\\"onDelete()\\\" class=\\\"btn btn-danger margin_right_15\\\">Delete</button>\\r\\n      \\t<button type=\\\"button\\\" class=\\\"btn\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\">Cancel</button>\\r\\n      </div>\\r\\n    </div><!-- /.modal-content -->\\r\\n  </div><!-- /.modal-dialog -->\\r\\n</div><!-- /.modal -->\\r\\n\\r\\n<div class=\\\"modal fade nmodal_layer\\\" id=\\\"recallIRF\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" data-backdrop=\\\"false\\\">\\r\\n  <div class=\\\"modal-dialog\\\" role=\\\"document\\\">\\r\\n    <div class=\\\"modal-content\\\">\\r\\n      <div class=\\\"modal-header text-center\\\">\\r\\n      \\t<button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\r\\n      \\t<h4 class=\\\"modal-title\\\">Recall Irrigation Repair Form</h4>\\r\\n      </div>\\r\\n      <div class=\\\"modal-body modal_body_warning\\\">\\r\\n\\t\\t<b>Recall Irrigation Repair Backup to allow edit?</b><br>\\r\\n      </div>\\r\\n      <div class=\\\"modal-footer text-center\\\">\\r\\n      \\t<button type=\\\"button\\\" (click)=\\\"onRecall()\\\" class=\\\"btn btn-primary margin_right_15\\\">Recall</button>\\r\\n      \\t<button type=\\\"button\\\" class=\\\"btn\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\">Cancel</button>\\r\\n      </div>\\r\\n    </div><!-- /.modal-content -->\\r\\n  </div><!-- /.modal-dialog -->\\r\\n</div><!-- /.modal -->\\r\\n\\r\\n<div class=\\\"row margin_top_15 text-center\\\">\\r\\n   \\t<h3 class=\\\"text-capitalize\\\">Irrigation Repair - {{formProcessState}}</h3>\\r\\n   \\t<div class=\\\"col-sm-12 text-center\\\" *ngIf=\\\"roleId == '4' || roleId == '6'\\\">\\r\\n\\t\\t<button type=\\\"button\\\" class=\\\"btn btn-success btn-sm button\\\" routerLink=\\\"/irrigation-repair\\\">\\r\\n\\t\\t\\t<span class=\\\"glyphicon glyphicon-plus\\\"></span> New Form\\r\\n\\t\\t</button>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"col-sm-12 text-center\\\" *ngIf=\\\"paramJobnum\\\">\\r\\n\\t\\t<button *ngIf=\\\"!downloadingAll\\\" type=\\\"button\\\" class=\\\"btn btn-info btn-sm button\\\" (click)=\\\"onDownloadAll()\\\">\\r\\n\\t\\t\\t<span class=\\\"glyphicon glyphicon-download-alt\\\"></span> Download All\\r\\n\\t\\t</button>\\r\\n\\t\\t<span *ngIf=\\\"downloadingAll\\\">\\r\\n\\t\\t\\tDownloading...\\r\\n\\t\\t</span>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"col-sm-2 col-sm-offset-5 text-center\\\" *ngIf=\\\"!paramJobnum && userPermission.includes(3)\\\">\\r\\n\\t\\t<input type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"jobnum\\\" [(ngModel)]=\\\"jobnum\\\" placeholder=\\\"Enter job number...\\\">\\r\\n\\t</div>\\r\\n\\t<div class=\\\"col-sm-1 text-center\\\" *ngIf=\\\"!paramJobnum && userPermission.includes(3)\\\">\\r\\n\\t\\t<button *ngIf=\\\"!downloadingAll\\\" type=\\\"button\\\" class=\\\"btn btn-info btn-sm button\\\" (click)=\\\"assignJobnumToIRFs()\\\">\\r\\n\\t\\t\\tAssign All\\r\\n\\t\\t</button>\\r\\n\\t\\t<span *ngIf=\\\"downloadingAll\\\">\\r\\n\\t\\t\\tAssigning...\\r\\n\\t\\t</span>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"col-sm-4\\\"></div>\\r\\n\\t<div class=\\\"col-sm-10 col-sm-offset-1 col-xs-12 margin_top_15 table-responsive\\\">\\r\\n        <div class=\\\"row margin_bottom_15\\\">\\r\\n\\t\\t\\t<div class=\\\"col-sm-4 text-left input-group\\\">\\r\\n\\t               <div class=\\\"input-group-addon\\\"><span class=\\\"glyphicon glyphicon-search\\\"></span></div>\\r\\n\\t               <input type=\\\"text\\\" id=\\\"filterForm\\\" class=\\\"form-control\\\" placeholder=\\\"Search Project or Job #\\\" (input)=\\\"searchItem($event.target.value)\\\">\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<i *ngIf=\\\"!partialItemsList\\\">\\r\\n\\t\\t\\tNo items here!\\r\\n        </i>\\r\\n        <table *ngIf=\\\"partialItemsList\\\" class=\\\"table table_view table-hover\\\">\\r\\n   \\t\\t\\t<thead>\\r\\n       \\t\\t\\t<tr class=\\\"table_heading\\\">\\r\\n       \\t\\t\\t\\t<th class=\\\"table_cell_heading col-sm-1\\\" *ngIf=\\\"!paramJobnum\\\"></th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Project</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Job # / CSR #</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Date</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-3\\\">Last Modified</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Actions</th>\\r\\n       \\t\\t\\t</tr>\\r\\n  \\t\\t\\t</thead>\\r\\n\\t\\t\\t<tbody>\\r\\n                <tr *ngFor=\\\"let item of partialItemsList\\\" class=\\\"table_body\\\">\\r\\n                \\t<td *ngIf=\\\"!paramJobnum && item.process_number == 3\\\" class=\\\"col-sm-1\\\"><input type=\\\"checkbox\\\" (click)=\\\"toggleIrf(item.id)\\\" id=\\\"cb{{item.id}}\\\" class=\\\"big_checkbox\\\"/></td>\\r\\n                    <td class=\\\"col-sm-2\\\">{{item.inputMap.job_name? item.inputMap.job_name : 'Unspecified'}}</td>\\r\\n                    <td class=\\\"col-sm-2\\\">{{item.inputMap.job_num}}<br>{{item.inputMap.csr_num? ('CSR: ' + item.inputMap.csr_num) : ''}}</td>\\r\\n                    <td class=\\\"col-sm-2\\\">{{item.inputMap.date | date}}</td>\\r\\n                    <td class=\\\"col-sm-3\\\">{{item.last_modified_date | date}}<br>by {{getEmployeeName(item.modifier_id)}}</td>\\r\\n                    <td class=\\\"col-sm-2\\\">\\r\\n                    \\t<ng-container *ngIf=\\\"item.process_number == 1 && userPermission.includes(1)\\\">\\r\\n                    \\t\\t<a *ngIf=\\\"!item.is_downloading_pdf\\\" (click)=\\\"onDownloadPDF(item.id)\\\">View</a><span *ngIf=\\\"item.is_downloading_pdf\\\" class=\\\"loader\\\"></span>\\r\\n                    \\t\\t<br><a routerLink=\\\"/irrigation-repair/{{item.id}}\\\">Edit</a>\\r\\n                    \\t\\t<br><a (click)=\\\"onClickForm(item.id)\\\" data-toggle=\\\"modal\\\" data-target=\\\"#deleteIRFModal\\\">Delete</a>\\r\\n                    \\t</ng-container>\\r\\n                    \\t<ng-container *ngIf=\\\"item.process_number == 2 && userPermission.includes(2)\\\">\\r\\n                        \\t<a routerLink=\\\"/irrigation-repair/{{item.id}}\\\">Edit</a> - <a *ngIf=\\\"!item.is_downloading_pdf\\\" (click)=\\\"onDownloadPDF(item.id)\\\">PDF</a><span *ngIf=\\\"item.is_downloading_pdf\\\" class=\\\"loader\\\"></span>\\r\\n                        \\t<br><a (click)=\\\"onClickForm(item.id)\\\" data-toggle=\\\"modal\\\" data-target=\\\"#approveIRF\\\">Review</a>\\r\\n                        </ng-container>\\r\\n                        <ng-container *ngIf=\\\"item.process_number == 3 && userPermission.includes(3)\\\">\\r\\n                        <a *ngIf=\\\"!item.is_downloading_pdf\\\" (click)=\\\"onDownloadPDF(item.id)\\\">View</a><span *ngIf=\\\"item.is_downloading_pdf\\\" class=\\\"loader\\\"></span>\\r\\n                        <br><a (click)=\\\"onClickForm(item.id)\\\" data-toggle=\\\"modal\\\" data-target=\\\"#approveCIRF\\\">Review</a>\\r\\n                        \\t<br>\\r\\n                        \\t<a *ngIf=\\\"item.inputMap.attachment1\\\" href=\\\"{{getS3FormPicUrl(item.inputMap.attachment1)}}\\\" target=\\\"_blank\\\">Pic 1 &nbsp;</a>\\r\\n                        \\t<a *ngIf=\\\"item.inputMap.attachment2\\\" href=\\\"{{getS3FormPicUrl(item.inputMap.attachment2)}}\\\" target=\\\"_blank\\\">Pic 2 &nbsp;</a>\\r\\n                        \\t<a *ngIf=\\\"item.inputMap.attachment3\\\" href=\\\"{{getS3FormPicUrl(item.inputMap.attachment3)}}\\\" target=\\\"_blank\\\">Pic 3 &nbsp;</a>\\r\\n                        \\t<a *ngIf=\\\"item.inputMap.attachment4\\\" href=\\\"{{getS3FormPicUrl(item.inputMap.attachment4)}}\\\" target=\\\"_blank\\\">Pic 4 &nbsp;</a>\\r\\n                        \\t<a *ngIf=\\\"item.inputMap.attachment5\\\" href=\\\"{{getS3FormPicUrl(item.inputMap.attachment5)}}\\\" target=\\\"_blank\\\">Pic 5 &nbsp;</a>\\r\\n                        \\t<a *ngIf=\\\"item.inputMap.attachment6\\\" href=\\\"{{getS3FormPicUrl(item.inputMap.attachment6)}}\\\" target=\\\"_blank\\\">Pic 6 &nbsp;</a>\\r\\n                        \\t<a *ngIf=\\\"item.inputMap.attachment7\\\" href=\\\"{{getS3FormPicUrl(item.inputMap.attachment7)}}\\\" target=\\\"_blank\\\">Pic 7 &nbsp;</a>\\r\\n                        \\t<a *ngIf=\\\"item.inputMap.attachment8\\\" href=\\\"{{getS3FormPicUrl(item.inputMap.attachment8)}}\\\" target=\\\"_blank\\\">Pic 8 &nbsp;</a>\\r\\n                        \\t<a *ngIf=\\\"item.inputMap.attachment9\\\" href=\\\"{{getS3FormPicUrl(item.inputMap.attachment9)}}\\\" target=\\\"_blank\\\">Pic 9 &nbsp;</a>\\r\\n                        \\t<a *ngIf=\\\"item.inputMap.attachment10\\\" href=\\\"{{getS3FormPicUrl(item.inputMap.attachment10)}}\\\" target=\\\"_blank\\\">Pic 10</a>\\r\\n                        \\t<br><a (click)=\\\"onClickForm(item.id)\\\" data-toggle=\\\"modal\\\" data-target=\\\"#deleteIRFModal\\\">Delete</a>\\r\\n                        </ng-container>\\r\\n                        <ng-container *ngIf=\\\"item.process_number == 3 && !userPermission.includes(3)\\\">\\r\\n                        \\t<a routerLink=\\\"/irrigation-repair/{{item.id}}\\\">View</a>\\r\\n\\t\\t\\t\\t\\t\\t\\t<br><a (click)=\\\"onClickForm(item.id)\\\" data-toggle=\\\"modal\\\" data-target=\\\"#recallIRF\\\">Recall</a>\\r\\n                        </ng-container>\\r\\n                        <ng-container *ngIf=\\\"item.process_number == 4\\\">\\r\\n                        \\t<a *ngIf=\\\"!item.is_downloading_pdf\\\" (click)=\\\"onDownloadPDF(item.id)\\\">View</a><span *ngIf=\\\"item.is_downloading_pdf\\\" class=\\\"loader\\\"></span>\\r\\n                        \\t<br>\\r\\n                        \\t<a *ngIf=\\\"item.inputMap.attachment1\\\" href=\\\"{{getS3FormPicUrl(item.inputMap.attachment1)}}\\\" target=\\\"_blank\\\">Pic 1 &nbsp;</a>\\r\\n                        \\t<a *ngIf=\\\"item.inputMap.attachment2\\\" href=\\\"{{getS3FormPicUrl(item.inputMap.attachment2)}}\\\" target=\\\"_blank\\\">Pic 2 &nbsp;</a>\\r\\n                        \\t<a *ngIf=\\\"item.inputMap.attachment3\\\" href=\\\"{{getS3FormPicUrl(item.inputMap.attachment3)}}\\\" target=\\\"_blank\\\">Pic 3 &nbsp;</a>\\r\\n                        \\t<a *ngIf=\\\"item.inputMap.attachment4\\\" href=\\\"{{getS3FormPicUrl(item.inputMap.attachment4)}}\\\" target=\\\"_blank\\\">Pic 4 &nbsp;</a>\\r\\n                        \\t<a *ngIf=\\\"item.inputMap.attachment5\\\" href=\\\"{{getS3FormPicUrl(item.inputMap.attachment5)}}\\\" target=\\\"_blank\\\">Pic 5 &nbsp;</a>\\r\\n                        \\t<a *ngIf=\\\"item.inputMap.attachment6\\\" href=\\\"{{getS3FormPicUrl(item.inputMap.attachment6)}}\\\" target=\\\"_blank\\\">Pic 6 &nbsp;</a>\\r\\n                        \\t<a *ngIf=\\\"item.inputMap.attachment7\\\" href=\\\"{{getS3FormPicUrl(item.inputMap.attachment7)}}\\\" target=\\\"_blank\\\">Pic 7 &nbsp;</a>\\r\\n                        \\t<a *ngIf=\\\"item.inputMap.attachment8\\\" href=\\\"{{getS3FormPicUrl(item.inputMap.attachment8)}}\\\" target=\\\"_blank\\\">Pic 8 &nbsp;</a>\\r\\n                        \\t<a *ngIf=\\\"item.inputMap.attachment9\\\" href=\\\"{{getS3FormPicUrl(item.inputMap.attachment9)}}\\\" target=\\\"_blank\\\">Pic 9 &nbsp;</a>\\r\\n                        \\t<a *ngIf=\\\"item.inputMap.attachment10\\\" href=\\\"{{getS3FormPicUrl(item.inputMap.attachment10)}}\\\" target=\\\"_blank\\\">Pic 10 &nbsp;</a>\\r\\n                        \\t<br><a (click)=\\\"onClickForm(item.id)\\\" data-toggle=\\\"modal\\\" data-target=\\\"#changeCIRF\\\">Change Job #</a>\\r\\n                        </ng-container>\\r\\n                    </td>\\r\\n                </tr>\\r\\n\\t         </tbody>\\r\\n        </table>\\r\\n   \\t</div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { Form, User } from \"process-smart-ng6-lib\";\r\nimport { FormManagementService, DocumentConversionService, AuthenticationService, EmailNotificationService, Email, Material, InventoryManagementService } from \"process-smart-ng6-lib\";\r\nimport { SharedService } from \"src/app/_services/shared.service\";\r\nimport { saveAs } from 'file-saver';\r\nimport { ActivatedRoute } from \"@angular/router\";\r\nimport { CustomDownloadServiceService } from \"src/app/_services/custom-download-service.service\";\r\nimport { Router } from \"@angular/router\";\r\nimport { S3Manager } from \"src/app/api/S3Manager\";\r\nimport { NewApiService } from 'src/app/_services/newApi';\r\n\r\n@Component({\r\n    selector: 'app-view-irrigation-repair',\r\n    templateUrl: './view-irrigation-repair.component.html',\r\n    styleUrls: ['./view-irrigation-repair.component.css']\r\n})\r\nexport class ViewIrrigationRepairComponent implements OnInit {\r\n    itemsList: Array<Form>;\r\n    partialItemsList: Array<any>;\r\n    usersList: Array<User>;\r\n    userPermission: Array<any>;  //Contains a list of process numbers this role is responsible for\r\n    typeId = '47';\r\n    processNum: string;\r\n    paramJobnum: string;\r\n    downloadingAll: boolean;\r\n    selectedIRFList: Array<string>;\r\n\r\n    uid: string;\r\n    roleId: string;\r\n    clientId: string;\r\n    focusedId: string;\r\n    reject_reason: string;\r\n    jobnum: string;\r\n    jobNumsAvailable: Array<string>;\r\n    formProcessState: string;\r\n    woList: Array<Form>;\r\n    stList: Array<Form>;\r\n    matList: Array<Material>;   //For pricing\r\n\r\n    typeId3 = '45';  //Work Order\r\n    typeId2 = '54'; //Stock Transfer\r\n    model: Form;    //Work Order\r\n    model2: Form;    //Stock Transfer\r\n    fillerUid: string;\r\n\r\n    constructor(private fms: FormManagementService, private adms: AuthenticationService,\r\n        private dcs: DocumentConversionService, private ssv: SharedService,\r\n        private cds: CustomDownloadServiceService, private route: ActivatedRoute,\r\n        private ems: EmailNotificationService, private router: Router,\r\n        private ims: InventoryManagementService, private nas: NewApiService) { }\r\n\r\n    ngOnInit() {\r\n        this.selectedIRFList = [];\r\n        this.reject_reason = '';\r\n        this.uid = JSON.parse(localStorage.getItem('currentUser')).user.uid;\r\n        this.roleId = JSON.parse(localStorage.getItem('currentUser')).user.role_id;\r\n        this.clientId = JSON.parse(localStorage.getItem('currentUser')).user.client_id;\r\n\r\n        this.initEmptyWoAndSt();\r\n        this.populateNames();\r\n        this.populatePermissions();\r\n        this.populateWOList();\r\n        this.populateSTList();\r\n        this.populateMatList();\r\n        this.downloadingAll = false;\r\n\r\n        this.route.params.subscribe(params => {\r\n            this.processNum = params['processNum'];\r\n            this.paramJobnum = params['jobnum'];\r\n            this.populateItems();\r\n            switch (this.processNum) {\r\n                case '1': this.formProcessState = 'Draft'; break;\r\n                case '2': this.formProcessState = 'Waiting Manager Approval'; break;\r\n                case '3': this.formProcessState = 'Awaiting Office Staff Approval'; break;\r\n                case '4': this.formProcessState = 'Assigned to Work Order'; break;\r\n                default: this.formProcessState = 'All'; break;\r\n            }\r\n        });\r\n\r\n        // this.nas.getViewPurchaseOrder(this.roleId).subscribe(data => {\r\n        //     console.log(\"data\", data)\r\n        // })\r\n\r\n    }\r\n\r\n    populateMatList() {\r\n        this.ims.getMaterials('1')\r\n            .subscribe(matList => {\r\n                this.matList = matList;\r\n            })\r\n    }\r\n\r\n    populateItems() {\r\n        // this.fms.getForms(this.typeId, 10000, 'DESC', 0)\r\n        //     .subscribe(itemsList => {\r\n        //         console.log(\"this.processNum\", this.processNum, this.paramJobnum)\r\n        //         if (this.processNum) {\r\n        //             //Only include ones at this current process number\r\n        //             itemsList = itemsList.filter(x => x.process_number == this.processNum);\r\n\r\n        //             //Only include non-deleted forms\r\n        //             itemsList = itemsList.filter(x => x.is_deleted == '0');\r\n\r\n        //             //If available, filter by job number\r\n        //             if (this.paramJobnum) {\r\n        //                 itemsList = itemsList.filter(x => x.inputMap.job_num != null && x.inputMap.job_num.trim() == this.paramJobnum);\r\n        //             }\r\n\r\n        //             //If this is drafts list or user is technician, only allow owner to see\r\n        //             if (this.processNum == '1' || this.roleId == '6') {\r\n        //                 itemsList = itemsList.filter(x => x.filler_id == this.uid);\r\n        //             }\r\n\r\n        //             if (itemsList) {\r\n        //                 this.ssv.alerts['irf_' + this.processNum] = itemsList.length;\r\n        //             }\r\n        //         }\r\n\r\n        //         if (itemsList) {\r\n        //             this.itemsList = itemsList.sort((a, b) => {\r\n        //                 return (a.id < b.id ? 1 : a.id > b.id ? -1 : 0);\r\n        //             });\r\n        //         }\r\n        //         this.partialItemsList = itemsList;\r\n        //     });\r\n\r\n        this.nas.getViewWalkThrough(this.typeId, this.processNum, this.uid).subscribe(itemsList => {\r\n            console.log(\"itemsList\", itemsList)\r\n            if (itemsList) {\r\n                this.itemsList = itemsList.sort((a, b) => {\r\n                    return (a.id < b.id ? 1 : a.id > b.id ? -1 : 0);\r\n                });\r\n            }\r\n            this.partialItemsList = itemsList;\r\n        })\r\n    }\r\n\r\n    populateNames() {\r\n        this.adms.getUsers()\r\n            .subscribe(usersList => this.usersList = usersList);\r\n    }\r\n\r\n    populatePermissions() {\r\n        const role_id = JSON.parse(localStorage.getItem('currentUser')).user.role_id;\r\n        this.adms.getFormPermissions(role_id)\r\n            .subscribe(list => this.userPermission = list.filter(x => x.form_type_id == this.typeId).map(x => x.process_num));\r\n    }\r\n\r\n    getEmployeeName(uid: string) {\r\n        if (uid == null || this.usersList == null) { return ''; }\r\n        const user = this.usersList.find(x => x.uid === uid);\r\n        return (user ? user.name : '-');\r\n    }\r\n\r\n    onDownloadPDF(id: string) {\r\n        //Disable download until response received\r\n        this.partialItemsList.find(x => x.id == id).is_downloading_pdf = true;\r\n\r\n        this.cds.downloadIrrigationRepairPDF(id)\r\n            .subscribe(\r\n                res => {\r\n                    saveAs(res, 'IrrigationForm.pdf',\r\n                        { type: 'application/pdf' });\r\n                    //Re-enable download\r\n                    this.partialItemsList.find(x => x.id == id).is_downloading_pdf = false;\r\n                },\r\n                error => {\r\n                    // Display error message\r\n                    console.log(error);\r\n                    this.ssv.showError('Error: Unable to download form!');\r\n\r\n                    //Re-enable download\r\n                    this.partialItemsList.find(x => x.id == id).is_downloading_pdf = false;\r\n                }\r\n            );\r\n    }\r\n\r\n    searchItem(input: string) {\r\n        if (this.partialItemsList && this.itemsList) {\r\n            if (!input) {\r\n                this.partialItemsList = this.itemsList;\r\n            }\r\n            else {\r\n                this.partialItemsList = this.itemsList.filter(x =>\r\n                    ((x.inputMap.job_num && x.inputMap.job_num.toLowerCase().includes(input.toLowerCase()))) ||\r\n                    (x.inputMap.job_name && x.inputMap.job_name.toLowerCase().includes(input.toLowerCase())) ||\r\n                    (x.filler_id && this.getEmployeeName(x.filler_id).toLowerCase().includes(input.toLowerCase())));\r\n            }\r\n        }\r\n    }\r\n\r\n    onSubmit(state, id, actionVerb) {\r\n        //Close all modals\r\n        document.getElementById('approveIRF').style.display = \"none\";\r\n        document.getElementById('approveCIRF').style.display = \"none\";\r\n        document.getElementById('deleteIRFModal').style.display = \"none\";\r\n\r\n        //Update form\r\n        this.fms.setFormState(this.typeId, id, state)\r\n            .subscribe(\r\n                data => {\r\n                    this.ssv.countForm('irf_3', '47', null, '3');\r\n                    this.ssv.showSuccess('Form successfully ' + actionVerb + '!');\r\n                    this.router.navigate(['/view-irrigation-repair/' + state]);\r\n                },\r\n                error => {\r\n                    // Display error message\r\n                    this.ssv.showError('Error: Form failed to be ' + actionVerb + '!');\r\n                }\r\n            );\r\n    }\r\n\r\n    onIrrigationManagerApprove() {\r\n        let model: Form = this.itemsList.find(x => x.id == this.focusedId);\r\n\r\n        //Change form state\r\n        this.onSubmit('3', this.focusedId, 'approved');\r\n\r\n        //Send email to Customer Service (role = 7)\r\n        const recipient = this.usersList.find(x => x.role_id == '7' && x.is_active == '1');\r\n        this.sendIRFManagerApprovalEmail(recipient.uid);\r\n    }\r\n\r\n    onIrrigationManagerReject() {\r\n        let model: Form = this.itemsList.find(x => x.id == this.focusedId);\r\n\r\n        //Change form state\r\n        this.onSubmit('1', this.focusedId, 'rejected');\r\n\r\n        //Send email to Technician\r\n        const recipient = this.usersList.find(x => x.uid == model.filler_id);\r\n        this.sendIRFManagerRejectionEmail(recipient.uid);\r\n    }\r\n\r\n    /**\r\n     * 1. Create WO and ST\r\n     * 2. For all IRFs, assign jobnum\r\n     */\r\n    onCustomerServiceApproveAll() {\r\n        this.createWoAndStThenAssignIRFs();\r\n    }\r\n\r\n    addToIrfList(irfId: string) {\r\n        const index = this.selectedIRFList.indexOf(irfId, 0);\r\n        if (index === -1) {\r\n            this.selectedIRFList.push(irfId);\r\n        }\r\n    }\r\n\r\n    removeFromIrfList(irfId: string) {\r\n        const index = this.selectedIRFList.indexOf(irfId, 0);\r\n        if (index > -1) {\r\n            this.selectedIRFList.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    initEmptyWoAndSt() {\r\n        //Init Work Order model\r\n        this.model = <Form>{\r\n            'id': '0',\r\n            'type_id': this.typeId3,\r\n            'status_id': '1',\r\n            'process_number': '1',\r\n            'created_date': this.ssv.toHtmlDate(null),\r\n            'last_modified_date': this.ssv.toHtmlDate(null),\r\n            'filler_id': this.fillerUid,\r\n            'modifier_id': this.fillerUid,\r\n            'inputMap': {\r\n                'date': this.ssv.toHtmlDate(null)\r\n            },\r\n            \"inputTables\": {\r\n                \"materials\": [],\r\n                \"labors\": []\r\n            }\r\n        };\r\n\r\n        //Init Stock Transfer model\r\n        this.model2 = <Form>{\r\n            'id': '0',\r\n            'type_id': this.typeId2,\r\n            'status_id': '1',\r\n            'process_number': '1',\r\n            'created_date': this.ssv.toHtmlDate(null),\r\n            'last_modified_date': this.ssv.toHtmlDate(null),\r\n            'filler_id': this.fillerUid,\r\n            'modifier_id': this.fillerUid,\r\n            'inputMap': {\r\n                'date': this.ssv.toHtmlDate(null)\r\n            },\r\n            \"inputTables\": {\r\n                \"materials\": []\r\n            }\r\n        };\r\n    }\r\n\r\n    createWoAndStThenAssignIRFs() {\r\n        //Create a new work order and ST, then assign IRFs\r\n        this.model.inputMap.job_num = this.jobnum;\r\n        this.fms.newForm(this.model, this.typeId)\r\n            .subscribe(\r\n                data => {\r\n                    let woId = data['formId'];\r\n                    //If successful, create a new stock transfer\r\n                    this.model2.inputMap.job_num = this.jobnum;\r\n                    this.fms.newForm(this.model2, this.typeId2)\r\n                        .subscribe(\r\n                            data => {\r\n                                // Created ST successfully, now assign IRFs\r\n                                this.assignJobnumToIRFs();\r\n                            },\r\n                            error => {\r\n                                // Display error message\r\n                                this.ssv.showError('Unable to create stock transfer!');\r\n                            }\r\n                        );\r\n                },\r\n                error => {\r\n                    // Display error message\r\n                    this.ssv.showError('Unable to start job!');\r\n                }\r\n            );\r\n    }\r\n\r\n    toggleIrf(id) {\r\n        console.log('toggling ' + id);\r\n        if (this.selectedIRFList.includes(id)) {\r\n            const index = this.selectedIRFList.indexOf(id, 0);\r\n            if (index > -1) {\r\n                this.selectedIRFList.splice(index, 1);\r\n            }\r\n        } else {\r\n            this.selectedIRFList.push(id);\r\n        }\r\n    }\r\n\r\n    //Iterate over list of IRF IDs and assign one by one\r\n    assignJobnumToIRFs() {\r\n        let countIrf = this.selectedIRFList.length;\r\n        if (countIrf <= 0) {\r\n            console.log('Error: Empty IRF list');\r\n            return;\r\n        }\r\n\r\n        let materialsToAdd = [];\r\n        let irfLeft = countIrf;\r\n        for (let i = 0; i < countIrf; i++) {\r\n            let model: Form = this.itemsList.find(x => x.id == this.selectedIRFList[i]);\r\n            if (model) {\r\n                model.created_date = this.toHtmlDate(null);\r\n                model.last_modified_date = this.toHtmlDate(null);\r\n                model.process_number = '4';\r\n                model.inputMap.job_num = this.jobnum;\r\n                this.fms.updateForm(model, this.typeId, this.selectedIRFList[i])\r\n                    .subscribe(\r\n                        data => {\r\n                            //IRF Update successful; now update stock transfer and work order\r\n                            //Get IRF matlist (to add to ST)\r\n                            irfLeft--;\r\n                            const irfMatList = model.inputTables.materials;\r\n                            for (let j = 0; j < irfMatList.length; j++) {\r\n                                let itemIdx = materialsToAdd.findIndex(x => x.material_id == irfMatList[j].material_id);\r\n                                if (itemIdx === -1) {\r\n                                    //Current material list to add to ST does not contain the i-th material in this IRF\r\n                                    materialsToAdd.push(irfMatList[j]);\r\n                                } else {\r\n                                    //Material already exists, add its quantity\r\n                                    materialsToAdd[itemIdx].quantity = '' + (+materialsToAdd[itemIdx].quantity + +irfMatList[j].quantity);\r\n                                }\r\n                            }\r\n\r\n                            if (irfLeft <= 0) {\r\n                                //Update stock transfer with aggregate materials from all IRFs\r\n                                this.updateStockTransfer(this.jobnum, materialsToAdd);\r\n                            }\r\n                        },\r\n                        error => {\r\n                            // Display error message\r\n                            this.ssv.showError('Error: Failed to approve form!');\r\n                        }\r\n                    );\r\n            }\r\n        }\r\n    }\r\n\r\n    onCustomerServiceApprove() {\r\n        //Close all modals\r\n        document.getElementById('approveIRF').style.display = \"none\";\r\n        document.getElementById('approveCIRF').style.display = \"none\";\r\n        document.getElementById('deleteIRFModal').style.display = \"none\";\r\n        document.getElementById('changeCIRF').style.display = \"none\";\r\n        //Update form\r\n        if (this.jobnum && this.jobNumsAvailable.includes(this.jobnum)) {\r\n            let model: Form = this.itemsList.find(x => x.id == this.focusedId);\r\n            if (model) {\r\n                model.created_date = this.toHtmlDate(null);\r\n                model.last_modified_date = this.toHtmlDate(null);\r\n                model.process_number = '4';\r\n                model.inputMap.job_num = this.jobnum;\r\n                this.fms.updateForm(model, this.typeId, this.focusedId)\r\n                    .subscribe(\r\n                        data => {\r\n                            //IRF Update successful; now update stock transfer and work order\r\n                            //Get IRF matlist (to add to ST)\r\n                            const irfMatList = model.inputTables.materials;\r\n                            this.updateStockTransfer(this.jobnum, irfMatList);\r\n                            //Delete IRF materials from ST with the previous job number so we don't add duplicate items\r\n                            if (this.paramJobnum) {\r\n                                this.removeMatListFromST(this.paramJobnum, irfMatList);\r\n                            }\r\n                        },\r\n                        error => {\r\n                            // Display error message\r\n                            this.ssv.showError('Error: Failed to approve form!');\r\n                        }\r\n                    );\r\n            }\r\n        }\r\n        else {\r\n            this.ssv.showError('Error: Job number does not exist!');\r\n            //Close all modals\r\n            document.getElementById('approveIRF').style.display = \"none\";\r\n            document.getElementById('approveCIRF').style.display = \"none\";\r\n            document.getElementById('deleteIRFModal').style.display = \"none\";\r\n            document.getElementById('changeCIRF').style.display = \"none\";\r\n        }\r\n    }\r\n\r\n    onCustomerServiceReject() {\r\n        let model: Form = this.itemsList.find(x => x.id == this.focusedId);\r\n\r\n        //Change form state\r\n        this.onSubmit('2', this.focusedId, 'rejected');\r\n\r\n        //Send email to Irrigation Manager (approver) \r\n        const recipient = this.usersList.find(x => x.role_id == '4' && x.is_active == '1');\r\n        this.sendIRFCSRejectionEmail(recipient.uid);\r\n    }\r\n\r\n    removeMatListFromST(jobnum: string, irfMatList: Array<any>) {\r\n        //Get Stock Transfer\r\n        let st: Form = this.getStockTransfer(jobnum);\r\n\r\n        if (!st.inputTables) {\r\n            st.inputTables = [];\r\n        }\r\n        if (!st.inputTables.materials) {\r\n            st.inputTables.materials = [];\r\n        }\r\n\r\n        //Iterate over IRF and add parts/quantity\r\n        let matToDelete = [];\r\n        irfMatList.forEach(x => {\r\n            //Find part in ST\r\n            let y = st.inputTables.materials.find(y => y.material_id == x.material_id);\r\n\r\n            //Get parts pricing from materials list\r\n            let price = this.matList.find(z => z.id == x.material_id).price;\r\n\r\n            //Update Qty if it exists in ST\r\n            if (y) {\r\n                //Material found in Stock Transfer\r\n                y.quantity = \"\" + (+y.quantity - +x.quantity);\r\n\r\n                //Delete if quantity reaches 0\r\n                if (y.quantity == '0') {\r\n                    matToDelete.push(y.material_id);\r\n                }\r\n            }\r\n            //If Material not found in ST, ignore\r\n        });\r\n\r\n        //Update qty in form\r\n        st.created_date = this.ssv.toHtmlDate(st.created_date);\r\n        st.last_modified_date = this.ssv.toHtmlDate(null);\r\n\r\n        this.fms.updateForm(st, '54', st.id)\r\n            .subscribe(\r\n                data => {\r\n                    //Delete if quantity reaches 0\r\n                    matToDelete.forEach(y => {\r\n                        let body = {\r\n                            \"inputMap\": {\r\n                                \"form_id\": \"\" + st.id,\r\n                                \"material_id\": \"\" + y\r\n                            }\r\n                        };\r\n                        this.fms.deleteMultiInput(body, '54', 'materials', 'material_id')\r\n                            .subscribe(data => { console.log('Deleted'); });\r\n                    });\r\n                },\r\n                error => {\r\n                    console.log('ST Update error');\r\n                }\r\n            );\r\n    }\r\n\r\n    //If material to add already exists in ST, update their qty in ST;\r\n    //Otherwise, add this item to ST\r\n    updateStockTransfer(jobnum: string, irfMatList: Array<any>) {\r\n        //Get Stock Transfer\r\n        let st: Form = this.getStockTransfer(jobnum);\r\n\r\n        if (!st.inputTables) {\r\n            st.inputTables = [];\r\n        }\r\n        if (!st.inputTables.materials) {\r\n            st.inputTables.materials = [];\r\n        }\r\n\r\n        //Iterate over IRF and add parts/quantity\r\n        irfMatList.forEach(x => {\r\n            //Find part in ST\r\n            let y = st.inputTables.materials.find(y => y.material_id == x.material_id);\r\n\r\n            //Get parts pricing from materials list\r\n            let price = this.matList.find(z => z.id == x.material_id).price;\r\n\r\n            //Update Qty & price if it exists in ST\r\n            if (y) {\r\n                //Material found in Stock Transfer\r\n                y.quantity = \"\" + (+x.quantity + +y.quantity);\r\n                y.price = \"\" + (Math.round(+price * 100) / 100);\r\n            }\r\n            else {\r\n                //Material not found in ST, create a new one\r\n                x.price = \"\" + (Math.round(+price * 100) / 100);\r\n                st.inputTables.materials.push(x);\r\n            }\r\n        });\r\n\r\n        //Fix dates\r\n        st.created_date = this.ssv.toHtmlDate(st.created_date);\r\n        st.last_modified_date = this.ssv.toHtmlDate(null);\r\n\r\n        this.fms.updateForm(st, '54', st.id)\r\n            .subscribe(\r\n                data => {\r\n                    this.ssv.showSuccess('Form successfully approved!');\r\n                    //this.router.navigate(['/view-irrigation-repair/3']);\r\n                    this.redirectTo('/view-irrigation-repair/3');\r\n                },\r\n                error => {\r\n                    console.log('ST Update error');\r\n                }\r\n            );\r\n    }\r\n\r\n    redirectTo(uri: string) {\r\n        this.router.navigateByUrl('/', { skipLocationChange: true }).then(() =>\r\n            this.router.navigate([uri]));\r\n    }\r\n\r\n    onDelete() {\r\n        //Close all modals\r\n        document.getElementById('approveIRF').style.display = \"none\";\r\n        document.getElementById('approveCIRF').style.display = \"none\";\r\n        document.getElementById('deleteIRFModal').style.display = \"none\";\r\n\r\n        this.fms.setFormDeactivateStatus(this.typeId, this.focusedId, true)\r\n            .subscribe(\r\n                data => {\r\n                    this.ssv.showSuccess('Form successfully deleted!');\r\n                    window.location.reload();\r\n                },\r\n                error => {\r\n                    // Display error message\r\n                    this.ssv.showError('Error: Form deletion failed!');\r\n                }\r\n            );\r\n    }\r\n\r\n    onRecall() {\r\n        //Close all modals\r\n        document.getElementById('recallIRF').style.display = \"none\";\r\n\r\n        this.fms.setFormState(this.typeId, this.focusedId, '2')\r\n            .subscribe(\r\n                data => {\r\n                    // Page redirect when getting response\r\n                    this.ssv.showSuccess('Form successfully recalled.');\r\n                    this.router.navigate(['/view-irrigation-repair/2']);\r\n                },\r\n                error => {\r\n                    // Display error message\r\n                    this.ssv.showError('Error: Unable to recall form!');\r\n                }\r\n            );\r\n    }\r\n\r\n    onClickForm(id) {\r\n        this.focusedId = id;\r\n    }\r\n\r\n    //Send email to Technician\r\n    sendIRFManagerRejectionEmail(recipientId) {\r\n        //Get form filler as recipient\r\n        this.adms.getUser(recipientId).subscribe(\r\n            user => {\r\n                if (user.email) {\r\n                    //Send Email\r\n                    const recipientList = [user.email];\r\n                    const ccList = [];\r\n                    const bccList = [];\r\n                    const subject = \"Irrigation Repair Form Revision Request\";\r\n                    const content = user.name + \",\"\r\n                        + \"<br><br>An Irrigation Repair form has been rejected\"\r\n                        + (!this.reject_reason ? \".\" : \" with the following reason:<br><i>\" + this.reject_reason + \"</i>\")\r\n                        + \"<br><br>Please login to the Dashboard to revise or discard the form.\"\r\n                        + \"<br>The form will be placed in the <i>Draft</i> section.\";\r\n                    const email: Email = {\r\n                        'subject': subject,\r\n                        'body': content,\r\n                        'to': recipientList,\r\n                        'cc': ccList,\r\n                        'bcc': bccList\r\n                    };\r\n                    this.ems.sendEmail(email).subscribe(data => { });\r\n                }\r\n                else {\r\n                    console.log('Email recipient not found');\r\n                }\r\n            },\r\n            error => {\r\n                console.log(error);\r\n                // Display error message\r\n                this.ssv.showError('Error: Email recipient not found!');\r\n            });\r\n    }\r\n\r\n    //Send email to Irrigation Manager\r\n    sendIRFCSRejectionEmail(recipientId) {\r\n        //Get form filler as recipient\r\n        this.adms.getUser(recipientId).subscribe(\r\n            user => {\r\n                if (user.email) {\r\n                    //Send Email\r\n                    const recipientList = [user.email];\r\n                    const ccList = [];\r\n                    const bccList = [];\r\n                    const subject = \"Irrigation Repair Form Revision Request\";\r\n                    const content = user.name + \",\"\r\n                        + \"<br><br>An Irrigation Repair form has been rejected\"\r\n                        + (!this.reject_reason ? \".\" : \" with the following reason:<br><i>\" + this.reject_reason + \"</i>\")\r\n                        + \"<br><br>Please login to the Dashboard to revise or discard the form.\"\r\n                        + \"<br>The form will be placed in the <i>Draft</i> section.\";\r\n                    const email: Email = {\r\n                        'subject': subject,\r\n                        'body': content,\r\n                        'to': recipientList,\r\n                        'cc': ccList,\r\n                        'bcc': bccList\r\n                    };\r\n                    this.ems.sendEmail(email).subscribe(data => { });\r\n                }\r\n                else {\r\n                    console.log('Email recipient not found');\r\n                }\r\n            },\r\n            error => {\r\n                console.log(error);\r\n                // Display error message\r\n                this.ssv.showError('Error: Email recipient not found!');\r\n            });\r\n    }\r\n\r\n    //Send email to Customer Service\r\n    sendIRFManagerApprovalEmail(recipientId) {\r\n        //Get form filler as recipient\r\n        this.adms.getUser(recipientId).subscribe(\r\n            user => {\r\n                if (user.email) {\r\n                    //Send Email\r\n                    const recipientList = [user.email];\r\n                    const ccList = [];\r\n                    const bccList = [];\r\n                    const subject = \"Irrigation Repair Job Number Request\";\r\n                    const content = user.name + \",\"\r\n                        + \"<br><br>An Irrigation Repair requires your approval.\"\r\n                        + \"<br>Please login to the Dashboard to review the repair.\"\r\n                    const email: Email = {\r\n                        'subject': subject,\r\n                        'body': content,\r\n                        'to': recipientList,\r\n                        'cc': ccList,\r\n                        'bcc': bccList\r\n                    };\r\n                    this.ems.sendEmail(email).subscribe(data => { });\r\n                }\r\n                else {\r\n                    console.log('Email recipient not found');\r\n                }\r\n            },\r\n            error => {\r\n                console.log(error);\r\n                // Display error message\r\n                this.ssv.showError('Error: Email recipient not found!');\r\n            });\r\n    }\r\n\r\n    //Get active Stock Transfer with this job number\r\n    getStockTransfer(jobnum: string) {\r\n        if (!jobnum || !this.stList) { this.ssv.showError('Error: Cannot find corresponding Stock Transfer!'); }\r\n        let st = this.stList.find(x => x.inputMap.job_num == jobnum);\r\n        return st;\r\n    }\r\n\r\n    //Get active Work Order with this job number\r\n    getWorkOrder(jobnum: string) {\r\n        if (!jobnum || !this.stList) { this.ssv.showError('Error: Cannot find corresponding Work Order!'); }\r\n        return this.woList.find(x => x.inputMap.job_num == jobnum);\r\n    }\r\n\r\n    populateWOList() {\r\n        this.nas.getProcessnum('45')\r\n            .subscribe(itemsList => {\r\n                if (this.processNum) {\r\n                    //Only include non-deleted forms\r\n                    itemsList = itemsList.filter(x => x.is_deleted == '0');\r\n\r\n                    //Populate job number list\r\n                    this.jobNumsAvailable = itemsList.map(x => x.inputMap.job_num);\r\n\r\n                    //Find one with matching job number\r\n                    if (this.paramJobnum) {\r\n                        itemsList = itemsList.filter(x => x.inputMap.job_num == this.paramJobnum);\r\n                    }\r\n                }\r\n\r\n                //Populate Work Order list\r\n                if (itemsList) {\r\n                    this.woList = itemsList;\r\n                }\r\n            });\r\n    }\r\n\r\n    populateSTList() {\r\n        // this.fms.getForms('54', 10000, 'DESC', 0)\r\n        this.nas.getProcessnum('54')\r\n            .subscribe(itemsList => {\r\n                if (this.processNum) {\r\n                    //Only include non-deleted forms\r\n                    itemsList = itemsList.filter(x => x.is_deleted == '0');\r\n\r\n                    //Find one with matching job number\r\n                    //                if(this.paramJobnum){\r\n                    //                    itemsList = itemsList.filter(x => x.inputMap.job_num == this.paramJobnum);\r\n                    //                }\r\n                }\r\n\r\n                //Populate Stock Transfer list\r\n                if (itemsList) {\r\n                    this.stList = itemsList;\r\n                }\r\n            });\r\n    }\r\n\r\n    //Download zip of all irrigation repairs of the same job number\r\n    onDownloadAll() {\r\n        if (this.itemsList && this.paramJobnum) {\r\n            let id_list = this.itemsList.map(x => x.id);\r\n            this.downloadingAll = true;\r\n            this.cds.downloadIrrigationRepairPDF_zip(id_list)\r\n                .subscribe(\r\n                    res => {\r\n                        this.downloadingAll = false;\r\n                        saveAs(res, 'irflist.zip',\r\n                            { type: 'application/zip' });\r\n                    },\r\n                    error => {\r\n                        this.downloadingAll = false;\r\n                        // Display error message\r\n                        console.log(error);\r\n                        this.ssv.showError('Error: Unable to download forms!');\r\n                    }\r\n                );\r\n        }\r\n    }\r\n\r\n    getS3FormPicUrl(filename) {\r\n        return S3Manager.getFormAttachmentUrl(filename, this.clientId);\r\n    }\r\n\r\n    toHtmlDate(datestr: string) {\r\n        let date;\r\n        if (datestr) {\r\n            date = new Date(datestr);\r\n        }\r\n        else {\r\n            date = new Date();\r\n        }\r\n        const dd = date.getDate() < 10 ? '0' + date.getDate() : date.getDate();\r\n        const mm = date.getMonth() < 9 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1;\r\n        const yyyy = date.getFullYear();\r\n\r\n        return yyyy + '-' + mm + '-' + dd;\r\n    }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Zvcm1zL3ZpZXctbS13b3JrLW9yZGVyL3ZpZXctbS13b3JrLW9yZGVyLmNvbXBvbmVudC5jc3MifQ== */\"","module.exports = \"<!-- MODALS -->\\r\\n<div class=\\\"modal fade nmodal_layer\\\" id=\\\"approveIRF\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" data-backdrop=\\\"false\\\">\\r\\n  <div class=\\\"modal-dialog\\\" role=\\\"document\\\">\\r\\n    <div class=\\\"modal-content\\\">\\r\\n      <div class=\\\"modal-header text-center\\\">\\r\\n      \\t<button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\r\\n      \\t<h4 class=\\\"modal-title\\\">Approve or Reject</h4>\\r\\n      </div>\\r\\n      <div class=\\\"modal-body\\\">\\r\\n\\t\\t<div class=\\\"form-group text-left\\\">\\r\\n         \\t<label for=\\\"decision_reason\\\">If REJECT, Enter Reason: </label>\\r\\n\\t\\t\\t<textarea class=\\\"form-control\\\" name=\\\"reject_reason\\\" [(ngModel)]=\\\"reject_reason\\\"></textarea>\\r\\n      \\t</div>\\r\\n      \\t<div class=\\\"text-center\\\">\\r\\n      \\t\\t<button type=\\\"button\\\" (click)=\\\"onApprove()\\\" class=\\\"btn btn-success margin_right_15\\\"><span class=\\\"glyphicon glyphicon-ok\\\"></span> Approve</button>\\r\\n\\t\\t\\t<button type=\\\"button\\\" (click)=\\\"onReject()\\\" class=\\\"btn btn-danger\\\"><span class=\\\"glyphicon glyphicon-remove\\\"></span> Reject</button>\\r\\n      \\t</div>\\r\\n      </div>\\r\\n      <div class=\\\"modal-footer text-center\\\">\\r\\n      \\t<button type=\\\"button\\\" class=\\\"btn\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\">Cancel</button>\\r\\n      </div>\\r\\n    </div><!-- /.modal-content -->\\r\\n  </div><!-- /.modal-dialog -->\\r\\n</div><!-- /.modal -->\\r\\n\\r\\n<div class=\\\"row margin_top_15 text-center\\\">\\r\\n   \\t<h3 class=\\\"text-capitalize\\\">Work Order Proposal - {{formProcessState}}</h3>\\r\\n   \\t<div class=\\\"col-sm-12 text-center\\\">\\r\\n\\t\\t<button type=\\\"button\\\" class=\\\"btn btn-success btn-sm button\\\" routerLink=\\\"/m-work-order\\\">\\r\\n\\t\\t\\t<span class=\\\"glyphicon glyphicon-plus\\\"></span> New Form\\r\\n\\t\\t</button>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"col-sm-10 col-sm-offset-1 col-xs-12 margin_top_15 table-responsive\\\">\\r\\n        <div class=\\\"row margin_bottom_15\\\">\\r\\n\\t\\t\\t<div class=\\\"col-sm-4 text-left input-group\\\">\\r\\n\\t               <div class=\\\"input-group-addon\\\"><span class=\\\"glyphicon glyphicon-search\\\"></span></div>\\r\\n\\t               <input type=\\\"text\\\" id=\\\"filterForm\\\" class=\\\"form-control\\\" placeholder=\\\"Search Project or Job #\\\" (input)=\\\"searchItem($event.target.value)\\\">\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<i *ngIf=\\\"!partialItemsList\\\">\\r\\n\\t\\t\\tNo items here!\\r\\n        </i>\\r\\n        <table *ngIf=\\\"partialItemsList\\\" class=\\\"table table_view table-hover\\\">\\r\\n   \\t\\t\\t<thead>\\r\\n       \\t\\t\\t<tr class=\\\"table_heading\\\">\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-3\\\">Project</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Job #</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">PO #</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-3\\\">Last Modified</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Actions</th>\\r\\n       \\t\\t\\t</tr>\\r\\n  \\t\\t\\t</thead>\\r\\n\\t\\t\\t<tbody>\\r\\n                <tr *ngFor=\\\"let item of partialItemsList\\\" class=\\\"table_body\\\">\\r\\n                    <td class=\\\"col-sm-3\\\">{{item.inputMap.project_name}}</td>\\r\\n                    <td class=\\\"col-sm-2\\\">{{item.inputMap.job_num}}</td>\\r\\n                    <td class=\\\"col-sm-2\\\">{{item.inputMap.po_num}}</td>\\r\\n                    <td class=\\\"col-sm-3\\\">{{item.last_modified_date | date}}<br>by {{getEmployeeName(item.modifier_id)}}</td>\\r\\n                    <td class=\\\"col-sm-2\\\">\\r\\n                        <ng-container *ngIf=\\\"item.process_number == 1 && userPermission.includes(1)\\\">\\r\\n                    \\t\\t<a routerLink=\\\"/m-work-order/{{item.id}}\\\">Edit</a> - <a (click)=\\\"onDownloadXls(item.id)\\\">XLS</a>\\r\\n                    \\t</ng-container>\\r\\n                    \\t<ng-container *ngIf=\\\"item.process_number == 2 && userPermission.includes(1)\\\">\\r\\n                    \\t\\t<a (click)=\\\"onRecall(item.id)\\\">Recall</a>\\r\\n                    \\t</ng-container>\\r\\n                    \\t<ng-container *ngIf=\\\"item.process_number == 2 && userPermission.includes(2)\\\">\\r\\n                    \\t\\t<a routerLink=\\\"/m-work-order/{{item.id}}\\\">View</a> - <a (click)=\\\"onDownloadXls(item.id)\\\">Download</a>\\r\\n                        \\t<br><a (click)=\\\"onClickForm(item.id)\\\" data-toggle=\\\"modal\\\" data-target=\\\"#approveIRF\\\">Review</a>\\r\\n                        </ng-container>\\r\\n                        <ng-container *ngIf=\\\"item.process_number == 3 && userPermission.includes(3)\\\">\\r\\n                        \\t<a (click)=\\\"onDownloadXls(item.id)\\\">Download</a>\\r\\n                        \\t<br><a routerLink=\\\"/m-work-order/{{item.id}}\\\">View & Delete</a>\\r\\n                        </ng-container>\\r\\n                    </td>\\r\\n                </tr>\\r\\n\\t         </tbody>\\r\\n        </table>\\r\\n   \\t</div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { Form, User } from \"process-smart-ng6-lib\";\r\nimport { FormManagementService, DocumentConversionService, AuthenticationService } from \"process-smart-ng6-lib\";\r\nimport { SharedService } from \"src/app/_services/shared.service\";\r\nimport { saveAs } from 'file-saver';\r\nimport { ActivatedRoute } from \"@angular/router\";\r\nimport { Router } from \"@angular/router\";\r\n\r\n@Component({\r\n  selector: 'app-view-m-work-order',\r\n  templateUrl: './view-m-work-order.component.html',\r\n  styleUrls: ['./view-m-work-order.component.css']\r\n})\r\nexport class ViewMWorkOrderComponent implements OnInit {\r\n    itemsList: Array<Form>;\r\n    partialItemsList: Array<Form>;\r\n\r\nuserPermission: Array<string>;\r\n    usersList: Array<User>;\r\n    typeId = '51';\r\n    processNum: string;\r\n    formProcessState: string;\r\n    uid: string;\r\n    roleId: string;\r\n    clientId: string;\r\n    reject_reason:string;\r\n    focusedId: string;\r\n    \r\n    constructor(private fms: FormManagementService, private adms: AuthenticationService,\r\n          private dcs: DocumentConversionService, private ssv: SharedService,\r\n          private route: ActivatedRoute, private router: Router,) { }\r\n    \r\n    ngOnInit() {\r\n        this.uid = JSON.parse(localStorage.getItem('currentUser')).user.uid;\r\n        this.roleId = JSON.parse(localStorage.getItem('currentUser')).user.role_id;\r\n        this.clientId = JSON.parse(localStorage.getItem('currentUser')).user.client_id;\r\n        \r\n        this.populateNames();\r\n        this.populatePermissions();\r\n        \r\n        this.route.params.subscribe(params => {\r\n            this.processNum = params['processNum'];\r\n            this.populateItems();\r\n            switch (this.processNum){\r\n            case '1': this.formProcessState = 'Draft'; break;\r\n            case '2': this.formProcessState = 'Pending Management Approval'; break;\r\n            case '3': this.formProcessState = 'Awaiting Job Number'; break;\r\n            case '4': this.formProcessState = 'Awaiting Job Assignment'; break;\r\n            case '5': this.formProcessState = 'Active Job'; break;\r\n            case '6': this.formProcessState = 'Ready for Billing'; break;\r\n            case '7': this.formProcessState = 'Pending for Archival'; break;\r\n            default: this.formProcessState = 'All'; break;\r\n            }\r\n        });\r\n    }\r\n    \r\n    populatePermissions() {\r\n        const role_id = JSON.parse(localStorage.getItem('currentUser')).user.role_id;\r\n        this.adms.getFormPermissions(role_id)\r\n          .subscribe(list => this.userPermission = list.map(x => x.process_num));\r\n      }\r\n    \r\n    /**\r\n     * Reject form and send it back to Customer Service for submission (process #1)\r\n     * @param id\r\n     */\r\n    onReject() {\r\n        let model: Form = this.itemsList.find(x => x.id == this.focusedId);\r\n    \r\n        //Change form state\r\n        this.onSubmit('1', this.focusedId, 'rejected');\r\n        \r\n      //Send email to Technician\r\n        const recipient = this.usersList.find(x => x.uid == model.filler_id);\r\n        \r\n        //TODO: Email sender\r\n      }\r\n    \r\n    onApprove(){\r\n        let model: Form = this.itemsList.find(x => x.id == this.focusedId);\r\n    \r\n        //Change form state\r\n        this.onSubmit('3', this.focusedId, 'approved');\r\n        \r\n        //Send email to Customer Service (role = 7)\r\n        const recipient = this.usersList.find(x => x.role_id == '7' && x.is_active == '1');\r\n        \r\n      //TODO: Email sender\r\n    }\r\n    \r\n    onClickForm(id){\r\n        this.focusedId = id;\r\n    }\r\n    \r\n    onSubmit(state, id, actionVerb) {\r\n        //Close all modals\r\n        document.getElementById('approveIRF').style.display = \"none\";\r\n        document.getElementById('deleteIRFModal').style.display = \"none\";\r\n        \r\n        //Update form\r\n        this.fms.setFormState(this.typeId, id, state)\r\n        .subscribe(\r\n            data => {\r\n                this.ssv.showSuccess('Form successfully '+actionVerb+'!');\r\n                this.router.navigate(['/view-work-order/'+state]);\r\n              },\r\n              error => {\r\n                  // Display error message\r\n                  this.ssv.showError('Error: Form failed to be '+actionVerb+'!');\r\n              }\r\n        );\r\n      }\r\n    \r\n    populateItems() {\r\n    this.fms.getForms(this.typeId, 50, 'DESC', 0)\r\n      .subscribe(itemsList => {\r\n          if(this.processNum){\r\n              itemsList = itemsList.filter(x => x.process_number == this.processNum);\r\n          }\r\n          \r\n          //Exclude deleted forms\r\n          itemsList = itemsList.filter(x => x.is_deleted == '0');\r\n          \r\n        //If this is drafts list or user is PM, only allow owner to see\r\n          if(this.processNum == '1' || this.roleId == '3'){\r\n              itemsList = itemsList.filter(x => x.filler_id == this.uid);\r\n          }\r\n          \r\n          if(itemsList){\r\n              this.itemsList = itemsList.sort((a, b) => {\r\n                  return (a.id < b.id ? 1 : a.id > b.id ? -1 : 0);\r\n              });\r\n          }\r\n          this.partialItemsList = itemsList;\r\n      });\r\n    }\r\n    \r\n    populateNames() {\r\n      this.adms.getUsers()\r\n        .subscribe(usersList => this.usersList = usersList);\r\n    }\r\n    \r\n    getEmployeeName(uid: string) {\r\n        if (uid == null || this.usersList == null) { return ''; }\r\n        const user = this.usersList.find(x => x.uid === uid);\r\n        return (user? user.name : '-');\r\n    }\r\n    \r\n    onDownload(id: number) {\r\n    //  this.dcs.DownloadWorkOrder(id)\r\n    //  .subscribe(\r\n    //      res => {\r\n    //          saveAs(res, 'WorkOrder.xls', \r\n    //              { type: 'application/vnd.ms-excel' })\r\n    //      },\r\n    //      error => {\r\n    //          // Display error message\r\n    //          this.ssv.showError('Error: Unable to download form!');\r\n    //      }\r\n    //  );\r\n    }\r\n    \r\n    searchItem(input: string) {\r\n      if (this.partialItemsList && this.itemsList) {\r\n        this.partialItemsList = this.itemsList.filter(x => \r\n            (x.inputMap.job_num.toLowerCase().includes(input.toLowerCase())) ||\r\n            x.inputMap.project_name.toLowerCase().includes(input.toLowerCase()));\r\n      }\r\n    }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Zvcm1zL3ZpZXctcHVyY2hhc2Utb3JkZXIvdmlldy1wdXJjaGFzZS1vcmRlci5jb21wb25lbnQuY3NzIn0= */\"","module.exports = \"<div class=\\\"row margin_top_15 text-center\\\">\\r\\n   \\t<h3 class=\\\"text-capitalize\\\">Purchase Order - {{formProcessState}}</h3>\\r\\n   \\t<div class=\\\"col-sm-12 text-center\\\">\\r\\n\\t\\t<button type=\\\"button\\\" class=\\\"btn btn-success btn-sm button\\\" routerLink=\\\"/purchase-order\\\">\\r\\n\\t\\t\\t<span class=\\\"glyphicon glyphicon-plus\\\"></span> New Form\\r\\n\\t\\t</button>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"col-sm-10 col-sm-offset-1 col-xs-12 margin_top_15 table-responsive\\\">\\r\\n        <div class=\\\"row margin_bottom_15\\\">\\r\\n\\t\\t\\t<div class=\\\"col-sm-4 text-left input-group\\\">\\r\\n\\t               <div class=\\\"input-group-addon\\\"><span class=\\\"glyphicon glyphicon-search\\\"></span></div>\\r\\n\\t               <input type=\\\"text\\\" id=\\\"filterForm\\\" class=\\\"form-control\\\" placeholder=\\\"Search Job # or PO #\\\" (input)=\\\"searchItem($event.target.value)\\\">\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<i *ngIf=\\\"!partialItemsList\\\">\\r\\n\\t\\t\\tNo items here!\\r\\n        </i>\\r\\n        <table *ngIf=\\\"partialItemsList\\\" class=\\\"table table_view table-hover\\\">\\r\\n   \\t\\t\\t<thead>\\r\\n       \\t\\t\\t<tr class=\\\"table_heading\\\">\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Job # / PO #</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-3\\\">Job Name</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Date Ordered</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-3\\\">Last Modified</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Actions</th>\\r\\n       \\t\\t\\t</tr>\\r\\n  \\t\\t\\t</thead>\\r\\n\\t\\t\\t<tbody>\\r\\n                <tr *ngFor=\\\"let item of partialItemsList\\\" class=\\\"table_body\\\">\\r\\n                    <td class=\\\"col-sm-3\\\">{{item.inputMap.job_num}}<br>{{item.inputMap.po_num}}</td>\\r\\n                    <td class=\\\"col-sm-2\\\">{{item.inputMap.job_name? item.inputMap.job_name : 'Not specified'}}</td>\\r\\n                    <td class=\\\"col-sm-2\\\">{{item.inputMap.date_ordered | date}}</td>\\r\\n                    <td class=\\\"col-sm-3\\\">{{item.last_modified_date | date}}<br>by {{getEmployeeName(item.modifier_id)}}</td>\\r\\n                    <td class=\\\"col-sm-2\\\">\\r\\n                        <ng-container *ngIf=\\\"item.process_number == 1 && userPermission.includes(1)\\\">\\r\\n                    \\t\\t<a routerLink=\\\"/purchase-order/{{item.id}}\\\">Edit</a>\\r\\n                    \\t</ng-container>\\r\\n                    \\t<ng-container *ngIf=\\\"item.process_number == 2 && userPermission.includes(2)\\\">\\r\\n                        \\t<a routerLink=\\\"/purchase-order/{{item.id}}\\\">Edit</a>\\r\\n\\t\\t\\t\\t\\t\\t\\t<br><a *ngIf=\\\"!item.is_downloading_pdf\\\" (click)=\\\"onDownloadPDF(item.id)\\\">Download</a><span *ngIf=\\\"item.is_downloading_pdf\\\" class=\\\"loader\\\"></span>\\r\\n                        </ng-container>\\r\\n                    </td>\\r\\n                </tr>\\r\\n\\t         </tbody>\\r\\n        </table>\\r\\n   \\t</div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { Form, User } from \"process-smart-ng6-lib\";\r\nimport { FormManagementService, DocumentConversionService, AuthenticationService } from \"process-smart-ng6-lib\";\r\nimport { SharedService } from \"src/app/_services/shared.service\";\r\nimport { saveAs } from 'file-saver';\r\nimport { ActivatedRoute } from \"@angular/router\";\r\nimport { CustomDownloadServiceService } from \"src/app/_services/custom-download-service.service\";\r\n\r\n@Component({\r\n  selector: 'app-view-purchase-order',\r\n  templateUrl: './view-purchase-order.component.html',\r\n  styleUrls: ['./view-purchase-order.component.css']\r\n})\r\nexport class ViewPurchaseOrderComponent implements OnInit {\r\n    itemsList: Array<Form>;\r\n    partialItemsList: Array<any>;\r\n    usersList: Array<User>;\r\n    userPermission: Array<any>;\r\n    typeId = '48';\r\n    processNum: string;\r\n    paramJobnum: string;\r\n    formProcessState: string;\r\n    \r\n    constructor(private fms: FormManagementService, private adms: AuthenticationService,\r\n          private dcs: DocumentConversionService, private ssv: SharedService,\r\n          private route: ActivatedRoute, private cds: CustomDownloadServiceService) { }\r\n    \r\n    ngOnInit() {\r\n        this.populateNames();\r\n        this.populatePermissions();\r\n        \r\n        this.route.params.subscribe(params => {\r\n            this.processNum = params['processNum'];\r\n            this.paramJobnum = params['jobnum'];\r\n            this.populateItems();\r\n            \r\n            switch (this.processNum){\r\n            case '1': this.formProcessState = 'Draft'; break;\r\n            case '2': this.formProcessState = 'Waiting for Order'; break;\r\n            case '3': this.formProcessState = 'Completed'; break;\r\n            default: this.formProcessState = 'All'; break;\r\n            }\r\n        });\r\n        \r\n        const uid = JSON.parse(localStorage.getItem('currentUser')).user.uid;\r\n    }\r\n    \r\n    populatePermissions() {\r\n        const role_id = JSON.parse(localStorage.getItem('currentUser')).user.role_id;\r\n        this.adms.getFormPermissions(role_id)\r\n          .subscribe(list => this.userPermission = list.filter(x => x.form_type_id == this.typeId).map(x => x.process_num));\r\n      }\r\n    \r\n    populateItems() {\r\n    this.fms.getForms(this.typeId, 20, 'DESC', 0)\r\n      .subscribe(itemsList => {\r\n          if(this.processNum){\r\n              itemsList = itemsList.filter(x => x.process_number == this.processNum);\r\n          }\r\n          \r\n        //Only include non-deleted forms\r\n          itemsList = itemsList.filter(x => x.is_deleted == '0');\r\n          \r\n        //If available, filter by job number\r\n          if(this.paramJobnum){\r\n              itemsList = itemsList.filter(x => x.inputMap.job_num == this.paramJobnum);\r\n          }\r\n          if(itemsList){\r\n              this.itemsList = itemsList.sort((a, b) => {\r\n                  return (a.id < b.id ? 1 : a.id > b.id ? -1 : 0);\r\n              });\r\n          }\r\n          this.partialItemsList = itemsList;\r\n      });\r\n    }\r\n    \r\n    populateNames() {\r\n      this.adms.getUsers()\r\n        .subscribe(usersList => this.usersList = usersList);\r\n    }\r\n    \r\n    getEmployeeName(uid: string) {\r\n        if (uid == null || this.usersList == null) { return ''; }\r\n        const user = this.usersList.find(x => x.uid === uid);\r\n        return (user? user.name : '-');\r\n    }\r\n    \r\n    onDownloadPDF(id: string) {\r\n        //Disable download until response received\r\n        this.partialItemsList.find(x => x.id == id).is_downloading_pdf = true;\r\n        \r\n      this.cds.downloadPurchaseOrderPDF(id)\r\n          .subscribe(\r\n              res => {\r\n                  saveAs(res, 'PurchaseOrder.pdf', \r\n                      { type: 'application/pdf' });\r\n                  //Re-enable download\r\n                  this.partialItemsList.find(x => x.id == id).is_downloading_pdf = false;\r\n              },\r\n              error => {\r\n                  // Display error message\r\n                  this.ssv.showError('Error: Unable to download form!');\r\n                  \r\n                //Re-enable download\r\n                  this.partialItemsList.find(x => x.id == id).is_downloading_pdf = false;\r\n              }\r\n          );\r\n    }\r\n    \r\n    searchItem(input: string) {\r\n      if (this.partialItemsList && this.itemsList) {\r\n        this.partialItemsList = this.itemsList.filter(x => \r\n            (x.inputMap.job_num.toLowerCase().includes(input.toLowerCase())) ||\r\n            x.inputMap.po_num.toLowerCase().includes(input.toLowerCase()));\r\n      }\r\n    }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Zvcm1zL3ZpZXctc3RvY2stdHJhbnNmZXIvdmlldy1zdG9jay10cmFuc2Zlci5jb21wb25lbnQuY3NzIn0= */\"","module.exports = \"<div class=\\\"row margin_top_15 text-center\\\">\\r\\n   \\t<h3 class=\\\"text-capitalize\\\">Stock Transfer</h3>\\r\\n   \\t<div class=\\\"col-sm-12 text-center\\\">\\r\\n\\t\\t<button type=\\\"button\\\" class=\\\"btn btn-success btn-sm button\\\" routerLink=\\\"/stock-transfer\\\">\\r\\n\\t\\t\\t<span class=\\\"glyphicon glyphicon-plus\\\"></span> New Entry\\r\\n\\t\\t</button>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"col-sm-10 col-sm-offset-1 col-xs-12 margin_top_15 table-responsive\\\">\\r\\n        <div class=\\\"row margin_bottom_15\\\">\\r\\n\\t\\t\\t<div class=\\\"col-sm-4 text-left input-group\\\">\\r\\n\\t               <div class=\\\"input-group-addon\\\"><span class=\\\"glyphicon glyphicon-search\\\"></span></div>\\r\\n\\t               <input type=\\\"text\\\" id=\\\"filterForm\\\" class=\\\"form-control\\\" placeholder=\\\"Search Project or Job #\\\" (input)=\\\"searchItem($event.target.value)\\\">\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<i *ngIf=\\\"!partialItemsList\\\">\\r\\n\\t\\t\\tNo items here!\\r\\n        </i>\\r\\n        <table *ngIf=\\\"partialItemsList\\\" class=\\\"table table_view table-hover\\\">\\r\\n   \\t\\t\\t<thead>\\r\\n       \\t\\t\\t<tr class=\\\"table_heading\\\">\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-3\\\">Project</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Job #</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Date</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-3\\\">Last Modified</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Actions</th>\\r\\n       \\t\\t\\t</tr>\\r\\n  \\t\\t\\t</thead>\\r\\n\\t\\t\\t<tbody>\\r\\n                <tr *ngFor=\\\"let item of partialItemsList\\\" class=\\\"table_body\\\">\\r\\n                    <td class=\\\"col-sm-3\\\">{{item.inputMap.name}}</td>\\r\\n                    <td class=\\\"col-sm-2\\\">{{item.inputMap.job_num}}</td>\\r\\n                    <td class=\\\"col-sm-2\\\">{{item.inputMap.date | date}}</td>\\r\\n                    <td class=\\\"col-sm-3\\\">{{item.last_modified_date | date}}<br>by {{getEmployeeName(item.modifier_id)}}</td>\\r\\n                    <td class=\\\"col-sm-2\\\">\\r\\n                        <ng-container *ngIf=\\\"item.process_number == 1 && userPermission.includes(1)\\\">\\r\\n                        \\t<a routerLink=\\\"/stock-transfer/{{item.id}}\\\">Edit</a>\\r\\n                        </ng-container>\\r\\n                        <ng-container *ngIf=\\\"item.process_number == 2 && userPermission.includes(1)\\\">\\r\\n                        \\t-\\r\\n                        </ng-container>\\r\\n                    </td>\\r\\n                </tr>\\r\\n\\t         </tbody>\\r\\n        </table>\\r\\n   \\t</div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { Form, User } from \"process-smart-ng6-lib\";\r\nimport { FormManagementService, DocumentConversionService, AuthenticationService } from \"process-smart-ng6-lib\";\r\nimport { SharedService } from \"src/app/_services/shared.service\";\r\nimport { saveAs } from 'file-saver';\r\nimport { ActivatedRoute } from \"@angular/router\";\r\n\r\n@Component({\r\n  selector: 'app-view-stock-transfer',\r\n  templateUrl: './view-stock-transfer.component.html',\r\n  styleUrls: ['./view-stock-transfer.component.css']\r\n})\r\nexport class ViewStockTransferComponent implements OnInit {\r\n    itemsList: Array<Form>;\r\n    partialItemsList: Array<Form>;\r\n    usersList: Array<User>;\r\n    userPermission: Array<string>;  //Contains a list of process numbers this role is responsible for\r\n    formId = '46';\r\n    processNum: string;\r\n    roleId: string;\r\n    uid: string;\r\n    \r\n    constructor(private fms: FormManagementService, private adms: AuthenticationService,\r\n          private dcs: DocumentConversionService, private ssv: SharedService,\r\n          private route: ActivatedRoute) { }\r\n    \r\n    ngOnInit() {\r\n        this.populatePermissions();\r\n        this.populateNames();\r\n        \r\n        this.route.params.subscribe(params => {\r\n            this.processNum = params['processNum'];\r\n        });\r\n        this.populateItems();\r\n        \r\n        this.uid = JSON.parse(localStorage.getItem('currentUser')).user.uid;\r\n        this.roleId = JSON.parse(localStorage.getItem('currentUser')).user.role_id;\r\n    }\r\n    \r\n    populateItems() {\r\n    this.fms.getForms(this.formId, 50, 'DESC', 0)\r\n      .subscribe(itemsList => {\r\n          if(itemsList){\r\n              if(this.processNum){\r\n                  itemsList = itemsList.filter(x => x.process_number == this.processNum);\r\n              }\r\n              \r\n              if(this.roleId == '13'){\r\n                  itemsList = itemsList.filter(x => x.filler_id == this.uid);\r\n              }\r\n              \r\n              this.itemsList = itemsList.sort((a, b) => {\r\n                  return (a.id < b.id ? 1 : a.id > b.id ? -1 : 0);\r\n              });\r\n          }\r\n          this.partialItemsList = itemsList;\r\n      });\r\n    }\r\n    \r\n    populateNames() {\r\n      this.adms.getUsers()\r\n        .subscribe(usersList => this.usersList = usersList);\r\n    }\r\n    \r\n    populatePermissions() {\r\n        const role_id = JSON.parse(localStorage.getItem('currentUser')).user.role_id;\r\n        this.adms.getFormPermissions(role_id)\r\n          .subscribe(list => this.userPermission = list.map(x => x.process_num));\r\n      }\r\n    \r\n    getEmployeeName(uid: string) {\r\n        if (uid == null || this.usersList == null) { return ''; }\r\n        const user = this.usersList.find(x => x.uid === uid);\r\n        return (user? user.name : '-');\r\n    }\r\n    \r\n    onDownload(id: number) {\r\n    //  this.dcs.DownloadWorkOrder(id)\r\n    //      .subscribe(\r\n    //          res => {\r\n    //              saveAs(res, 'WorkOrder.xls', \r\n    //                  { type: 'application/vnd.ms-excel' })\r\n    //          },\r\n    //          error => {\r\n    //              // Display error message\r\n    //              this.ssv.showError('Error: Unable to download form!');\r\n    //          }\r\n    //      );\r\n    }\r\n    \r\n    searchItem(input: string) {\r\n      if (this.partialItemsList && this.itemsList) {\r\n        this.partialItemsList = this.itemsList.filter(x => \r\n            (x.inputMap.job_num.toLowerCase().includes(input.toLowerCase())) ||\r\n            x.inputMap.name.toLowerCase().includes(input.toLowerCase()));\r\n      }\r\n    }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Zvcm1zL3ZpZXctd2Fsa3Rocm91Z2gvdmlldy13YWxrdGhyb3VnaC5jb21wb25lbnQuY3NzIn0= */\"","module.exports = \"<!-- MODALS -->\\r\\n<div class=\\\"modal fade nmodal_layer\\\" id=\\\"approveIRF\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" data-backdrop=\\\"false\\\">\\r\\n  <div class=\\\"modal-dialog\\\" role=\\\"document\\\">\\r\\n    <div class=\\\"modal-content\\\">\\r\\n      <div class=\\\"modal-header text-center\\\">\\r\\n      \\t<button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\r\\n      \\t<h4 class=\\\"modal-title\\\">Reject Walkthrough</h4>\\r\\n      </div>\\r\\n      <div class=\\\"modal-body\\\">\\r\\n\\t\\t<div class=\\\"form-group text-left\\\">\\r\\n         \\t<label for=\\\"decision_reason\\\">Enter Reason: </label>\\r\\n\\t\\t\\t<textarea class=\\\"form-control\\\" name=\\\"reject_reason\\\" [(ngModel)]=\\\"reject_reason\\\"></textarea>\\r\\n      \\t</div>\\r\\n      </div>\\r\\n      <div class=\\\"modal-footer text-center\\\">\\r\\n      \\t<button type=\\\"button\\\" (click)=\\\"onReject()\\\" class=\\\"btn btn-danger\\\"><span class=\\\"glyphicon glyphicon-remove\\\"></span> Reject</button>\\r\\n      \\t<button type=\\\"button\\\" class=\\\"btn\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\">Cancel</button>\\r\\n      </div>\\r\\n    </div><!-- /.modal-content -->\\r\\n  </div><!-- /.modal-dialog -->\\r\\n</div><!-- /.modal -->\\r\\n\\r\\n<div class=\\\"modal fade nmodal_layer\\\" id=\\\"deleteIRFModal\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" data-backdrop=\\\"false\\\">\\r\\n  <div class=\\\"modal-dialog\\\" role=\\\"document\\\">\\r\\n    <div class=\\\"modal-content\\\">\\r\\n      <div class=\\\"modal-header text-center\\\">\\r\\n      \\t<button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\r\\n      \\t<h4 class=\\\"modal-title\\\">Delete Walkthrough Form</h4>\\r\\n      </div>\\r\\n      <div class=\\\"modal-body modal_body_warning\\\">\\r\\n\\t\\t<b>Warning: This will remove the Walkthrough Form from the system.</b><br>\\r\\n      </div>\\r\\n      <div class=\\\"modal-footer text-center\\\">\\r\\n      \\t<button type=\\\"button\\\" (click)=\\\"onDelete()\\\" class=\\\"btn btn-danger margin_right_15\\\">Delete</button>\\r\\n      \\t<button type=\\\"button\\\" class=\\\"btn\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\">Cancel</button>\\r\\n      </div>\\r\\n    </div><!-- /.modal-content -->\\r\\n  </div><!-- /.modal-dialog -->\\r\\n</div><!-- /.modal -->\\r\\n\\r\\n<div class=\\\"row margin_top_15 text-center\\\">\\r\\n   \\t<h3 class=\\\"text-capitalize\\\">Walkthrough Forms</h3>\\r\\n   \\t<div class=\\\"col-sm-12 text-center\\\">\\r\\n\\t\\t<button type=\\\"button\\\" class=\\\"btn btn-success btn-sm button\\\" routerLink=\\\"/walkthrough\\\">\\r\\n\\t\\t\\t<span class=\\\"glyphicon glyphicon-plus\\\"></span> New Form\\r\\n\\t\\t</button>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"col-sm-10 col-sm-offset-1 col-xs-12 margin_top_15 table-responsive\\\">\\r\\n        <div class=\\\"row margin_bottom_15\\\">\\r\\n\\t\\t\\t<div class=\\\"col-sm-4 text-left input-group\\\">\\r\\n\\t               <div class=\\\"input-group-addon\\\"><span class=\\\"glyphicon glyphicon-search\\\"></span></div>\\r\\n\\t               <input type=\\\"text\\\" id=\\\"filterForm\\\" class=\\\"form-control\\\" placeholder=\\\"Search Project...\\\" (input)=\\\"searchItem($event.target.value)\\\">\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<i *ngIf=\\\"!partialItemsList\\\">\\r\\n\\t\\t\\tNo items here!\\r\\n        </i>\\r\\n        <table *ngIf=\\\"userPermission && partialItemsList\\\" class=\\\"table table_view table-hover\\\">\\r\\n   \\t\\t\\t<thead>\\r\\n       \\t\\t\\t<tr class=\\\"table_heading\\\">\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-3\\\">Project</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Status</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-3\\\">Created</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Modified</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Actions</th>\\r\\n       \\t\\t\\t</tr>\\r\\n  \\t\\t\\t</thead>\\r\\n\\t\\t\\t<tbody>\\r\\n                <tr *ngFor=\\\"let item of partialItemsList\\\" class=\\\"table_body\\\">\\r\\n                    <td class=\\\"col-sm-3\\\">{{item.inputMap.project_name}}</td>\\r\\n                    <td class=\\\"col-sm-2\\\">{{item.process_number == '2'? 'Draft' : 'Completed'}}</td>\\r\\n                    <td class=\\\"col-sm-2\\\">{{item.created_date | date}}<br>by {{getEmployeeName(item.filler_id)}}</td>\\r\\n                    <td class=\\\"col-sm-2\\\">{{item.last_modified_date | date}}<br>by {{getEmployeeName(item.modifier_id)}}</td>\\r\\n                    <td class=\\\"col-sm-3\\\">\\r\\n                        <ng-container *ngIf=\\\"item.process_number == 1 && userPermission.includes(2)\\\">\\r\\n                        \\t<span class=\\\"red_text\\\">UPLOADING...</span>\\r\\n                        </ng-container>\\r\\n                    \\t<ng-container *ngIf=\\\"item.process_number == 2 && userPermission.includes(2)\\\">\\r\\n                    \\t\\t<a routerLink=\\\"/walkthrough/{{item.id}}\\\">Edit</a>\\r\\n                    \\t\\t<br><a (click)=\\\"onClickForm(item.id)\\\" data-toggle=\\\"modal\\\" data-target=\\\"#deleteIRFModal\\\">Delete</a>\\r\\n                    \\t</ng-container>\\r\\n                    \\t<ng-container *ngIf=\\\"item.process_number == 3 && userPermission.includes(2)\\\">\\r\\n                    \\t\\t<a (click)=\\\"onRecall(item.id)\\\">Recall</a>\\r\\n                    \\t</ng-container>\\r\\n                    \\t<ng-container *ngIf=\\\"item.process_number == 3 && userPermission.includes(3)\\\">\\r\\n                    \\t\\t<a *ngIf=\\\"!item.is_downloading_pdf\\\" (click)=\\\"onDownloadPDF(item.id)\\\">PDF</a><span *ngIf=\\\"item.is_downloading_pdf\\\" class=\\\"loader\\\"></span>\\r\\n                        \\t/\\r\\n                        \\t<a *ngIf=\\\"!item.is_downloading_docx\\\" (click)=\\\"onDownloadDocx(item.id)\\\">DOCX</a><span *ngIf=\\\"item.is_downloading_docx\\\" class=\\\"loader\\\"></span>\\r\\n                        \\t<br><a (click)=\\\"onClickForm(item.id)\\\" data-toggle=\\\"modal\\\" data-target=\\\"#approveIRF\\\">Reject</a>\\r\\n                        \\t<br><a (click)=\\\"onClickForm(item.id)\\\" data-toggle=\\\"modal\\\" data-target=\\\"#deleteIRFModal\\\">Delete</a>\\r\\n                        </ng-container>\\r\\n                   </td>\\r\\n                </tr>\\r\\n\\t         </tbody>\\r\\n        </table>\\r\\n   \\t</div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { Form, User } from \"process-smart-ng6-lib\";\r\nimport { FormManagementService, DocumentConversionService, AuthenticationService, EmailNotificationService, Email } from \"process-smart-ng6-lib\";\r\nimport { SharedService } from \"src/app/_services/shared.service\";\r\nimport { saveAs } from 'file-saver';\r\nimport { CustomDownloadServiceService } from \"src/app/_services/custom-download-service.service\";\r\nimport { Router } from \"@angular/router\";\r\nimport { ActivatedRoute } from \"@angular/router\";\r\nimport { NewApiService } from 'src/app/_services/newApi';\r\n\r\n@Component({\r\n    selector: 'app-view-walkthrough',\r\n    templateUrl: './view-walkthrough.component.html',\r\n    styleUrls: ['./view-walkthrough.component.css']\r\n})\r\nexport class ViewWalkthroughComponent implements OnInit {\r\n    itemsList: Array<Form>;\r\n    partialItemsList: Array<any>;\r\n    usersList: Array<User>;\r\n    userPermission: Array<string>;  //Contains a list of process numbers this role is responsible for\r\n    typeId = '49';\r\n    processNum: string;\r\n    note: string;\r\n    roleId: string;\r\n    uid: string;\r\n    reject_reason: string;\r\n    focusedId: string;\r\n\r\n    constructor(private fms: FormManagementService, private adms: AuthenticationService,\r\n        private cds: CustomDownloadServiceService, private ssv: SharedService,\r\n        private route: ActivatedRoute, private router: Router,\r\n        private ems: EmailNotificationService, private nas: NewApiService) { }\r\n\r\n    ngOnInit() {\r\n        this.reject_reason = \"\";\r\n        this.populatePermissions();\r\n        this.populateNames();\r\n\r\n        this.route.params.subscribe(params => {\r\n            this.processNum = params['processNum'];\r\n            this.populateItems();\r\n        });\r\n\r\n        this.uid = JSON.parse(localStorage.getItem('currentUser')).user.uid;\r\n        this.roleId = JSON.parse(localStorage.getItem('currentUser')).user.role_id;\r\n    }\r\n\r\n    populateItems() {\r\n        console.log(\"processNum\", this.processNum, this.uid, this.typeId)\r\n        // this.fms.getForms(this.typeId, 200, 'DESC', 0)\r\n        //     .subscribe(itemsList => {\r\n        //        const newItem = itemsList.filter((x: any) => x.id == 35035);\r\n        //         console.log(\"itemsList\", newItem)\r\n        //         if (this.processNum && itemsList) {\r\n        //             itemsList = itemsList.filter(x => x.process_number == this.processNum);\r\n\r\n        //             //Filter out deleted ones\r\n        //             itemsList = itemsList.filter(x => x.is_deleted == '0');\r\n\r\n        //             //Filter by user if PM or Management\r\n        //             if (this.roleId == '3' || this.roleId == '2') {\r\n        //                 itemsList = itemsList.filter(x => x.filler_id == this.uid);\r\n        //             }\r\n\r\n        //             if (itemsList) {\r\n        //                 this.ssv.alerts['wt_' + this.processNum] = itemsList.length;\r\n        //             }\r\n\r\n        //             this.itemsList = itemsList.sort((a, b) => {\r\n        //                 return (a.id < b.id ? 1 : a.id > b.id ? -1 : 0);\r\n        //             });\r\n        //         }\r\n        //         // this.partialItemsList = itemsList;\r\n        //     });\r\n\r\n        this.nas.getViewWalkThrough(this.typeId, this.processNum, this.uid).subscribe(itemsList => {\r\n            if (itemsList) {\r\n                this.ssv.alerts['wt_' + this.processNum] = itemsList.length;\r\n                this.itemsList = itemsList.sort((a, b) => {\r\n                    return (a.id < b.id ? 1 : a.id > b.id ? -1 : 0);\r\n                });\r\n            }\r\n            this.partialItemsList = itemsList;\r\n        })\r\n    }\r\n\r\n    populateNames() {\r\n        this.adms.getUsers()\r\n            .subscribe(usersList => this.usersList = usersList);\r\n    }\r\n\r\n    populatePermissions() {\r\n        const role_id = JSON.parse(localStorage.getItem('currentUser')).user.role_id;\r\n        this.adms.getFormPermissions(role_id)\r\n            .subscribe(list => this.userPermission = list.filter(x => x.form_type_id == this.typeId).map(x => x.process_num));\r\n    }\r\n\r\n    getEmployeeName(uid: string) {\r\n        if (uid == null || this.usersList == null) { return ''; }\r\n        const user = this.usersList.find(x => x.uid === uid);\r\n        return (user ? user.name : '-');\r\n    }\r\n\r\n    onDownloadPDF(id: string) {\r\n        //Disable download until response received\r\n        this.partialItemsList.find(x => x.id == id).is_downloading_pdf = true;\r\n\r\n        this.cds.downloadWalkthroughPDF(id)\r\n            .subscribe(\r\n                res => {\r\n                    saveAs(res, 'Punchlist.pdf',\r\n                        { type: 'application/pdf' });\r\n                    //Re-enable download\r\n                    this.partialItemsList.find(x => x.id == id).is_downloading_pdf = false;\r\n                },\r\n                error => {\r\n                    // Display error message\r\n                    console.log(error);\r\n                    this.ssv.showError('Error: Unable to download form!');\r\n\r\n                    //Re-enable download\r\n                    this.partialItemsList.find(x => x.id == id).is_downloading_pdf = false;\r\n                }\r\n            );\r\n    }\r\n\r\n    onDownloadDocx(id: string) {\r\n        this.partialItemsList.find(x => x.id == id).is_downloading_docx = true;\r\n\r\n        this.cds.downloadWalkthroughDocx(id)\r\n            .subscribe(\r\n                res => {\r\n                    saveAs(res, 'Punchlist.docx',\r\n                        { type: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document' });\r\n                    this.partialItemsList.find(x => x.id == id).is_downloading_docx = false;\r\n                },\r\n                error => {\r\n                    // Display error message\r\n                    console.log(error);\r\n                    this.ssv.showError('Error: Unable to download form!');\r\n                    this.partialItemsList.find(x => x.id == id).is_downloading_docx = false;\r\n                }\r\n            );\r\n    }\r\n\r\n    onDelete() {\r\n        //Close all modals\r\n        document.getElementById('approveIRF').style.display = \"none\";\r\n        document.getElementById('deleteIRFModal').style.display = \"none\";\r\n\r\n        this.fms.setFormDeactivateStatus(this.typeId, this.focusedId, true)\r\n            .subscribe(\r\n                data => {\r\n                    this.ssv.countForm('wt_3', '49', null, '3');\r\n                    this.ssv.showSuccess('Form successfully deleted!');\r\n                    window.location.reload();\r\n                },\r\n                error => {\r\n                    // Display error message\r\n                    this.ssv.showError('Error: Form deletion failed!');\r\n                }\r\n            );\r\n    }\r\n\r\n    onRecall(id: string) {\r\n        this.fms.setFormState(this.typeId, id, '2')\r\n            .subscribe(\r\n                data => {\r\n                    this.ssv.countForm('wt_3', '49', null, '3');\r\n                    // Page redirect when getting response\r\n                    this.ssv.showSuccess('Form successfully recalled.');\r\n                    window.location.reload();\r\n                },\r\n                error => {\r\n                    // Display error message\r\n                    this.ssv.showError('Error: Unable to recall form!');\r\n                }\r\n            );\r\n    }\r\n\r\n    onReject() {\r\n        let model: Form = this.itemsList.find(x => x.id == this.focusedId);\r\n\r\n        //Change form state\r\n        this.fms.setFormState(this.typeId, this.focusedId, '2')\r\n            .subscribe(\r\n                data => {\r\n                    this.ssv.countForm('wt_3', '49', null, '3');\r\n                    // Page redirect when getting response\r\n                    //Email project manager\r\n                    this.notifyPunchlistRejection(this.focusedId, model.filler_id);\r\n                    this.ssv.showSuccess('Form successfully returned to Project Manager.');\r\n                },\r\n                error => {\r\n                    // Display error message\r\n                    console.log(error);\r\n                    this.ssv.showError('Error: Unable to reject form!');\r\n                }\r\n            );\r\n    }\r\n\r\n    onClickForm(id) {\r\n        this.focusedId = id;\r\n    }\r\n\r\n    searchItem(input: string) {\r\n        if (this.partialItemsList && this.itemsList) {\r\n            this.partialItemsList = this.itemsList.filter(x =>\r\n                x.inputMap.project_name.toLowerCase().includes(input.toLowerCase()));\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Notify walkthrough proposal rejection to the Project Manager\r\n     * @param note - Management note containing reason for rejection\r\n     * @throws Exception when form retrieval from database fails or email cannot be sent\r\n     */\r\n    notifyPunchlistRejection(formId, fillerId) {\r\n        //Get form filler as recipient\r\n        this.adms.getUser(fillerId).subscribe(\r\n            user => {\r\n                if (user.email) {\r\n                    //Send Email\r\n                    const recipientList = [user.email];\r\n                    const ccList = [];\r\n                    const bccList = [];\r\n                    const subject = \"Punchlist Revision Request\";\r\n                    const content = user.name + \",\"\r\n                        + \"<br><br>A Punchlist has been returned\"\r\n                        + (this.note ? \".\" : \" with the following note:<br><i>\" + this.note + \"</i>\")\r\n                        + \"<br><br>Please login to the Dashboard to revise or discard the form.\"\r\n                        + \"<br>The form will be placed in the <i>Draft</i> section.\";\r\n                    const email: Email = {\r\n                        'subject': subject,\r\n                        'body': content,\r\n                        'to': recipientList,\r\n                        'cc': ccList,\r\n                        'bcc': bccList\r\n                    };\r\n                    console.log(JSON.stringify(email));\r\n                    this.ems.sendEmail(email).subscribe(data => window.location.reload());\r\n                }\r\n                else {\r\n                    console.log('Email recipient not found');\r\n                }\r\n            },\r\n            error => {\r\n                console.log(error);\r\n                // Display error message\r\n                this.ssv.showError('Error: Email recipient not found!');\r\n            });\r\n    }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Zvcm1zL3ZpZXctd29yay1vcmRlci92aWV3LXdvcmstb3JkZXIuY29tcG9uZW50LmNzcyJ9 */\"","module.exports = \"<!-- MODALS -->\\r\\n<div class=\\\"modal fade nmodal_layer\\\" id=\\\"approveIRF\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" data-backdrop=\\\"false\\\">\\r\\n  <div class=\\\"modal-dialog\\\" role=\\\"document\\\">\\r\\n    <div class=\\\"modal-content\\\">\\r\\n      <div class=\\\"modal-header text-center\\\">\\r\\n      \\t<button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\r\\n      \\t<h4 class=\\\"modal-title\\\">Approve or Reject</h4>\\r\\n      </div>\\r\\n      <div class=\\\"modal-body\\\">\\r\\n\\t\\t<div class=\\\"form-group text-left\\\">\\r\\n         \\t<label for=\\\"decision_reason\\\">If REJECT, Enter Reason: </label>\\r\\n\\t\\t\\t<textarea class=\\\"form-control\\\" name=\\\"reject_reason\\\" [(ngModel)]=\\\"reject_reason\\\"></textarea>\\r\\n      \\t</div>\\r\\n      \\t<div class=\\\"text-center\\\">\\r\\n      \\t\\t<button type=\\\"button\\\" (click)=\\\"onApprove()\\\" class=\\\"btn btn-success margin_right_15\\\"><span class=\\\"glyphicon glyphicon-ok\\\"></span> Approve</button>\\r\\n\\t\\t\\t<button type=\\\"button\\\" (click)=\\\"onReject()\\\" class=\\\"btn btn-danger\\\"><span class=\\\"glyphicon glyphicon-remove\\\"></span> Reject</button>\\r\\n      \\t</div>\\r\\n      </div>\\r\\n      <div class=\\\"modal-footer text-center\\\">\\r\\n      \\t<button type=\\\"button\\\" class=\\\"btn\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\">Cancel</button>\\r\\n      </div>\\r\\n    </div><!-- /.modal-content -->\\r\\n  </div><!-- /.modal-dialog -->\\r\\n</div><!-- /.modal -->\\r\\n\\r\\n<div class=\\\"row margin_top_15 text-center\\\">\\r\\n   \\t<h3 class=\\\"text-capitalize\\\">Work Order - {{formProcessState}}</h3>\\r\\n\\t<div class=\\\"col-sm-10 col-sm-offset-1 col-xs-12 margin_top_15 table-responsive\\\">\\r\\n        <div class=\\\"row margin_bottom_15\\\">\\r\\n\\t\\t\\t<div class=\\\"col-sm-4 text-left input-group\\\">\\r\\n\\t               <div class=\\\"input-group-addon\\\"><span class=\\\"glyphicon glyphicon-search\\\"></span></div>\\r\\n\\t               <input type=\\\"text\\\" id=\\\"filterForm\\\" class=\\\"form-control\\\" placeholder=\\\"Search Project or Job #\\\" (input)=\\\"searchItem($event.target.value)\\\">\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<i *ngIf=\\\"!partialItemsList\\\">\\r\\n\\t\\t\\tNo items here!\\r\\n        </i>\\r\\n        <table *ngIf=\\\"partialItemsList\\\" class=\\\"table table_view table-hover\\\">\\r\\n   \\t\\t\\t<thead>\\r\\n       \\t\\t\\t<tr class=\\\"table_heading\\\">\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-3\\\">Project</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-1\\\">Job #</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">IWO #</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Tech Name</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Start Date\\r\\n           \\t\\t\\t\\t<a (click)=\\\"sortListByDate()\\\">\\r\\n           \\t\\t\\t\\t\\t<span class=\\\"glyphicon glyphicon-sort\\\"></span>\\r\\n           \\t\\t\\t\\t</a>\\r\\n         \\t\\t\\t</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Actions</th>\\r\\n       \\t\\t\\t</tr>\\r\\n  \\t\\t\\t</thead>\\r\\n\\t\\t\\t<tbody>\\r\\n                <tr *ngFor=\\\"let item of partialItemsList\\\" class=\\\"table_body\\\">\\r\\n                    <td class=\\\"col-sm-3\\\">{{item.inputMap.project_name}}</td>\\r\\n                    <td class=\\\"col-sm-1\\\">{{item.inputMap.job_num}}</td>\\r\\n                    <td class=\\\"col-sm-2\\\">{{item.inputMap.po_num}}</td>\\r\\n                    <td class=\\\"col-sm-2\\\">{{irfHeadersMap && item.inputMap.job_num && irfHeadersMap[item.inputMap.job_num]? getEmployeeName(irfHeadersMap[item.inputMap.job_num].filler_id) : '-'}}</td>\\r\\n                    <td class=\\\"col-sm-2\\\">{{item.inputMap.date | date}}<br>by {{getEmployeeName(item.modifier_id)}}</td>\\r\\n                    <td class=\\\"col-sm-2\\\">\\r\\n                    \\t<ng-container *ngIf=\\\"item.process_number == 1 && userPermission.includes(1)\\\">\\r\\n                    \\t\\t<a routerLink=\\\"/work-order/{{item.id}}\\\">Edit</a> - <a (click)=\\\"onDownloadXls(item.id)\\\">XLS</a>\\r\\n                    \\t\\t<br><a routerLink=\\\"/view-irrigation-repair/4/{{item.inputMap.job_num}}\\\">View Repairs</a>\\r\\n                    \\t\\t<br><a (click)=\\\"onDownloadStockTransfer(item.inputMap.job_num)\\\">Stock Transfer <span class=\\\"glyphicon glyphicon-download-alt\\\"></span></a> \\r\\n                    \\t\\t<br><a *ngIf=\\\"!downloadingAll\\\" (click)=\\\"onDownloadAll(item.inputMap.job_num)\\\">Download All <span class=\\\"glyphicon glyphicon-download-alt\\\"></span></a>\\r\\n                    \\t\\t<span *ngIf=\\\"downloadingAll\\\">downloading...</span>\\r\\n                    \\t</ng-container>\\r\\n                    \\t<ng-container *ngIf=\\\"item.process_number == 2 && userPermission.includes(1)\\\">\\r\\n                    \\t\\t<a (click)=\\\"onRecall(item.id)\\\">Recall</a>\\r\\n                    \\t</ng-container>\\r\\n                    \\t<ng-container *ngIf=\\\"item.process_number == 2 && userPermission.includes(2)\\\">\\r\\n                    \\t\\t<a routerLink=\\\"/work-order/{{item.id}}\\\">View</a> - <a (click)=\\\"onDownloadXls(item.id)\\\">Download</a>\\r\\n                        \\t<br><a (click)=\\\"onClickForm(item.id)\\\" data-toggle=\\\"modal\\\" data-target=\\\"#approveIRF\\\">Review</a>\\r\\n                        </ng-container>\\r\\n                        <ng-container *ngIf=\\\"item.process_number == 3 && userPermission.includes(3)\\\">\\r\\n                        \\t<a (click)=\\\"onDownloadXls(item.id)\\\">Download</a>\\r\\n                        \\t<br><a routerLink=\\\"/work-order/{{item.id}}\\\">View & Delete</a>\\r\\n                        \\t<br><a routerLink=\\\"/view-irrigation-repair/4/{{item.inputMap.job_num}}\\\">View Repairs</a>\\r\\n                    \\t\\t<br><a (click)=\\\"onDownloadStockTransfer(item.inputMap.job_num)\\\">Stock Transfer <span class=\\\"glyphicon glyphicon-download-alt\\\"></span></a> \\r\\n                    \\t\\t<br><a routerLink=\\\"/view-purchase-order/1/{{item.inputMap.job_num}}\\\">View PO</a>\\r\\n                        </ng-container>\\r\\n                    </td>\\r\\n                </tr>\\r\\n\\t         </tbody>\\r\\n        </table>\\r\\n   \\t</div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { Form, User } from \"process-smart-ng6-lib\";\r\nimport { FormManagementService, DocumentConversionService, AuthenticationService } from \"process-smart-ng6-lib\";\r\nimport { SharedService } from \"src/app/_services/shared.service\";\r\nimport { saveAs } from 'file-saver';\r\nimport { CustomDownloadServiceService } from \"src/app/_services/custom-download-service.service\";\r\nimport { Router } from \"@angular/router\";\r\nimport { ActivatedRoute } from \"@angular/router\";\r\n\r\n@Component({\r\n  selector: 'app-view-work-order',\r\n  templateUrl: './view-work-order.component.html',\r\n  styleUrls: ['./view-work-order.component.css']\r\n})\r\nexport class ViewWorkOrderComponent implements OnInit {\r\n    itemsList: Array<Form>;\r\n    partialItemsList: Array<Form>;\r\n    usersList: Array<User>;\r\n    irfHeadersMap: any;\r\n    userPermission: Array<string>;  //Contains a list of process numbers this role is responsible for\r\n    typeId = '45';\r\n    processNum: string;\r\n    formProcessState: string;\r\n    uid: string;\r\n    roleId: string;\r\n    clientId: string;\r\n    stockTransferList: Array<Form>;\r\n    focusedId: string;\r\n    reject_reason: string;\r\n    sortAsc = true;\r\n    downloadingAll = false;\r\n    \r\n    constructor(private fms: FormManagementService, private adms: AuthenticationService,\r\n          private dcs: DocumentConversionService, private cds: CustomDownloadServiceService,\r\n          private router: Router, private ssv: SharedService, private route: ActivatedRoute) { }\r\n    \r\n    ngOnInit() {\r\n        this.route.params.subscribe(params => {\r\n            this.processNum = params['processNum'];\r\n            if(this.processNum == 'x'){\r\n                this.router.navigate(['/view-work-order']);\r\n                return;\r\n            }\r\n            \r\n            this.uid = JSON.parse(localStorage.getItem('currentUser')).user.uid;\r\n            this.roleId = JSON.parse(localStorage.getItem('currentUser')).user.role_id;\r\n            this.clientId = JSON.parse(localStorage.getItem('currentUser')).user.client_id;\r\n            \r\n            this.populateNames();\r\n            this.populatePermissions();\r\n            this.populateItems();\r\n            this.populateSTForms();\r\n            switch (this.processNum){\r\n            case '1': this.formProcessState = 'Draft'; break;\r\n            case '2': this.formProcessState = 'Waiting Management Approval'; break;\r\n            case '3': this.formProcessState = 'Ready for Billing'; break;\r\n            case '4': this.formProcessState = 'Pending Archival'; break;\r\n            default: this.formProcessState = 'All'; break;\r\n            }\r\n            \r\n            this.getIRFHeadersMap();\r\n        });\r\n    }\r\n    \r\n    populateItems() {\r\n        this.fms.getForms(this.typeId, 10000, 'DESC', 0)\r\n          .subscribe(itemsList => {\r\n              if(this.processNum){\r\n                  itemsList = itemsList.filter(x => x.process_number == this.processNum);\r\n              }\r\n              \r\n              //Exclude deleted forms\r\n              itemsList = itemsList.filter(x => x.is_deleted == '0');\r\n              \r\n              if(itemsList){\r\n                  this.itemsList = itemsList.sort((a, b) => {\r\n                      return (a.id < b.id ? 1 : a.id > b.id ? -1 : 0);\r\n                  });\r\n              }\r\n              this.partialItemsList = itemsList;\r\n          });\r\n    }\r\n    \r\n    \r\n    sortListByDate(){\r\n        if(this.partialItemsList){\r\n            this.sortAsc = !this.sortAsc;\r\n            if(this.sortAsc){\r\n                this.partialItemsList = this.partialItemsList.sort((a, b) => {\r\n                    return (a.inputMap.date < b.inputMap.date ? 1 : a.inputMap.date > b.inputMap.date ? -1 : 0);\r\n                });\r\n            } else {\r\n                this.partialItemsList = this.partialItemsList.sort((a, b) => {\r\n                    return (a.inputMap.date > b.inputMap.date ? 1 : a.inputMap.date < b.inputMap.date ? -1 : 0);\r\n                });\r\n            }\r\n        }\r\n    }\r\n    \r\n    populateNames() {\r\n      this.adms.getUsers()\r\n        .subscribe(usersList => this.usersList = usersList);\r\n    }\r\n    \r\n    populatePermissions() {\r\n        const role_id = JSON.parse(localStorage.getItem('currentUser')).user.role_id;\r\n        this.adms.getFormPermissions(role_id)\r\n          .subscribe(list => this.userPermission = list.map(x => x.process_num));\r\n      }\r\n    \r\n    getEmployeeName(uid: string) {\r\n        console.log('Getting employee '+uid);\r\n        if (uid == null || this.usersList == null) { return ''; }\r\n        const user = this.usersList.find(x => x.uid === uid);\r\n        return (user? user.name : '-');\r\n    }\r\n    \r\n    onDownloadPDF(id: string) {\r\n        this.cds.downloadWorkOrderPDF(id)\r\n            .subscribe(\r\n                res => {\r\n                    saveAs(res, 'WorkOrder.pdf', \r\n                        { type: 'application/pdf' })\r\n                },\r\n                error => {\r\n                    // Display error message\r\n                    this.ssv.showError('Error: Unable to download form!');\r\n                }\r\n            );\r\n      }\r\n    \r\n    onDownloadXls(id: string) {\r\n        this.cds.downloadWorkOrderXls(id)\r\n            .subscribe(\r\n                res => {\r\n                    saveAs(res, 'WorkOrder.xls', \r\n                        { type: 'application/vnd.ms-excel' })\r\n                },\r\n                error => {\r\n                    // Display error message\r\n                    this.ssv.showError('Error: Unable to download form!');\r\n                }\r\n            );\r\n      }\r\n    \r\n    \r\n    onDownloadAll(jobnum: string) {\r\n        this.downloadingAll = true;\r\n        this.cds.downloadAllWithJobnum_zip(jobnum)\r\n        .subscribe(\r\n            res => {\r\n                this.downloadingAll = false;\r\n                saveAs(res, 'forms'+jobnum+'.zip', \r\n                    { type: 'application/zip' });\r\n            },\r\n            error => {\r\n                this.downloadingAll = false;\r\n                // Display error message\r\n                console.log(error);\r\n                this.ssv.showError('Error: Unable to download forms!');\r\n            }\r\n        );\r\n      }\r\n    \r\n    deactivateAllFormWithJobnum(jobnum: string){\r\n        //Get IDs of all IRFs with this job number\r\n        this.cds.setActiveAllFormWithJobnum(jobnum, false)\r\n        .subscribe(data => {\r\n            console.log('Deleted All forms with job number '+jobnum);\r\n        },\r\n        error => {\r\n            console.log(error);\r\n        });\r\n    }\r\n    \r\n    onClickForm(id){\r\n        this.focusedId = id;\r\n    }\r\n    \r\n    /**\r\n     * Reject form and send it back to Customer Service for submission (process #1)\r\n     * @param id\r\n     */\r\n    onReject() {\r\n        let model: Form = this.itemsList.find(x => x.id == this.focusedId);\r\n    \r\n        //Change form state\r\n        this.onSubmit('1', this.focusedId, 'rejected');\r\n        \r\n      //Send email to Technician\r\n        const recipient = this.usersList.find(x => x.uid == model.filler_id);\r\n        \r\n        //TODO: Email sender\r\n      }\r\n    \r\n    onApprove(){\r\n        let model: Form = this.itemsList.find(x => x.id == this.focusedId);\r\n    \r\n        //Change form state\r\n        this.onSubmit('3', this.focusedId, 'approved');\r\n        \r\n        //Send email to Customer Service (role = 7)\r\n        const recipient = this.usersList.find(x => x.role_id == '7' && x.is_active == '1');\r\n        \r\n      //TODO: Email sender\r\n    }\r\n    \r\n    onSubmit(state, id, actionVerb) {\r\n        //Close all modals\r\n        document.getElementById('approveIRF').style.display = \"none\";\r\n        document.getElementById('deleteIRFModal').style.display = \"none\";\r\n        \r\n        //Update form\r\n        this.fms.setFormState(this.typeId, id, state)\r\n        .subscribe(\r\n            data => {\r\n                this.ssv.showSuccess('Form successfully '+actionVerb+'!');\r\n                this.router.navigate(['/view-work-order/'+state]);\r\n              },\r\n              error => {\r\n                  // Display error message\r\n                  this.ssv.showError('Error: Form failed to be '+actionVerb+'!');\r\n              }\r\n        );\r\n      }\r\n    \r\n    /**\r\n     * Recall form and make it available to edit (process #1)\r\n     * @param id\r\n     */\r\n    onRecall(id: string) {\r\n        this.fms.setFormState(this.typeId, id, '1')\r\n        .subscribe(\r\n            data => {\r\n                // Page redirect when getting response\r\n                this.ssv.showSuccess('Form successfully recalled!');\r\n                this.router.navigate(['/view-work-order']);\r\n            },\r\n            error => {\r\n                // Display error message\r\n                this.ssv.showError('Error: Unable to recall form!');\r\n            }\r\n        );\r\n    }\r\n    \r\n    \r\n    searchItem(input: string) {\r\n      if (this.partialItemsList && this.itemsList) {\r\n        this.partialItemsList = this.itemsList.filter(x => \r\n            ((x.inputMap.job_num && x.inputMap.job_num.toLowerCase().includes(input.toLowerCase()))) ||\r\n            (x.inputMap.project_name && x.inputMap.project_name.toLowerCase().includes(input.toLowerCase())));\r\n      }\r\n    }\r\n    \r\n    populateSTForms(){\r\n        this.fms.getForms('54', 10000, 'DESC', 0)\r\n        .subscribe(itemsList => {\r\n            this.stockTransferList = itemsList.filter(x => x);\r\n        });\r\n    }\r\n    \r\n    //Get ID of a stock transfer that has this job number\r\n    getStockTransferId(jobnum: string){\r\n        let st = this.stockTransferList.find(x => x.inputMap.job_num == jobnum);\r\n        if(st){\r\n            return st.id;\r\n        }\r\n    }\r\n    \r\n    onDownloadStockTransfer(jobnum: string){\r\n        let st = this.stockTransferList.find(x => x.inputMap.job_num == jobnum);\r\n        if(st){\r\n            //Download XLS\r\n            this.cds.downloadStockTransferXls(st.id)\r\n            .subscribe(\r\n                res => {\r\n                    saveAs(res, 'StockTransfer.xls', \r\n                        { type: 'application/vnd.ms-excel' })\r\n                },\r\n                error => {\r\n                    // Display error message\r\n                    this.ssv.showError('Error: Unable to download form!');\r\n                }\r\n            );\r\n        }\r\n    }\r\n    \r\n    getIRFHeadersMap(){\r\n        this.cds.getIRFHeaders('10000')\r\n        .subscribe(\r\n            data => {\r\n                this.irfHeadersMap = data;\r\n            }\r\n        );\r\n    }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2dlbmVyYWwvYXBwLXVwZGF0ZXMvYXBwLXVwZGF0ZXMuY29tcG9uZW50LmNzcyJ9 */\"","module.exports = \"<!-- This page fragment is to be included under AdminDashboard <body> tag -->\\r\\n\\r\\n<div class=\\\"row margin_addform\\\">\\r\\n    <div class=\\\"col-xs-12 col-md-10 col-md-offset-1 margin_addform\\\">\\r\\n    \\t<div class=\\\"row\\\">\\r\\n    \\t\\t<div class=\\\"col text-center\\\">\\r\\n    \\t\\t\\t<h2>App Updates</h2>\\r\\n    \\t\\t\\t<b><i>{{version}} ({{release_date}})</i></b>\\r\\n        \\t</div>\\r\\n        </div>\\r\\n    \\t<div class=\\\"row margin_top_15 text-center\\\">\\r\\n    \\t\\t<div class=\\\"col\\\">\\r\\n\\t        \\t<a target=\\\"_self\\\" href=\\\"{{downloadLink}}\\\" class=\\\"btn btn-lg btn-default\\\" download=\\\"NisshoApp.apk\\\">\\r\\n\\t        \\t\\t<b>Android <span class=\\\"glyphicon glyphicon-download-alt\\\"></span></b>\\r\\n\\t        \\t</a>\\r\\n        \\t</div>\\r\\n        </div>\\r\\n        <div class=\\\"row margin_top_15\\\">\\r\\n    \\t\\t<div class=\\\"text-left col-xs-12 col-md-8 col-md-offset-2\\\">\\r\\n    \\t\\t\\t<h4><u>To Update your app on your Android device:</u></h4>\\r\\n    \\t\\t\\t<ol>\\r\\n    \\t\\t\\t\\t<li>Tap on the <b>Android</b> button to download the App.</li>\\r\\n    \\t\\t\\t\\t<li>Open the downloaded file to run the update.</li>\\r\\n    \\t\\t\\t\\t<li>If prompted, allow your device to install from sources other than Play Store:\\r\\n    \\t\\t\\t\\t\\t<ol type=\\\"a\\\">\\r\\n    \\t\\t\\t\\t\\t\\t<li>Open tablet Settings > Lock Screen and Security</li>\\r\\n    \\t\\t\\t\\t\\t\\t<li>Under <i>Security</i>, switch on <i>Unknown sources</i></li>\\r\\n    \\t\\t\\t\\t\\t</ol>\\r\\n    \\t\\t\\t\\t</li>\\r\\n    \\t\\t\\t</ol>\\r\\n        \\t</div>\\r\\n        </div>\\r\\n   \\t</div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-app-updates',\r\n  templateUrl: './app-updates.component.html',\r\n  styleUrls: ['./app-updates.component.css']\r\n})\r\nexport class AppUpdatesComponent implements OnInit {\r\n\r\n    version: string;\r\n    release_date: string;\r\n    downloadLink: string;\r\n    \r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n      const roleId = JSON.parse(localStorage.getItem('currentUser')).user.role_id;\r\n      switch(roleId){\r\n      //Maintenance App(Tom and PMs)\r\n      case 2:\r\n      case 3: this.downloadLink = 'https://s3-us-west-1.amazonaws.com/process-smart-attachments/android_apk/1/NisshoMaintenance.apk';\r\n                this.version = 'v.3.2';\r\n                this.release_date = '07/10/2019';  \r\n      break;\r\n      //Irrigation App\r\n      case 4:\r\n      case 6: this.downloadLink = 'https://s3-us-west-1.amazonaws.com/process-smart-attachments/android_apk/1/NisshoIrrigation.apk';\r\n                this.version = 'v.3.0';  \r\n                this.release_date = '05/13/2019';  \r\n      break;\r\n      //Janitorial App\r\n      case 13: this.downloadLink = 'https://s3-us-west-1.amazonaws.com/process-smart-attachments/android_apk/1/NisshoJanitorial.apk';\r\n                 this.version = 'v.2.0';  \r\n                 this.release_date = '05/13/2019';  \r\n      break;\r\n      default: this.downloadLink = '';\r\n      }\r\n      \r\n  }\r\n\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2dlbmVyYWwvYnVnLXJlcG9ydC9idWctcmVwb3J0LmNvbXBvbmVudC5jc3MifQ== */\"","module.exports = \"<div class=\\\"row text-left margin_top_15\\\">\\r\\n   \\t<h2 class=\\\"text-center\\\">Bug/Error Report</h2>\\r\\n    <div class=\\\"col-xs-12 margin_top_15\\\">\\r\\n    \\t<form (ngSubmit)=\\\"onSubmit()\\\" #nisshoForm=\\\"ngForm\\\">\\r\\n            <div class=\\\"row form-group\\\">\\r\\n            \\t<div class=\\\"col-xs-8 col-xs-offset-2\\\">\\r\\n            \\t\\t<div class='text-left'>\\r\\n\\t            \\t\\t<label for=\\\"message\\\">Specify Details</label>\\r\\n\\t\\t\\t            <textarea required [(ngModel)]=\\\"bugDetails\\\" id=\\\"message\\\" name=\\\"message\\\" class=\\\"form-control\\\" placeholder=\\\"Specify bug/error encountered...\\\" rows=\\\"5\\\"></textarea> \\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t         \\t</div>\\r\\n            </div>\\r\\n            <div class=\\\"row form-group\\\">\\r\\n            \\t<div class=\\\"col-xs-12 text-center\\\">\\r\\n\\t                <button type=\\\"submit\\\" class=\\\"btn btn-success\\\" [disabled]=\\\"!nisshoForm.form.valid\\\"><b>Send</b></button>\\r\\n\\t            </div>\\r\\n            </div>\\r\\n    \\t</form>\\t\\r\\n   \\t</div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { EmailNotificationService, Email } from \"process-smart-ng6-lib\";\r\nimport { Router } from \"@angular/router\";\r\nimport { SharedService } from \"src/app/_services/shared.service\";\r\n\r\n@Component({\r\n  selector: 'app-bug-report',\r\n  templateUrl: './bug-report.component.html',\r\n  styleUrls: ['./bug-report.component.css']\r\n})\r\nexport class BugReportComponent implements OnInit {\r\n\r\n    bugDetails: string;\r\n    user: any;\r\n  constructor(private ems: EmailNotificationService, private ssv: SharedService,\r\n          private router: Router) { }\r\n\r\n  ngOnInit() {\r\n      this.user = JSON.parse(localStorage.getItem('currentUser')).user;\r\n  }\r\n\r\n  onSubmit(){\r\n    //Send Email\r\n      const recipientList = ['ttchan@personitech.com'];\r\n      const ccList = ['eangkasa@personitech.com'];\r\n      const bccList = [];\r\n      const subject = \"Nissho Bug Report\";\r\n      const content = \"I have encountered the following bug/error:<br><i>\"\r\n              + (!this.bugDetails ? \"Unspecified\" : this.bugDetails)\r\n              + \"</i><br><br><b>Sent by: </b>\" + this.user.name\r\n              + \"<br><b>Phone: </b>\" + this.user.phone\r\n              + \"<br><b>Email: </b>\" + this.user.email;\r\n      const email: Email = {'subject':subject,\r\n                              'body':content,\r\n                              'to': recipientList,\r\n                              'cc':ccList,\r\n                              'bcc':bccList};\r\n      this.ems.sendEmail(email)\r\n      .subscribe(data => {\r\n          this.router.navigate(['/']);\r\n          this.ssv.showSuccess('Bug Report successfully submitted!');\r\n      },\r\n      error => {\r\n          this.router.navigate(['/']);\r\n          this.ssv.showError('Failed to send bug report: Please re-login and try again');\r\n      });\r\n  }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2dlbmVyYWwvdXBkYXRlLWNvbnN0YW50cy91cGRhdGUtY29uc3RhbnRzLmNvbXBvbmVudC5jc3MifQ== */\"","module.exports = \"<div class=\\\"row text-left\\\">\\r\\n    <div class=\\\"col-xs-12 col-md-10 col-md-offset-1\\\">\\r\\n    \\t<form (ngSubmit)=\\\"onSubmit()\\\" #nisshoForm=\\\"ngForm\\\" *ngIf=\\\"constants\\\">\\r\\n   \\t\\t   \\t<div class=\\\"row\\\">\\r\\n\\t\\t    \\t<div class=\\\"col-xs-6 col-md-4 col-md-offset-4 text-left\\\">\\r\\n\\t\\t    \\t\\t<h2 class=\\\"text-center\\\">Pricing Rates</h2>\\r\\n\\t\\t  \\t\\t</div>\\r\\n\\t\\t    </div>\\r\\n           \\t\\t<div class=\\\"form-group row\\\" >\\r\\n\\t            \\t<div class=\\\"col-xs-6 col-md-4 col-md-offset-4 text-left\\\">\\r\\n\\t            \\t\\t<label for=\\\"tax_rate\\\">Tax Rate (%)</label>\\r\\n\\t\\t\\t            <input type=\\\"text\\\" class=\\\"form-control\\\" [(ngModel)]=\\\"constants.tax_rate\\\" placeholder=\\\"8.25\\\" id=\\\"tax_rate\\\" name=\\\"tax_rate\\\" required>\\r\\n\\t\\t         \\t</div>\\r\\n\\t            </div>\\r\\n           \\t\\t<div class=\\\"form-group row\\\">\\r\\n\\t            \\t<div class=\\\"col-xs-6 col-md-4 col-md-offset-4 text-left\\\">\\r\\n\\t            \\t<label for=\\\"markup\\\">Markup Value (%)</label>\\r\\n\\t\\t\\t            <input type=\\\"text\\\" class=\\\"form-control\\\" [(ngModel)]=\\\"constants.markup_rate\\\" placeholder=\\\"38.00\\\" id=\\\"markup\\\" name=\\\"markup\\\" required>\\r\\n\\t\\t         \\t</div>\\r\\n           \\t\\t</div>\\r\\n           \\t\\t<div class=\\\"form-group row\\\">\\r\\n\\t            \\t<div class=\\\"col-xs-6 col-md-4 col-md-offset-4 text-left\\\">\\r\\n\\t            \\t<label for=\\\"tech_rate\\\">Irrigation Tech Hourly Rate ($)</label>\\r\\n\\t\\t\\t            <input type=\\\"text\\\" class=\\\"form-control\\\" [(ngModel)]=\\\"constants.tech_rate\\\" placeholder=\\\"55.00\\\" id=\\\"tech_rate\\\" name=\\\"tech_rate\\\" required>\\r\\n\\t\\t         \\t</div>\\r\\n           \\t\\t</div>\\r\\n            <div class=\\\"form-group row\\\">\\r\\n            \\t<div class=\\\"text-center\\\">\\r\\n\\t                <button type=\\\"submit\\\" class=\\\"btn btn-success\\\"><b>Submit Changes</b></button>\\r\\n\\t            </div>\\r\\n            </div>\\r\\n    \\t</form>\\t\\r\\n   \\t</div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { AdministrationService } from \"process-smart-ng6-lib\";\r\nimport { SharedService } from \"src/app/_services/shared.service\";\r\nimport { Router } from \"@angular/router\";\r\n\r\n@Component({\r\n  selector: 'app-update-constants',\r\n  templateUrl: './update-constants.component.html',\r\n  styleUrls: ['./update-constants.component.css']\r\n})\r\nexport class UpdateConstantsComponent implements OnInit {\r\n\r\n    constants: any;\r\n    \r\n  constructor(private adms: AdministrationService, private ssv: SharedService,\r\n          private router: Router) { }\r\n\r\n  ngOnInit() {\r\n      this.populateConstants();\r\n  }\r\n\r\n  populateConstants(){\r\n      this.adms.getConstants()\r\n      .subscribe(constants => this.constants = constants);\r\n  }\r\n  \r\n  onSubmit(){\r\n      this.adms.updateConstants(this.constants)\r\n      .subscribe(\r\n          data => {\r\n              this.ssv.showSuccess('Pricing successfully updated!');\r\n              this.router.navigate(['/update-constants']);\r\n            },\r\n            error => {\r\n                // Display error message\r\n                this.ssv.showError('Unable to update pricing!');\r\n            }\r\n      );\r\n  }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2dlbmVyYWwvdmlldy1kYXRhLXVzYWdlL3ZpZXctZGF0YS11c2FnZS5jb21wb25lbnQuY3NzIn0= */\"","module.exports = \"<div class=\\\"row margin_addform text-center\\\">\\r\\n   \\t<h3 class=\\\"text-capitalize\\\" style=\\\"color: #323131;\\\">Nissho App Data Usage ({{curr_monthyear | date:'MMM y'}})</h3>\\r\\n   \\t\\r\\n\\t<div class=\\\"col-sm-10 col-sm-offset-1 table-responsive\\\">\\r\\n\\t\\t<div class=\\\"row margin_bottom_15\\\">\\r\\n\\t\\t\\t<div class=\\\"col-xs-6 text-right\\\">\\r\\n\\t\\t\\t\\t<a (click)=\\\"onDownloadXls(12)\\\" class='btn btn-info btn-sm'><b>Usage History</b> <span class='glyphicon glyphicon-download-alt'></span></a>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"col-xs-6 text-left\\\">\\r\\n\\t\\t\\t\\t<a (click)=\\\"onDownloadXls(3)\\\" class='btn btn-info btn-sm'><b>Past 3 Months</b> <span class='glyphicon glyphicon-download-alt'></span></a>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<i *ngIf=\\\"!itemsList\\\">\\r\\n\\t\\t\\tNo usage yet!\\r\\n        </i>\\r\\n        <table *ngIf=\\\"itemsList\\\" class=\\\"table table_view table-hover\\\">\\r\\n   \\t\\t\\t<thead>\\r\\n       \\t\\t\\t<tr class=\\\"table_heading\\\">\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-xs-3\\\">User</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-xs-3\\\">Role</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-xs-3\\\">Upload Size</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-xs-3\\\">Download Size</th>\\r\\n       \\t\\t\\t</tr>\\r\\n  \\t\\t\\t</thead>\\r\\n\\t\\t\\t<tbody>\\r\\n\\t            <tr *ngFor=\\\"let key of keyList\\\" class=\\\"table_body\\\">\\r\\n\\t               <td class=\\\"table_cell_wide col-xs-3\\\">{{getName(key)}}</td>\\r\\n\\t               <td class=\\\"table_cell_wide col-xs-3\\\">{{getRole(key)}}</td>\\r\\n\\t               <td class=\\\"table_cell_wide col-xs-3\\\">{{itemsList[key][0]/1000000.0 | number: '1.2'}} MB</td>\\r\\n\\t               <td class=\\\"table_cell_wide col-xs-3\\\">{{itemsList[key][1]/1000000.0 | number: '1.2'}} MB</td>\\r\\n\\t            </tr>\\r\\n\\t         </tbody>\\r\\n        </table>\\r\\n   \\t</div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { AdministrationService, AuthenticationService } from \"process-smart-ng6-lib\";\r\nimport { CustomDownloadServiceService } from \"src/app/_services/custom-download-service.service\";\r\nimport { saveAs } from 'file-saver';\r\nimport { SharedService } from \"src/app/_services/shared.service\";\r\n\r\n@Component({\r\n  selector: 'app-view-data-usage',\r\n  templateUrl: './view-data-usage.component.html',\r\n  styleUrls: ['./view-data-usage.component.css']\r\n})\r\nexport class ViewDataUsageComponent implements OnInit {\r\n\r\n    curr_monthyear: any;\r\n    keyList: Array<any>;\r\n    itemsList: Array<any>;\r\n    usersList: Array<any>;\r\n    rolesList: Array<any>;\r\n    \r\n  constructor(private cds: CustomDownloadServiceService, private adms: AdministrationService,\r\n          private ssv: SharedService, private aus: AuthenticationService) { }\r\n\r\n  ngOnInit() {\r\n      this.curr_monthyear = new Date();\r\n      this.populateUsage();\r\n      this.populateNames();\r\n      this.populateRoles();\r\n  }\r\n  \r\n  populateNames() {\r\n      this.aus.getUsers()\r\n        .subscribe(usersList => this.usersList = usersList);\r\n    }\r\n  \r\n  populateRoles() {\r\n      this.aus.getRoles()\r\n        .subscribe(rolesList => this.rolesList = rolesList);\r\n    }\r\n\r\n  populateUsage(){\r\n      this.adms.getDataUsage(1)\r\n          .subscribe(itemsList => {\r\n              let curStartOfMonth = this.ssv.toHtmlDate(null);\r\n              curStartOfMonth = curStartOfMonth.substring(0,curStartOfMonth.lastIndexOf('-'))+'-01';\r\n              this.keyList = Object.keys(itemsList[curStartOfMonth]);\r\n              this.itemsList = itemsList[curStartOfMonth];\r\n        },\r\n        error => {\r\n        });\r\n  }\r\n  \r\n  onDownloadXls(months) {\r\n      this.cds.downloadDataUsageXls(months)\r\n          .subscribe(\r\n              res => {\r\n                  saveAs(res, 'DataUsage.xls', \r\n                      { type: 'application/vnd.ms-excel' })\r\n              },\r\n              error => {\r\n                  // Display error message\r\n                  this.ssv.showError('Error: Unable to download data usage!');\r\n              }\r\n          );\r\n    }\r\n  \r\n  getName(id: string){\r\n      const user = this.usersList.find(x => x.uid == id);\r\n      if(user){\r\n          return user.name;\r\n      }\r\n      return '-';\r\n  }\r\n  \r\n  getRole(id: string){\r\n      const user = this.usersList.find(x => x.uid == id);\r\n      if(user){\r\n          const role = this.rolesList.find(x => x.id == user.role_id);\r\n          if(role){\r\n              return role.title;\r\n          }\r\n      }\r\n      return '-';\r\n  }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2ludmVudG9yeS9mb3JtLWNvbnRhaW5lcnMvZm9ybS1jb250YWluZXJzLmNvbXBvbmVudC5jc3MifQ== */\"","module.exports = \"<div class=\\\"row text-left\\\">\\r\\n    <div class=\\\"col-xs-12 col-sm-8 col-sm-offset-2\\\">\\r\\n   \\t\\t<div class=\\\"row\\\">\\r\\n        \\t<div class=\\\"col-xs-12 col-md-6 col-md-offset-3 text-center\\\">\\r\\n\\t            <h2 class=\\\"text-center\\\">Add New Truck</h2>\\r\\n         \\t</div>\\r\\n        </div>\\r\\n    \\t<form (ngSubmit)=\\\"onSubmit()\\\" #nisshoForm=\\\"ngForm\\\">\\r\\n    \\t\\t<div class=\\\"row form-group\\\">\\r\\n\\t        \\t<div class=\\\"col-xs-12 col-md-8 col-md-offset-2 text-left\\\">\\r\\n\\t\\t            <label for=\\\"name\\\">Truck Number</label>\\r\\n                    <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"2053\\\" id=\\\"name\\\" name=\\\"name\\\" required [(ngModel)]=\\\"model.name\\\">\\r\\n\\t         \\t</div>\\r\\n            </div>\\r\\n            <div class=\\\"row form-group\\\">\\r\\n\\t        \\t<div class=\\\"col-xs-12 col-md-8 col-md-offset-2 text-left\\\">\\r\\n\\t\\t            <label for=\\\"description\\\">Crew</label>\\r\\n                    <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"182\\\" id=\\\"description\\\" name=\\\"description\\\" required [(ngModel)]=\\\"model.description\\\">\\r\\n\\t         \\t</div>\\r\\n            </div>\\r\\n            <div class=\\\"row form-group\\\">\\r\\n    \\t\\t\\t<div class=\\\"col-xs-12 col-md-8 col-md-offset-2 text-left\\\">\\r\\n\\t\\t            <label for=\\\"supervisor_id\\\">Truck Supervisor</label>\\r\\n\\t         \\t\\t<select id=\\\"supervisor_id\\\" class=\\\"form-control\\\" [(ngModel)]=\\\"model.supervisor_id\\\" name=\\\"supervisor_id\\\" required>\\r\\n                    \\t<option selected disabled hidden [value]=\\\"0\\\">-- Select Supervisor --</option>\\r\\n                        <option *ngFor=\\\"let a of usersList\\\" [value]=\\\"a.uid\\\">{{a.name}}</option>\\r\\n                    </select>\\r\\n\\t         \\t</div>\\r\\n            </div>\\r\\n            <div class=\\\"row\\\">\\r\\n\\t        \\t<div class=\\\"col-xs-12 col-md-4 col-md-offset-4 text-center\\\">\\r\\n\\t\\t            <button type=\\\"submit\\\" class=\\\"btn btn-success\\\" [disabled]=\\\"!nisshoForm.form.valid\\\"><b>Submit</b></button>\\r\\n\\t         \\t</div>\\r\\n            </div>\\r\\n    \\t</form>\\t\\r\\n   \\t</div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { Container, InventoryManagementService, User, AuthenticationService } from \"process-smart-ng6-lib\";\r\nimport { ActivatedRoute } from \"@angular/router\";\r\nimport { SharedService } from \"src/app/_services/shared.service\";\r\nimport { Router } from \"@angular/router\";\r\n\r\n@Component({\r\n  selector: 'app-form-containers',\r\n  templateUrl: './form-containers.component.html',\r\n  styleUrls: ['./form-containers.component.css']\r\n})\r\nexport class FormContainersComponent implements OnInit {\r\n    model: Container;\r\n    deptId: string;\r\n    fillerUid: string;\r\n    truckId: string;\r\n    usersList: Array<User>;\r\n    \r\n    constructor(private ims: InventoryManagementService, private route: ActivatedRoute,\r\n            private router: Router, private ssv: SharedService, private adms: AuthenticationService) { }\r\n    \r\n    ngOnInit() {\r\n        this.fillerUid = JSON.parse(localStorage.getItem('currentUser')).user.uid;\r\n        \r\n        //Load or create new form\r\n        this.route.params.subscribe(params => {\r\n            this.deptId = params['deptId'];\r\n            this.truckId = params['id'];\r\n            \r\n            if(this.truckId){\r\n                //Load Truck detail\r\n                this.getModel();\r\n            }\r\n            else {\r\n                //Create a new form\r\n                this.model = <Container>{\r\n                    department_id: this.deptId,\r\n                    supervisor_id: '0'\r\n                };\r\n            }\r\n        });\r\n        \r\n        this.populateNames();\r\n    }\r\n    \r\n    populateNames() {\r\n        this.adms.getUsers()\r\n          .subscribe(usersList => {\r\n              if(this.deptId == '1'){\r\n                  usersList = usersList.filter(x => x.role_id == '4' || x.role_id == '6');\r\n              }\r\n              else if(this.deptId == '6'){\r\n                  usersList = usersList.filter(x => x.role_id == '13');\r\n              }\r\n              this.usersList = usersList;\r\n          });\r\n      }\r\n    \r\n    onSubmit() {\r\n      //Update DB if exists, or create a new one otherwise\r\n        if(this.truckId){\r\n            this.ims.updateContainer(this.model, this.deptId, this.truckId)\r\n            .subscribe(\r\n            data => {\r\n                this.ssv.showSuccess('Truck successfully updated!');\r\n                  this.router.navigate(['/form-containers/' + this.deptId + '/' +this.truckId]);\r\n              },\r\n              error => {\r\n                  // Display error message\r\n                  this.ssv.showError('Unable to add new Truck!');\r\n                  console.log(error);\r\n              }\r\n        );\r\n        }\r\n        else{\r\n            this.ims.newContainer(this.model, this.deptId)\r\n                .subscribe(\r\n                data => {\r\n                      // Page redirect when getting response\r\n                    this.ssv.showSuccess('Truck successfully added!');\r\n                      this.router.navigate(['/view-containers/' + this.deptId]);\r\n                  },\r\n                  error => {\r\n                      // Display error message\r\n                      this.ssv.showError('Unable to add new Truck!');\r\n                      console.log(error);\r\n                  }\r\n            );\r\n        }\r\n    }\r\n    \r\n    getModel(){\r\n        this.ims.getContainer(this.deptId, this.truckId)\r\n        .subscribe(model => this.model = model);\r\n    }\r\n    \r\n    get diagnostic() { return JSON.stringify(this.model); }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2ludmVudG9yeS9mb3JtLW1hdGVyaWFscy9mb3JtLW1hdGVyaWFscy5jb21wb25lbnQuY3NzIn0= */\"","module.exports = \"<div class=\\\"row\\\">\\r\\n\\t<div class=\\\"col col-sm-offset-1 text-left\\\">\\r\\n\\t\\t<h3><a routerLink=\\\"/view-materials/{{deptId}}\\\" class=\\\"back_btn\\\"><span class=\\\"glyphicon glyphicon-chevron-left\\\"></span>Back</a></h3>\\r\\n\\t</div>\\r\\n</div>\\r\\n<div class=\\\"row text-left\\\">\\r\\n    <div class=\\\"col-xs-12 col-sm-10 col-sm-offset-1\\\">\\r\\n   \\t\\t<div class=\\\"row\\\">\\r\\n        \\t<div class=\\\"col-xs-12 col-md-6 col-md-offset-3 text-center\\\">\\r\\n\\t            <h2 class=\\\"text-center\\\" *ngIf=\\\"!materialId\\\">Add New Material</h2>\\r\\n\\t            <h2 class=\\\"text-center\\\" *ngIf=\\\"materialId\\\">Update Material</h2>\\r\\n         \\t</div>\\r\\n        </div>\\r\\n    \\t<form (ngSubmit)=\\\"onSubmit()\\\" #nisshoForm=\\\"ngForm\\\">\\r\\n    \\t\\t<div class=\\\"row form-group\\\">\\r\\n\\t        \\t<div class=\\\"col-xs-12 col-md-8 col-md-offset-2 text-left\\\">\\r\\n\\t\\t            <label for=\\\"description\\\">Material Name</label>\\r\\n                    <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"R/B 4x30 Side Strip nozzle\\\" id=\\\"description\\\" name=\\\"description\\\" required [(ngModel)]=\\\"model.description\\\">\\r\\n\\t         \\t</div>\\r\\n            </div>\\r\\n            <div class=\\\"row form-group\\\">\\r\\n\\t        \\t<div class=\\\"col-xs-12 col-md-4 col-md-offset-2 text-left\\\">\\r\\n\\t\\t            <label for=\\\"part_num\\\">Vendor Part #</label>\\r\\n                    <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"15SST\\\" id=\\\"part_num\\\" name=\\\"part_num\\\" required [(ngModel)]=\\\"model.part_num\\\">\\r\\n\\t         \\t</div>\\r\\n\\t         \\t<div class=\\\"col-xs-12 col-md-4 text-left\\\">\\r\\n\\t\\t            <label for=\\\"price\\\">Price</label>\\r\\n\\t\\t            <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"price\\\" name=\\\"price\\\" [(ngModel)]=\\\"model.price\\\" required>\\r\\n\\t         \\t</div>\\r\\n            </div>\\r\\n            <div class=\\\"row form-group\\\">\\r\\n    \\t\\t\\t<div class=\\\"col-xs-12 col-md-4 col-md-offset-2 text-left\\\">\\r\\n\\t\\t            <label for=\\\"unit\\\">Unit</label>\\r\\n\\t\\t            <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"ea\\\" id=\\\"unit\\\" name=\\\"unit\\\" [(ngModel)]=\\\"model.unit\\\">\\r\\n\\t         \\t</div>\\r\\n\\t        \\t<div class=\\\"col-xs-12 col-md-4 text-left\\\">\\r\\n\\t\\t            <label for=\\\"default_max_qty\\\">Max Qty</label>\\r\\n\\t\\t            <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"30\\\" id=\\\"default_max_qty\\\" name=\\\"default_max_qty\\\" [(ngModel)]=\\\"model.default_max_qty\\\">\\r\\n\\t         \\t</div>\\r\\n            </div>\\r\\n            <div class=\\\"row\\\">\\r\\n\\t        \\t<div class=\\\"col-xs-12 col-md-4 col-md-offset-4 text-center\\\">\\r\\n\\t\\t            <button type=\\\"submit\\\" class=\\\"btn btn-success\\\" [disabled]=\\\"!nisshoForm.form.valid\\\"><b>Submit</b></button>\\r\\n\\t         \\t</div>\\r\\n            </div>\\r\\n    \\t</form>\\t\\r\\n   \\t</div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { Material, InventoryManagementService } from \"process-smart-ng6-lib\";\r\nimport { Router, ActivatedRoute } from \"@angular/router\";\r\nimport { SharedService } from \"src/app/_services/shared.service\";\r\n\r\n@Component({\r\n  selector: 'app-form-materials',\r\n  templateUrl: './form-materials.component.html',\r\n  styleUrls: ['./form-materials.component.css']\r\n})\r\nexport class FormMaterialsComponent implements OnInit {\r\n    model: Material;\r\n    deptId: string;\r\n    fillerUid: string;\r\n    materialId: string;\r\n\r\n    constructor(private ims: InventoryManagementService, private route: ActivatedRoute,\r\n            private router: Router, private ssv: SharedService) { }\r\n    \r\n    ngOnInit() {\r\n        this.fillerUid = JSON.parse(localStorage.getItem('currentUser')).user.uid;\r\n        \r\n        //Load or create new form\r\n        this.route.params.subscribe(params => {\r\n            this.deptId = params['deptId'];\r\n            this.materialId = params['id'];\r\n            \r\n            if(this.materialId){\r\n                //Load Material detail\r\n                this.getModel();\r\n            }\r\n            else {\r\n                //Create a new form\r\n                this.model = <Material>{\r\n                    department_id: this.deptId,\r\n                    package_qty: '0',\r\n                    package_unit: 'ea'\r\n                };\r\n            }\r\n        });\r\n    }\r\n    \r\n    onSubmit() {\r\n      //Update DB if exists, or create a new one otherwise\r\n        if(this.materialId){\r\n            this.ims.updateMaterial(this.model, this.deptId, this.materialId)\r\n            .subscribe(\r\n            data => {\r\n                this.ssv.showSuccess('Material successfully updated!');\r\n                  this.router.navigate(['/form-materials/' + this.deptId + '/' +this.materialId]);\r\n              },\r\n              error => {\r\n                  // Display error message\r\n                  this.ssv.showError('Unable to add new material!');\r\n                  console.log(error);\r\n              }\r\n        );\r\n        }\r\n        else{\r\n            this.ims.newMaterial(this.model, this.deptId)\r\n                .subscribe(\r\n                data => {\r\n                      // Page redirect when getting response\r\n                    this.ssv.showSuccess('Material successfully added!');\r\n                      this.router.navigate(['/view-materials/' + this.deptId]);\r\n                  },\r\n                  error => {\r\n                      // Display error message\r\n                      this.ssv.showError('Unable to add new material!');\r\n                      console.log(error);\r\n                  }\r\n            );\r\n        }\r\n    }\r\n    \r\n    getModel(){\r\n        this.ims.getMaterial(this.deptId, this.materialId)\r\n        .subscribe(model => this.model = model);\r\n    }\r\n    \r\n    get diagnostic() { return JSON.stringify(this.model); }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2ludmVudG9yeS9mb3JtLXRydWNrLWludmVudG9yeS9mb3JtLXRydWNrLWludmVudG9yeS5jb21wb25lbnQuY3NzIn0= */\"","module.exports = \"<p>\\r\\n  form-truck-inventory works!\\r\\n</p>\\r\\n\"","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-form-truck-inventory',\r\n  templateUrl: './form-truck-inventory.component.html',\r\n  styleUrls: ['./form-truck-inventory.component.css']\r\n})\r\nexport class FormTruckInventoryComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2ludmVudG9yeS92aWV3LWNvbnRhaW5lcnMvdmlldy1jb250YWluZXJzLmNvbXBvbmVudC5jc3MifQ== */\"","module.exports = \"<div class=\\\"row margin_top_15 text-center\\\">\\r\\n   \\t<h3 class=\\\"text-capitalize\\\">Trucks</h3>\\r\\n   \\t<div class=\\\"col-sm-12 text-center\\\">\\r\\n\\t\\t<button type=\\\"button\\\" class=\\\"btn btn-success btn-sm button\\\" routerLink=\\\"/form-containers/{{deptId}}\\\">\\r\\n\\t\\t\\t<span class=\\\"glyphicon glyphicon-plus\\\"></span> New Truck\\r\\n\\t\\t</button>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"col-sm-10 col-sm-offset-1 col-xs-12 margin_top_15 table-responsive\\\">\\r\\n        <div class=\\\"row margin_bottom_15\\\">\\r\\n\\t\\t\\t<div class=\\\"col-sm-4 text-left input-group\\\">\\r\\n\\t               <div class=\\\"input-group-addon\\\"><span class=\\\"glyphicon glyphicon-search\\\"></span></div>\\r\\n\\t               <input type=\\\"text\\\" id=\\\"filterForm\\\" class=\\\"form-control\\\" placeholder=\\\"Search Truck...\\\" (input)=\\\"searchItem($event.target.value)\\\">\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<i *ngIf=\\\"!partialItemsList\\\">\\r\\n\\t\\t\\tNo items here!\\r\\n        </i>\\r\\n        <table *ngIf=\\\"partialItemsList\\\" class=\\\"table table_view table-hover\\\">\\r\\n   \\t\\t\\t<thead>\\r\\n       \\t\\t\\t<tr class=\\\"table_heading\\\">\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-3\\\">Crew</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-3\\\">Truck #</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-3\\\" *ngIf=\\\"deptId == '1'\\\">Technician</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-3\\\" *ngIf=\\\"deptId == '6'\\\">Porter</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-3\\\">Details</th>\\r\\n       \\t\\t\\t</tr>\\r\\n  \\t\\t\\t</thead>\\r\\n\\t\\t\\t<tbody>\\r\\n                <tr *ngFor=\\\"let item of partialItemsList\\\" class=\\\"table_body\\\">\\r\\n                    <td class=\\\"col-sm-3\\\">{{item.description}}</td>\\r\\n                    <td class=\\\"col-sm-3\\\"><b>{{item.name}}</b></td>\\r\\n                    <td class=\\\"col-sm-3\\\">{{getEmployeeName(item.supervisor_id)}}</td>\\r\\n                    <td class=\\\"col-sm-3\\\">\\r\\n                        <a routerLink=\\\"/form-containers/{{deptId}}/{{item.id}}\\\">Edit Truck</a>\\r\\n                        <br><a routerLink=\\\"/view-truck-inventory/{{item.id}}\\\">View Inventory</a>\\r\\n                    </td>\\r\\n                </tr>\\r\\n\\t         </tbody>\\r\\n        </table>\\r\\n   \\t</div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { Container, User } from \"process-smart-ng6-lib\";\r\nimport { InventoryManagementService, DocumentConversionService, AuthenticationService } from \"process-smart-ng6-lib\";\r\nimport { SharedService } from \"src/app/_services/shared.service\";\r\nimport { saveAs } from 'file-saver';\r\nimport { ActivatedRoute } from \"@angular/router\";\r\n\r\n@Component({\r\n  selector: 'app-view-containers',\r\n  templateUrl: './view-containers.component.html',\r\n  styleUrls: ['./view-containers.component.css']\r\n})\r\nexport class ViewContainersComponent implements OnInit {\r\n    itemsList: Array<Container>;\r\n    partialItemsList: Array<Container>;\r\n    usersList: Array<User>;\r\n    deptId: string;\r\n    constructor(private ims: InventoryManagementService, private adms: AuthenticationService,\r\n          private dcs: DocumentConversionService, private ssv: SharedService,\r\n          private route: ActivatedRoute) { }\r\n    \r\n    ngOnInit() {\r\n        this.route.params.subscribe(params => {\r\n            this.deptId = params['id'];\r\n            if(this.deptId){\r\n                this.populateItems();\r\n                this.populateNames();\r\n            }\r\n        });\r\n    }\r\n    \r\n    populateItems() {\r\n    this.ims.getContainers(this.deptId)\r\n      .subscribe(itemsList => {\r\n          this.itemsList = itemsList;\r\n          this.partialItemsList = itemsList;\r\n      });\r\n    }\r\n    \r\n    populateNames() {\r\n        this.adms.getUsers()\r\n          .subscribe(usersList => this.usersList = usersList);\r\n      }\r\n      \r\n      getEmployeeName(uid: string) {\r\n          if (uid == null || this.usersList == null) { return ''; }\r\n          const user = this.usersList.find(x => x.uid === uid);\r\n          return (user? user.name : '-');\r\n      }\r\n    \r\n    onDownload(id: number) {\r\n    }\r\n    \r\n    searchItem(input: string) {\r\n      if (this.partialItemsList && this.itemsList) {\r\n        this.partialItemsList = this.itemsList.filter(x => \r\n            (x.name.toLowerCase().includes(input.toLowerCase())) ||\r\n            (x.description.toLowerCase().includes(input.toLowerCase())));\r\n      }\r\n    }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2ludmVudG9yeS92aWV3LW1hdGVyaWFscy92aWV3LW1hdGVyaWFscy5jb21wb25lbnQuY3NzIn0= */\"","module.exports = \"<div class=\\\"row margin_top_15 text-center\\\">\\r\\n   \\t<h3 class=\\\"text-capitalize\\\">Materials</h3>\\r\\n   \\t<div class=\\\"col-sm-6 text-right\\\">\\r\\n\\t\\t<button type=\\\"button\\\" class=\\\"btn btn-success btn-sm button\\\" routerLink=\\\"/form-materials/{{deptId}}\\\">\\r\\n\\t\\t\\t<span class=\\\"glyphicon glyphicon-plus\\\"></span> New Material\\r\\n\\t\\t</button>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"col-sm-6 text-left\\\">\\r\\n\\t\\t<button type=\\\"button\\\" *ngIf=\\\"!is_downloading_list\\\" class=\\\"btn btn-info btn-sm button\\\" (click)=\\\"downloadAll()\\\">Download All</button>\\r\\n\\t\\t<span *ngIf=\\\"is_downloading_list\\\" class=\\\"loader\\\"></span>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"col-sm-10 col-sm-offset-1 col-xs-12 margin_top_15 table-responsive\\\">\\r\\n        <div class=\\\"row margin_bottom_15\\\">\\r\\n\\t\\t\\t<div class=\\\"col-sm-4 text-left input-group\\\">\\r\\n\\t               <div class=\\\"input-group-addon\\\"><span class=\\\"glyphicon glyphicon-search\\\"></span></div>\\r\\n\\t               <input type=\\\"text\\\" id=\\\"filterForm\\\" class=\\\"form-control\\\" placeholder=\\\"Search Material...\\\" (input)=\\\"searchItem($event.target.value)\\\">\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<i *ngIf=\\\"!partialItemsList\\\">\\r\\n\\t\\t\\tNo items here!\\r\\n        </i>\\r\\n        <table *ngIf=\\\"partialItemsList\\\" class=\\\"table table_view table-hover\\\">\\r\\n   \\t\\t\\t<thead>\\r\\n       \\t\\t\\t<tr class=\\\"table_heading\\\">\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Part #</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-4\\\">Description</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Price</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Unit</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Actions</th>\\r\\n       \\t\\t\\t</tr>\\r\\n  \\t\\t\\t</thead>\\r\\n\\t\\t\\t<tbody>\\r\\n                <tr *ngFor=\\\"let item of partialItemsList\\\" class=\\\"table_body\\\">\\r\\n                    <td class=\\\"col-sm-2\\\">{{item.part_num}}</td>\\r\\n                    <td class=\\\"col-sm-4\\\"><b>{{item.description}}</b></td>\\r\\n                    <td class=\\\"col-sm-2\\\">{{item.price | currency}}</td>\\r\\n                    <td class=\\\"col-sm-2\\\">{{item.unit}}</td>\\r\\n                    <td class=\\\"col-sm-2\\\">\\r\\n                        <a routerLink=\\\"/form-materials/{{deptId}}/{{item.id}}\\\">Edit</a>\\r\\n                    </td>\\r\\n                </tr>\\r\\n\\t         </tbody>\\r\\n        </table>\\r\\n   \\t</div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { Material, User } from \"process-smart-ng6-lib\";\r\nimport { InventoryManagementService, DocumentConversionService, AuthenticationService } from \"process-smart-ng6-lib\";\r\nimport { SharedService } from \"src/app/_services/shared.service\";\r\nimport { CustomDownloadServiceService } from \"src/app/_services/custom-download-service.service\";\r\nimport { saveAs } from 'file-saver';\r\nimport { ActivatedRoute } from \"@angular/router\";\r\n\r\n@Component({\r\n  selector: 'app-view-materials',\r\n  templateUrl: './view-materials.component.html',\r\n  styleUrls: ['./view-materials.component.css']\r\n})\r\nexport class ViewMaterialsComponent implements OnInit {\r\n    itemsList: Array<Material>;\r\n    partialItemsList: Array<Material>;\r\n    usersList: Array<User>;\r\n    deptId: string;\r\n    is_downloading_list: boolean;\r\n    constructor(private ims: InventoryManagementService, private adms: AuthenticationService,\r\n          private dcs: DocumentConversionService, private ssv: SharedService,\r\n          private route: ActivatedRoute, private cds: CustomDownloadServiceService) { }\r\n    \r\n    ngOnInit() {\r\n        this.route.params.subscribe(params => {\r\n            this.deptId = params['id'];\r\n            if(this.deptId){\r\n                this.populateItems();\r\n            }\r\n        });\r\n        this.is_downloading_list = false;\r\n    }\r\n    \r\n    populateItems() {\r\n    this.ims.getMaterials(this.deptId)\r\n      .subscribe(itemsList => {\r\n          this.itemsList = itemsList;\r\n          this.partialItemsList = itemsList;\r\n      });\r\n    }\r\n    \r\n    downloadAll(){\r\n        this.is_downloading_list = true;\r\n        this.cds.downloadMaterialsListXls(this.deptId)\r\n        .subscribe(\r\n            res => {\r\n                saveAs( res, 'InventoryList.xls', \r\n                    { type: 'application/vnd.ms-excel' });\r\n                this.is_downloading_list = false;\r\n            },\r\n            error => {\r\n                // Display error message\r\n                console.log(error);\r\n                this.ssv.showError('Error: Unable to download list!');\r\n                this.is_downloading_list = false;\r\n            }\r\n        );\r\n    }\r\n    \r\n    searchItem(input: string) {\r\n      if (this.partialItemsList && this.itemsList) {\r\n        this.partialItemsList = this.itemsList.filter(x => \r\n            (x.description.toLowerCase().includes(input.toLowerCase())));\r\n      }\r\n    }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2ludmVudG9yeS92aWV3LXRydWNrLWludmVudG9yeS92aWV3LXRydWNrLWludmVudG9yeS5jb21wb25lbnQuY3NzIn0= */\"","module.exports = \"\"","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-view-truck-inventory',\r\n  templateUrl: './view-truck-inventory.component.html',\r\n  styleUrls: ['./view-truck-inventory.component.css']\r\n})\r\nexport class ViewTruckInventoryComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","export * from './login.component';\r\n","module.exports = \"<div class=\\\"login_page vertical-center\\\">\\r\\n    <div class=\\\"container-fluid\\\">\\r\\n        <div class=\\\"row\\\">\\r\\n            <div class=\\\"col-sm-12 col-xs-12 login_form\\\">\\r\\n            <FORM [formGroup]=\\\"loginForm\\\">\\r\\n                <div class=\\\"row\\\">\\r\\n                    <div class=\\\"col-sm-12 col-xs-12 padded-sm\\\">\\r\\n                        <h2>\\r\\n                            <img src=\\\"./assets/images/nissho_logo_round.png\\\" class=\\\"nissho_logo\\\">\\r\\n                            <span class=\\\"form_title\\\">Login</span>\\r\\n                        </h2>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"form-group\\\">\\r\\n                        <div class=\\\"row\\\">\\r\\n                            <div class=\\\"col-sm-12 col-xs-12\\\">\\r\\n                                <label for=\\\"uname_login\\\">Username</label>\\r\\n                                <input type=\\\"text\\\" formControlName=\\\"uname_login\\\" class=\\\"form-control\\\" [ngClass]=\\\"{ 'is-invalid': submitted && f.uname_login.errors }\\\" />\\r\\n                                <div *ngIf=\\\"submitted && f.uname_login.errors\\\" class=\\\"invalid-feedback\\\">\\r\\n                                    <div *ngIf=\\\"f.uname_login.errors.required\\\" class=\\\"error_msg\\\">Username is required</div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                        <div class=\\\"row\\\">\\r\\n                            <div class=\\\"col-sm-12 col-xs-12\\\">\\r\\n                                <label for=\\\"pass_login\\\">Password</label>\\r\\n                                <input type=\\\"password\\\" formControlName=\\\"pass_login\\\" class=\\\"form-control\\\" [ngClass]=\\\"{ 'is-invalid': submitted && f.pass_login.errors }\\\" />\\r\\n                                <div *ngIf=\\\"submitted && f.pass_login.errors\\\" class=\\\"invalid-feedback\\\">\\r\\n                                    <div *ngIf=\\\"f.pass_login.errors.required\\\" class=\\\"error_msg\\\">Password is required</div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                </div>\\r\\n                <div class=\\\"error_msg\\\" *ngIf=\\\"error !== ''\\\">{{error}}</div>\\r\\n                <div class=\\\"text-center margin_bottom_15\\\">\\r\\n                    <button [disabled]=\\\"loading\\\" class=\\\"btn btn-lg fill\\\" id=\\\"login_button\\\" (click)=\\\"onLoginClick()\\\">Login</button>\\r\\n                    <img *ngIf=\\\"loading\\\" src=\\\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\\\" />\\r\\n                </div>\\r\\n            </FORM>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { first } from 'rxjs/operators';\r\nimport { environment } from '../../environments/environment';\r\n\r\nimport { AuthenticationService } from '../_services';\r\nimport { SharedService } from \"src/app/_services/shared.service\";\r\nimport { CookieService } from \"ngx-cookie-service\";\r\n\r\n@Component({templateUrl: 'login.component.html'})\r\nexport class LoginComponent implements OnInit {\r\n    loginForm: FormGroup;\r\n    loading = false;\r\n    submitted = false;\r\n    returnUrl: string;\r\n    error = '';\r\n    recaptchaStr = '';\r\n    \r\n    constructor(\r\n        private formBuilder: FormBuilder,\r\n        private route: ActivatedRoute,\r\n        private router: Router,\r\n        private ssv: SharedService,\r\n        private authenticationService: AuthenticationService,\r\n        private coos: CookieService) {}\r\n\r\n    ngOnInit() {\r\n        this.loginForm = this.formBuilder.group({\r\n            uname_login: ['', Validators.required],\r\n            pass_login: ['', Validators.required]\r\n        });\r\n\r\n        // reset login status\r\n        this.ssv.sharedNode.error = '';\r\n        this.ssv.sharedNode.success = '';\r\n        this.authenticationService.logout();\r\n\r\n        // get return url from route parameters or default to '/'\r\n        this.returnUrl = this.route.snapshot.queryParams['returnUrl'] || '/';\r\n    }\r\n\r\n    // convenience getter for easy access to form fields\r\n    get f() { return this.loginForm.controls; }\r\n\r\n    onSubmit() {\r\n        this.submitted = true;\r\n        // stop here if form is invalid\r\n        if (this.loginForm.invalid) {\r\n            return;\r\n        }\r\n\r\n        this.loading = true;\r\n        this.authenticationService.login(this.f.uname_login.value, this.f.pass_login.value)\r\n            .pipe(first())\r\n            .subscribe(\r\n                data => {\r\n                    if(data === null){\r\n                        this.error = 'Invalid Username or Password!';\r\n                        this.loading = false;\r\n                    }\r\n                    else{\r\n                        if(data.user.is_active == 1){\r\n                            //Make sure current user is set\r\n                            if (data && data.apiKey) {\r\n                                // store user details and jwt token in local storage to keep user logged in between page refreshes\r\n                                localStorage.setItem('currentUser', JSON.stringify(data));\r\n                            }\r\n                            \r\n                            //Save apiKey in cookie\r\n                            this.coos.set('NisshoApiKey', data.apiKey, null, '/');\r\n                            this.loading = false;\r\n                            this.router.navigate([this.returnUrl]);\r\n                        }\r\n                        else{\r\n                            this.authenticationService.logout();\r\n                            this.error = 'Invalid Username or Password!';\r\n                            this.loading = false;\r\n                        }\r\n                    }\r\n                },\r\n                error => {\r\n                    this.error = 'Invalid Username or Password!';\r\n                    this.loading = false;\r\n                });\r\n    }\r\n    \r\n    onLoginClick(): void {\r\n//        if(environment.production === true){\r\n//            if (this.recaptchaStr) {\r\n//                captchaRef.reset();\r\n//            }\r\n//            captchaRef.execute();\r\n//        }\r\n//        else{\r\n//            this.onSubmit();\r\n//        }\r\n        this.onSubmit();\r\n    }\r\n \r\n    public resolved(captchaResponse: string): void {\r\n        this.recaptchaStr = captchaResponse;\r\n        if (this.recaptchaStr) {\r\n            this.onSubmit();\r\n        }\r\n    }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BvcHVsYXRlL3VwZGF0ZS1jdXN0b21lcnMtbGlzdC91cGRhdGUtY3VzdG9tZXJzLWxpc3QuY29tcG9uZW50LmNzcyJ9 */\"","module.exports = \"<div>\\r\\n  <label>Browse file:</label>\\r\\n  <input type='file' (change)=\\\"fileChanged($event)\\\">\\r\\n  <button type=\\\"button\\\" (click)=\\\"populateCustomersList()\\\">Populate</button>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { AdministrationService, Customer } from \"process-smart-ng6-lib\";\r\n\r\n@Component({\r\n  selector: 'app-update-customers-list',\r\n  templateUrl: './update-customers-list.component.html',\r\n  styleUrls: ['./update-customers-list.component.css']\r\n})\r\nexport class UpdateCustomersListComponent implements OnInit {\r\n    file:any;\r\n    customersDict: any;\r\n    customersDictKeys: Array<string>;\r\n    parsedCustomersList: Array<Customer>;\r\n\r\n  constructor(private adms: AdministrationService) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  fileChanged(e) {\r\n      this.file = e.target.files[0];\r\n  }\r\n  \r\n  populateCustomersList() {\r\n      /*let fileReader = new FileReader();\r\n      fileReader.onload = (e) => {\r\n          //Skip the first line\r\n          \r\n          //Parse the result (in Customer array)\r\n          const cArr = fileReader.result.split(/\\r?\\n/);\r\n          cArr.forEach(crow => {\r\n              const c = crow.split(',');\r\n              if(c){\r\n                  let deptId = '2';\r\n                  if(c[1] && c[1].toLowerCase().includes('janitorial')){\r\n                      deptId = '6';\r\n                  }\r\n                  const customer = <Customer> {\r\n                          client_id: '1',\r\n                          project_name: c[1] ? c[1].trim() : '',\r\n                          jobnum: c[0] ? c[0].trim() : '',\r\n                          contract_amt: '0',\r\n                          address: c[2] ? c[2].trim() : '',\r\n                          city: c[3] ? c[3].trim() : '',\r\n                          management: c[4] ? c[4].trim() : '',\r\n                          contact: c[5] ? c[5].trim() : '',\r\n                          phone: c[6] ? c[6].trim() : '',\r\n                          email: c[11] ? c[11].trim() : '',\r\n                          department_id: deptId\r\n                  }\r\n                  \r\n                  //Send request to server\r\n                  this.adms.newCustomer(customer)\r\n                      .subscribe(data => {\r\n                          console.log('created');\r\n                      },\r\n                      error => {\r\n                          console.log('error for '+c[0]+ ' - ' + c[1]);\r\n                      })\r\n              }\r\n          })\r\n          \r\n      }\r\n      fileReader.readAsText(this.file);*/\r\n  }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3ZpZXctc3RvY2stYnktdHJ1Y2svdmlldy1zdG9jay1ieS10cnVjay5jb21wb25lbnQuY3NzIn0= */\"","module.exports = \"<div class=\\\"row margin_addform text-center\\\">\\r\\n   \\t<h3 class=\\\"text-capitalize\\\">Material Usage</h3>\\r\\n\\t<div class=\\\"col-xs-12 col-md-10 col-md-offset-1\\\">\\r\\n\\t\\t<div class=\\\"row text-center\\\">\\r\\n        \\t<div class=\\\"col-xs-12\\\">\\r\\n        \\t\\t<form class=\\\"form-inline\\\" (ngSubmit)=\\\"populateItems()\\\" #stockForm=\\\"ngForm\\\">\\r\\n                    <div class=\\\"form-group margin_right_15\\\">\\r\\n                        <div class=\\\"input-group\\\">\\r\\n                            <div class=\\\"input-group-addon\\\">Truck:</div>\\r\\n\\t\\t\\t\\t            <select class=\\\"form-control\\\" name=\\\"chosenSupervisorId\\\" [(ngModel)]=\\\"chosenSupervisorId\\\" required>\\r\\n\\t\\t\\t           \\t\\t\\t<option *ngFor=\\\"let s of truckList\\\" value=\\\"{{s.supervisor_id}}\\\">{{s.name}} ({{s.description}})</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t</select>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"form-group margin_right_15\\\">\\r\\n                        <div class=\\\"input-group\\\">\\r\\n                            <div class=\\\"input-group-addon\\\">Month:</div>\\r\\n\\t\\t\\t\\t            <select class=\\\"form-control\\\" name=\\\"chosenDate\\\" [(ngModel)]=\\\"chosenDate\\\" required>\\r\\n\\t\\t\\t           \\t\\t\\t<option *ngFor=\\\"let s of monthChoices\\\" value=\\\"{{s | date:'yyyy-MM-dd'}}\\\">{{s | date:'MMM y'}}</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t</select>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <button type=\\\"button\\\" class=\\\"btn button btn-info\\\" (click)=\\\"onDownload()\\\" [disabled]=\\\"!stockForm.form.valid\\\">Download</button>\\r\\n                </form>\\r\\n        \\t</div>\\r\\n        </div>\\r\\n   \\t</div>\\r\\n   \\t<div class=\\\"col-md-1\\\"></div>\\r\\n</div>\\r\\n<div class=\\\"row margin_addform text-center\\\">\\r\\n   \\t<h3 class=\\\"text-capitalize\\\">Monthly Stock Transfer Summary</h3>\\r\\n   \\t<div class=\\\"col-xs-12 col-md-10 col-md-offset-1\\\">\\r\\n\\t\\t<div class=\\\"row text-center\\\">\\r\\n        \\t<div class=\\\"col-xs-12\\\">\\r\\n        \\t\\t<form class=\\\"form-inline\\\" #stSummaryForm=\\\"ngForm\\\">\\r\\n                    <div class=\\\"form-group\\\">\\r\\n                        <div class=\\\"input-group\\\">\\r\\n                            <div class=\\\"input-group-addon\\\">Month:</div>\\r\\n\\t\\t\\t\\t            <select class=\\\"form-control\\\" name=\\\"chosenMonth\\\" [(ngModel)]=\\\"chosenMonth\\\" required>\\r\\n\\t\\t\\t           \\t\\t\\t<option *ngFor=\\\"let s of monthChoices\\\" value=\\\"{{s | date:'MM'}}\\\">{{s | date:'MMM y'}}</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t</select>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <button type=\\\"button\\\" class=\\\"btn button btn-info\\\" (click)=\\\"onDownloadMonthlySummary()\\\" [disabled]=\\\"!stSummaryForm.form.valid\\\">Download</button>\\r\\n                </form>\\r\\n        \\t</div>\\r\\n        </div>\\r\\n   \\t</div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { Customer, Form, AdministrationService, InventoryManagementService, LoggingService, Material, Container, User, AuthenticationService, FormManagementService } from \"process-smart-ng6-lib\";\r\nimport { CustomDownloadServiceService } from \"src/app/_services/custom-download-service.service\";\r\nimport { SharedService } from \"src/app/_services/shared.service\";\r\nimport { saveAs } from 'file-saver';\r\n\r\n@Component({\r\n  selector: 'app-view-stock-by-truck',\r\n  templateUrl: './view-stock-by-truck.component.html',\r\n  styleUrls: ['./view-stock-by-truck.component.css']\r\n})\r\nexport class ViewStockByTruckComponent implements OnInit {\r\n\r\n    partsList: Array<any>;\r\n    truckList: Array<Container>;\r\n    userslist: Array<User>;\r\n    typeId = '54';\r\n    deptId = '1';\r\n    totalCost: string;\r\n    monthChoices: Array<any>;\r\n    chosenDate: string;\r\n    chosenMonth: string;\r\n    matDict: any;\r\n    keyArr: Array<any>;\r\n    chosenSupervisorId: string;\r\n    \r\n    constructor(private aus: AuthenticationService, private fms: FormManagementService,\r\n          private ims: InventoryManagementService, private cds: CustomDownloadServiceService,\r\n          private ssv: SharedService) { }\r\n    \r\n    ngOnInit() {\r\n      this.populateTrucks();\r\n      this.populateMaterials();\r\n      this.populateUsers();\r\n      this.populateMonthChoices();\r\n      this.totalCost = '0';\r\n    }\r\n    \r\n    populateMonthChoices(){\r\n        let curDate = new Date();\r\n        curDate.setDate(1);\r\n        let prevDate = new Date();\r\n        prevDate.setDate(1);\r\n        prevDate.setMonth(prevDate.getMonth()-1);\r\n        let prev2Date = new Date();\r\n        prev2Date.setDate(1);\r\n        prev2Date.setMonth(prev2Date.getMonth()-2);\r\n        this.monthChoices = [prev2Date, prevDate, curDate];\r\n    }\r\n    \r\n    populateMaterials(){\r\n      this.ims.getMaterials(this.deptId)\r\n          .subscribe(itemsList => {\r\n               this.partsList = itemsList;\r\n          });\r\n    }\r\n    \r\n    populateUsers(){\r\n        this.aus.getUsers()\r\n            .subscribe(itemsList => {\r\n                 this.userslist = itemsList;\r\n            });\r\n      }\r\n    \r\n    populateTrucks(){\r\n      this.ims.getContainers(this.deptId)\r\n          .subscribe(itemsList => {\r\n               this.truckList = itemsList;\r\n          });\r\n    }\r\n    \r\n    populateItems() {\r\n        if(!this.chosenDate || !this.chosenSupervisorId) return;\r\n        let lastDayOfMonth = new Date(+this.chosenDate.substring(0,4), +this.chosenDate.substring(5,7), 0);\r\n        const l = this.ssv.toHtmlDateStr(lastDayOfMonth);\r\n        \r\n      this.fms.getFormsByDate(this.typeId, this.chosenDate, l, this.chosenSupervisorId)\r\n        .subscribe(itemsList => {\r\n            this.matDict = {};\r\n            this.keyArr = [];\r\n            if(!itemsList) {\r\n                return;\r\n            }\r\n            console.log('Driver is '+this.chosenSupervisorId);\r\n            \r\n            let materialList = itemsList.map(x => x.inputTables.materials);\r\n            //Iterate over array of arrays of materials\r\n            materialList.forEach(y => {\r\n                //Operate on this array of materials\r\n                y.forEach(x => {\r\n                    if(this.matDict[x.material_id]){\r\n                        this.matDict[x.material_id].quantity = '' + (+this.matDict[x.material_id].quantity + +x.quantity);\r\n                    }\r\n                    else{\r\n                        this.keyArr.push(x.material_id);\r\n                        this.matDict[x.material_id] = x;\r\n                    }\r\n                });\r\n            });\r\n            \r\n            let totalCost = 0;\r\n            this.keyArr.forEach(i => {\r\n                let v = this.matDict[i];\r\n                let mat = this.partsList.find(x => x.id == v.material_id);\r\n                if(mat){\r\n                    v.part_num = mat.part_num;\r\n                    v.description = mat.description;\r\n                    v.unit = mat.unit;\r\n                    v.price = mat.price;\r\n                    v.total = +v.quantity * +mat.price;\r\n                    totalCost += +v.total;\r\n                }\r\n            });\r\n            this.totalCost = \"\"+totalCost;\r\n        });\r\n      }\r\n    \r\n    onDownload(){\r\n        if(!this.chosenDate || !this.chosenSupervisorId) return;\r\n        let lastDayOfMonth = new Date(+this.chosenDate.substring(0,4), +this.chosenDate.substring(5,7), 0);\r\n        const l = this.ssv.toHtmlDateStr(lastDayOfMonth);\r\n        \r\n        this.cds.downloadStockTransferMaterialUsage(this.chosenDate, l, this.chosenSupervisorId)\r\n            .subscribe(\r\n                res => {\r\n                    saveAs(res, 'MonthlyStockTransfer.xls', \r\n                        { type: 'application/vnd.ms-excel' })\r\n                },\r\n                error => {\r\n                    // Display error message\r\n                    this.ssv.showError('Error: Unable to download usage history!');\r\n                }\r\n            );\r\n    }\r\n    \r\n    onDownloadMonthlySummary(){\r\n        if(!this.chosenMonth) return;\r\n        this.cds.downloadStockTransferMonthlySummary(this.chosenMonth)\r\n        .subscribe(\r\n            res => {\r\n                saveAs(res, 'MonthlyStockTransferSummary.xls', \r\n                    { type: 'application/vnd.ms-excel' })\r\n            },\r\n            error => {\r\n                // Display error message\r\n                this.ssv.showError('Error: Unable to download monthly stock transfer summary!');\r\n            }\r\n        );\r\n    }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3ZpZXctc3RvY2stdHJhbnNmZXItc3RhdGlzdGljcy92aWV3LXN0b2NrLXRyYW5zZmVyLXN0YXRpc3RpY3MuY29tcG9uZW50LmNzcyJ9 */\"","module.exports = \"<div class=\\\"row margin_addform text-center\\\">\\r\\n   \\t<h3 class=\\\"text-capitalize\\\">Stock Usage This Month</h3>\\r\\n\\t<div class=\\\"col-xs-12 col-md-10 col-md-offset-1\\\">\\r\\n\\t\\t<div class=\\\"row form-group text-center\\\">\\r\\n        \\t<div class=\\\"col-xs-12 col-sm-8 col-md-6 col-lg-4 col-sm-offset-2 col-md-offset-3 col-lg-offset-4\\\">\\r\\n\\t            <select class=\\\"form-control\\\" (change)=\\\"populateItems($event.target.value)\\\">\\r\\n\\t            \\t<option hidden disabled selected value=\\\"0\\\"> -- Select a Project -- </option>\\r\\n           \\t\\t\\t<option *ngFor=\\\"let s of projectList\\\" value=\\\"{{s.jobnum}}\\\">{{s.project_name}} ({{s.jobnum}})</option>\\r\\n\\t\\t\\t\\t</select>\\r\\n        \\t</div>\\r\\n        </div>\\r\\n       \\t<i *ngIf=\\\"!usageHistory\\\">\\r\\n\\t\\t\\tNo items here!\\r\\n        </i>\\r\\n        <h3 class=\\\"text-left\\\"><b>Total Cost: {{totalCost | currency}}</b></h3>\\r\\n        <table *ngIf=\\\"usageHistory\\\" class=\\\"table table_view table-hover\\\">\\r\\n   \\t\\t\\t<thead>\\r\\n       \\t\\t\\t<tr class=\\\"table_heading\\\">\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Item #</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-4\\\">Description</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-1\\\">Qty</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-1\\\">Unit</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Price</th>\\r\\n           \\t\\t\\t<th class=\\\"table_cell_heading col-sm-2\\\">Total Cost</th>\\r\\n       \\t\\t\\t</tr>\\r\\n  \\t\\t\\t</thead>\\r\\n\\t\\t\\t<tbody>\\r\\n                <tr *ngFor=\\\"let item of usageHistory\\\" class=\\\"table_body\\\">\\r\\n                    <td class=\\\"col-sm-2\\\">{{item.part_num}}</td>\\r\\n                    <td class=\\\"col-sm-4\\\">{{item.description}}</td>\\r\\n                    <td class=\\\"col-sm-1\\\">{{item.quantity}}</td>\\r\\n                    <td class=\\\"col-sm-1\\\">{{item.unit}}</td>\\r\\n                    <td class=\\\"col-sm-2\\\">{{item.price | currency}}</td>\\r\\n                    <td class=\\\"col-sm-2\\\">{{item.total | currency}}</td>\\r\\n                </tr>\\r\\n\\t         </tbody>\\r\\n        </table>\\r\\n   \\t</div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { Customer, Form, AdministrationService, InventoryManagementService, LoggingService, Material } from \"process-smart-ng6-lib\";\r\nimport { CustomDownloadServiceService } from \"src/app/_services/custom-download-service.service\";\r\n\r\n@Component({\r\n  selector: 'app-view-stock-transfer-statistics',\r\n  templateUrl: './view-stock-transfer-statistics.component.html',\r\n  styleUrls: ['./view-stock-transfer-statistics.component.css']\r\n})\r\nexport class ViewStockTransferStatisticsComponent implements OnInit {\r\n\r\n    partsList: Array<any>;\r\n    projectList: Array<Customer>;\r\n    typeId = '46';\r\n    deptId = '6';\r\n    usageHistory: Array<any>;\r\n    totalCost: string;\r\n    \r\n  constructor(private ls: LoggingService, private adms: AdministrationService,\r\n          private ims: InventoryManagementService, private cds: CustomDownloadServiceService) { }\r\n\r\n  ngOnInit() {\r\n      this.populateProjects();\r\n      this.populateMaterials();\r\n      this.totalCost = '0';\r\n  }\r\n  \r\n  populateMaterials(){\r\n      this.ims.getMaterials(this.deptId)\r\n          .subscribe(itemsList => {\r\n               this.partsList = itemsList;\r\n          });\r\n  }\r\n  \r\n  populateProjects(){\r\n      this.adms.getCustomersByDept(this.deptId)\r\n          .subscribe(itemsList => {\r\n               this.projectList = itemsList;\r\n          });\r\n  }\r\n\r\n  populateItems(jobNum: string) {\r\n      this.ls.getJobUsageStatistics('6',jobNum)\r\n        .subscribe(itemsList => {\r\n            this.usageHistory = itemsList;\r\n            let totalCost = 0;\r\n            this.usageHistory.forEach((v,i,obj) => {\r\n                let mat = this.partsList.find(x => x.id == v.item_num);\r\n                if(mat){\r\n                    v.part_num = mat.part_num;\r\n                    v.description = mat.description;\r\n                    v.unit = mat.unit;\r\n                    v.price = mat.price;\r\n                    v.total = +v.quantity * +mat.price;\r\n                    totalCost += +v.total;\r\n                }\r\n            });\r\n            this.totalCost = \"\"+totalCost;\r\n        });\r\n      }\r\n}\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false,\r\n  allow_client: 1\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import 'hammerjs';\r\nimport { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n\r\n","/* (ignored) */"],"sourceRoot":""}